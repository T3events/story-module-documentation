<h1>WindowOrWorkerGlobalScope.btoa</h1> <p>The <code><strong>WindowOrWorkerGlobalScope.btoa()</strong></code> method creates a base-64 encoded ASCII string from a <a title="The String global object is a constructor for strings, or a sequence of characters." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String"><code>String</code></a> object in which each character in the string is treated as a byte of binary data.</p> <div class="note"> <p><strong>Note</strong>: Since this function treats each character as a byte of binary data, regardless of the number of bytes which actually make up the character, an <code>InvalidCharacterError</code> exception is thrown if any character's <a title="The definition of that term (code point) has not been written yet; please consider contributing it!" href="https://developer.mozilla.org/en-US/docs/Glossary/code_point" class="glossaryLink">code point</a> is outside the range 0x00 to 0xFF. See <a href="#Unicode_strings">Unicode strings</a> for an example demonstrating how to encode strings with characters outside the 0x00 to 0xFF range</p> </div> <h2 id="Syntax">Syntax</h2> <pre class="syntaxbox">var encodedData = scope.btoa(<em>stringToEncode</em>);</pre> <h3 id="Parameters">Parameters</h3> <dl> <dt><code>stringToEncode</code></dt> <dd>A string whose characters each represent a single byte of binary data to be encoded into ASCII.</dd> </dl> <h3 id="Return_value">Return value</h3> <p>A string containing the Base64 representation of <code>stringToEncode</code>.</p> <h3 id="Exceptions">Exceptions</h3> <h2 id="Example">Example</h2> <pre data-language="js">var encodedData = window.btoa('Hello, world'); // encode a string
var decodedData = window.atob(encodedData); // decode the string
</pre> <h2 id="Notes">Notes</h2> <p>You can use this method to encode data which may otherwise cause communication problems, transmit it, then use the <code><a title="The WindowOrWorkerGlobalScope.atob() function decodes a string of data which has been encoded using base-64 encoding. You can use the btoa() method to encode and transmit data which may otherwise cause communication problems, then transmit it and use the atob() method to decode the data again. For example, you can encode, transmit, and decode control characters such as ASCII values 0 through 31." href="atob"><code>atob()</code></a></code> method to decode the data again. For example, you can encode control characters such as ASCII values 0 through 31.</p> <p><code>btoa()</code> is also available to XPCOM components implemented in JavaScript, even though <a title="The window object represents a window containing a DOM document; the document property points to the DOM document loaded in that window." href="../window"><code>Window</code></a> is not the global object in components.</p> <h2 id="Unicode_strings">Unicode strings</h2> <p>In most browsers, calling <code>btoa()</code> on a Unicode string will cause an <code>InvalidCharacterError</code> exception.</p> <p>One option is to escape any extended characters so that the string you actually encode is an ASCII representation of the original. Consider this example, noted by <a title="http://ecmanaut.blogspot.com/2006/07/encoding-decoding-utf8-in-javascript.html" href="http://ecmanaut.blogspot.com/2006/07/encoding-decoding-utf8-in-javascript.html" class="external">Johan Sundström</a>:</p> <pre id="txt" data-language="js">// ucs-2 string to base64 encoded ascii
function utoa(str) {
    return window.btoa(unescape(encodeURIComponent(str)));
}
// base64 encoded ascii to ucs-2 string
function atou(str) {
    return decodeURIComponent(escape(window.atob(str)));
}
// Usage:
utoa('✓ à la mode'); // 4pyTIMOgIGxhIG1vZGU=
atou('4pyTIMOgIGxhIG1vZGU='); // "✓ à la mode"

utoa('I \u2661 Unicode!'); // SSDimaEgVW5pY29kZSE=
atou('SSDimaEgVW5pY29kZSE='); // "I ♡ Unicode!"
</pre> <p>A better, more faithful and less expensive solution is to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Base64_encoding_and_decoding#Solution_.232_.E2.80.93_rewriting_atob()_and_btoa()_using_TypedArrays_and_UTF-8">use typed arrays to do the conversion</a>.</p> <h2 id="Specifications">Specifications</h2> <table class="standard-table"> <thead> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> </thead> <tbody> <tr> <td><a lang="en" hreflang="en" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-btoa" class="external">WHATWG HTML Living Standard<br><small lang="en-US">The definition of 'WindowOrWorkerGlobalScope.btoa()' in that specification.</small></a></td> <td><span class="spec-Living">Living Standard</span></td> <td>Method moved to the <code>WindowOrWorkerGlobalScope</code> mixin in the latest spec.</td> </tr> <tr> <td><a lang="en" hreflang="en" href="https://html.spec.whatwg.org/multipage/#dom-windowbase64-btoa" class="external">WHATWG HTML Living Standard<br><small lang="en-US">The definition of 'WindowBase64.btoa()' in that specification.</small></a></td> <td><span class="spec-Living">Living Standard</span></td> <td>No change since the latest snapshot, <a lang="en" hreflang="en" class="external" href="http://www.w3.org/html/wg/drafts/html/master/" title="The 'HTML5.1' specification">HTML5.1</a>.</td> </tr> <tr> <td><a lang="en" hreflang="en" href="http://www.w3.org/html/wg/drafts/html/master/#dom-windowbase64-btoa" class="external">HTML5.1<br><small lang="en-US">The definition of 'WindowBase64.btoa()' in that specification.</small></a></td> <td><span class="spec-REC">Recommendation</span></td> <td>Snapshot of <a lang="en" hreflang="en" class="external" href="https://html.spec.whatwg.org/multipage/" title="The 'WHATWG HTML Living Standard' specification">WHATWG HTML Living Standard</a>. No change.</td> </tr> <tr> <td><a lang="en" hreflang="en" href="http://www.w3.org/TR/html5/#dom-windowbase64-btoa" class="external">HTML5<br><small lang="en-US">The definition of 'WindowBase64.btoa()' in that specification.</small></a></td> <td><span class="spec-REC">Recommendation</span></td> <td>Snapshot of <a lang="en" hreflang="en" class="external" href="https://html.spec.whatwg.org/multipage/" title="The 'WHATWG HTML Living Standard' specification">WHATWG HTML Living Standard</a>. Creation of <code>WindowBase64</code> (properties where on the target before it).</td> </tr> </tbody> </table> <h2 id="Browser_compatibility">Browser compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari (WebKit)</th> </tr> <tr> <td>Basic support</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>1.0 (1.7 or earlier)<sup>[1]</sup><br> <a title="Released on 2017-03-07." href="https://developer.mozilla.org/en-US/Firefox/Releases/52">52</a> (52)<sup>[2]</sup>
</td> <td>10</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> </tr> </tbody> </table> </div> <div id="compat-mobile"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android</th> <th>Firefox Mobile (Gecko)</th> <th>IE Mobile</th> <th>Opera Mobile</th> <th>Safari Mobile</th> </tr> <tr> <td>Basic support</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>1.0 (1)<br> 52.0 (52)</td> <td><span style="color: #f00;">No support</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> </tr> </tbody> </table> </div> <p>[1] <code>btoa()</code> is also available to XPCOM components implemented in JavaScript, even though <code><a href="../window">window</a></code> is not the global object in components.</p> <p>[2] <code>btoa()</code> now defined on <a title="The WindowOrWorkerGlobalScope mixin describes several features common to the Window and WorkerGlobalScope interfaces. Each of these interfaces can, of course, add more features in addition to the ones listed below." href="../windoworworkerglobalscope"><code>WindowOrWorkerGlobalScope</code></a> mixin.</p> <h2 id="See_also">See also</h2> <ul> <li><a href="https://developer.mozilla.org/Web/API/WindowBase64/Base64_encoding_and_decoding">Base64 encoding and decoding</a></li> <li><a href="https://developer.mozilla.org/en-US/docs/data_URIs"><code>data</code> URIs</a></li> <li><a title="The WindowOrWorkerGlobalScope.atob() function decodes a string of data which has been encoded using base-64 encoding. You can use the btoa() method to encode and transmit data which may otherwise cause communication problems, then transmit it and use the atob() method to decode the data again. For example, you can encode, transmit, and decode control characters such as ASCII values 0 through 31." href="atob"><code>atob()</code></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Components.utils.importGlobalProperties">Components.utils.importGlobalProperties</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/btoa$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/btoa" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/btoa</a>
  </p>
</div>

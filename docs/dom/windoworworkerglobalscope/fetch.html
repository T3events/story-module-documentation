<h1>WindowOrWorkerGlobalScope.fetch</h1><div><div class="notice experimental"> <p> <strong>This is an experimental technology</strong><br>Because this technology's specification has not stabilized, check the <a href="#Browser_compatibility">compatibility table</a> for usage in various browsers. Also note that the syntax and behavior of an experimental technology is subject to change in future versions of browsers as the specification changes.</p> </div></div> <p>The <code><strong>fetch()</strong></code> method of the <a href="https://developer.mozilla.org/en-US/docs/Web/API/WorkerOrGlobalScope" title="The documentation about this has not yet been written; please consider contributing!"><code>WorkerOrGlobalScope</code></a> mixin starts the process of fetching a resource from the network. This returns a promise that resolves to the <a href="../response" title="The Response interface of the Fetch API represents the response to a request."><code>Response</code></a> object representing the response to your request.</p> <p><code>WorkerOrGlobalScope</code> is implemented by both <a href="../window" title="The window object represents a window containing a DOM document; the document property points to the DOM document loaded in that window."><code>Window</code></a> and <a href="../workerglobalscope" title="The WorkerGlobalScope interface of the Web Workers API is an interface representing the scope of any worker. Workers have no browsing context; this scope contains the information usually conveyed by Window objects — in this case event handlers, the console or the associated WorkerNavigator object. Each WorkerGlobalScope has its own event loop."><code>WorkerGlobalScope</code></a>, which means that the <code>fetch()</code> method is available in pretty much any context in which you might want to fetch resources.</p> <p>A <a href="https://developer.mozilla.org/en-US/docs/Web/API/WorkerOrGlobalScope/fetch" title="The documentation about this has not yet been written; please consider contributing!"><code>fetch()</code></a> promise rejects with a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError" title="The TypeError object represents an error when a value is not of the expected type."><code>TypeError</code></a> when a network error is encountered, although this usually means a permissions issue or similar. An accurate check for a successful <code>fetch()</code> would include checking that the promise resolved, then checking that the <a href="../response/ok" title="The ok read-only property of the Response interface contains a boolean stating whether the response was successful (status in the range 200-299) or not."><code>Response.ok</code></a> property has a value of <code>true</code>. An HTTP status of 404 does not constitute a network error.</p> <p>The <code>fetch()</code> method is controlled by the <code>connect-src</code> directive of <a href="https://developer.mozilla.org/en-US/docs/Security/CSP/CSP_policy_directives">Content Security Policy</a> rather than the directive of the resources it's retrieving.</p> <div class="note"> <p><strong>Note</strong>: The <code>fetch()</code> method's parameters are identical to those of the <a href="../request/request" title="The Request() constructor creates a new Request object."><code>Request()</code></a> constructor.</p> </div> <h2 id="Syntax">Syntax</h2> <pre class="syntaxbox">Promise&lt;Response&gt; fetch(input[, init]);</pre> <h3 id="Parameters">Parameters</h3> <dl> <dt><em>input</em></dt> <dd>This defines the resource that you wish to fetch. This can either be: <ul> <li>A <a href="../usvstring" title="USVString corresponds to the set of all possible sequences of unicode scalar values. USVString maps to a String when returned in JavaScript; it's generally only used for APIs that perform text processing and need a string of unicode scalar values to operate on."><code>USVString</code></a> containing the direct URL of the resource you want to fetch. Some browsers accept <code>blob:</code> and <code>data:</code> as schemes.</li> <li>A <a href="../request" title="The Request interface of the Fetch API represents a resource request."><code>Request</code></a> object.</li> </ul> </dd> <dt>
<em>init</em> <span class="inlineIndicator optional optionalInline">Optional</span>
</dt> <dd>An options object containing any custom settings that you want to apply to the request. The possible options are: <ul> <li>
<code>method</code>: The request method, e.g., <code>GET</code>, <code>POST</code>.</li> <li>
<code>headers</code>: Any headers you want to add to your request, contained within a <a href="../headers" title="The Headers interface of the Fetch API allows you to perform various actions on HTTP request and response headers. These actions include retrieving, setting, adding to, and removing. A Headers object has an associated header list, which is initially empty and consists of zero or more name and value pairs.  You can add to this using methods like append() (see Examples.) In all methods of this interface, header names are matched by case-insensitive byte sequence."><code>Headers</code></a> object or an object literal with <a href="../bytestring" title="ByteString is a UTF-8 String that corresponds to the set of all possible sequences of bytes. ByteString maps to a String when returned in JavaScript; generally, it's only used when interfacing with protocols that use bytes and strings interchangably, such as HTTP."><code>ByteString</code></a> values.</li> <li>
<code>body</code>: Any body that you want to add to your request: this can be a <a href="../blob" title="A Blob object represents a file-like object of immutable, raw data. Blobs represent data that isn't necessarily in a JavaScript-native format. The File interface is based on Blob, inheriting blob functionality and expanding it to support files on the user's system."><code>Blob</code></a>, <a href="../buffersource" title="Editorial review completed."><code>BufferSource</code></a>, <a href="../formdata" title='The FormData interface provides a way to easily construct a set of key/value pairs representing form fields and their values, which can then be easily sent using the XMLHttpRequest.send() method. It uses the same format a form would use if the encoding type were set to "multipart/form-data".'><code>FormData</code></a>, <a href="../urlsearchparams" title="The URLSearchParams interface defines utility methods to work with the query string of a URL."><code>URLSearchParams</code></a>, or <a href="../usvstring" title="USVString corresponds to the set of all possible sequences of unicode scalar values. USVString maps to a String when returned in JavaScript; it's generally only used for APIs that perform text processing and need a string of unicode scalar values to operate on."><code>USVString</code></a> object. Note that a request using the <code>GET</code> or <code>HEAD</code> method cannot have a body.</li> <li>
<code>mode</code>: The mode you want to use for the request, e.g., <code>cors</code>, <code>no-cors</code>, or <code>same-origin.</code>
</li> <li>
<code>credentials</code>: The request credentials you want to use for the request: <code>omit</code>, <code>same-origin</code>, or <code>include</code>. To automatically send cookies for the current domain, this option must be provided. Starting with Chrome 50, this property also takes a <a href="../federatedcredential" title="The FederatedCredential interface of the the Credential Management API provides information about credentials from a federated identity provider, which is an entity that a website trusts to correctly authenticate a user, and which provides an API for that purpose. OpenID Connect is an example of such a framework. In supporting browsers an instance of this class may be passed in the credential member of the init object for global fetch."><code>FederatedCredential</code></a> instance or a <a href="../passwordcredential" title="The interface of the the Credential Management API provides information about a username/password pair. In supporting browsers an instance of this class may be passed in the credential member of the init object for global fetch."><code>PasswordCredential</code></a> instance.</li> <li>
<code>cache</code>: The cache mode you want to use for the request: <code>default</code>, <code>no-store</code>, <code>reload</code>, <code>no-cache</code>, <code>force-cache</code>, or <code>only-if-cached</code>.</li> <li>
<code>redirect</code>: The redirect mode to use: <code>follow</code> (automatically follow redirects), <code>error</code> (abort with an error if a redirect occurs), or <code>manual</code> (handle redirects manually). In Chrome the default was <code>follow</code> before Chrome 47 and <code>manual</code> starting with Chrome 47.</li> <li>
<code>referrer</code>: A <a href="../usvstring" title="USVString corresponds to the set of all possible sequences of unicode scalar values. USVString maps to a String when returned in JavaScript; it's generally only used for APIs that perform text processing and need a string of unicode scalar values to operate on."><code>USVString</code></a> specifying <code>no-referrer</code>, <code>client</code>, or a URL. The default is <code>client</code>.</li> <li>
<code>referrerPolicy</code>: Specifies the value of the referer HTTP header. May be one of <code>no-referrer</code>, <code>no-referrer-when-downgrade</code>, <code>origin</code>, <code>origin-when-cross-origin</code>, <code>unsafe-url</code>.</li> <li>
<code>integrity</code>: Contains the <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Subresource_Integrity">subresource integrity</a> value of the request (e.g., <code>sha256-BpfBw7ivV8q2jLiT13fxDYAe2tJllusRSZ273h2nFSE=</code>).</li> </ul> </dd> </dl> <h3 id="Return_value">Return value</h3> <p>A <a href="https://developer.mozilla.org/en-US/docs/Web/API/Promise" title="The Promise interface represents a proxy for a value not necessarily known at its creation time. It allows you to associate handlers to an asynchronous action's eventual success or failure. This lets asynchronous methods return values like synchronous methods: instead of the final value, the asynchronous method returns a promise of having a value at some point in the future."><code>Promise</code></a> that resolves to a <a href="../response" title="The Response interface of the Fetch API represents the response to a request."><code>Response</code></a> object.</p> <h3 id="Exceptions">Exceptions</h3> <table class="standard-table"> <thead> <tr> <th scope="col"><strong>Type</strong></th> <th scope="col"><strong>Description</strong></th> </tr> </thead> <tbody> <tr> <td><code>TypeError</code></td> <td>Since <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Firefox/Releases/43">Firefox 43</a>, <code>fetch()</code> will throw a <code>TypeError</code> if the URL has credentials, such as <code>http://user:password@example.com</code>.</td> </tr> </tbody> </table> <h2 id="Example">Example</h2> <p>In our <a href="https://github.com/mdn/fetch-examples/tree/gh-pages/fetch-request">Fetch Request example</a> (see <a href="https://mdn.github.io/fetch-examples/fetch-request/">Fetch Request live</a>) we create a new <a href="../request" title="The Request interface of the Fetch API represents a resource request."><code>Request</code></a> object using the relevant constructor, then fetch it using a <code>fetch()</code> call. Since we are fetching an image, we run <a href="../body/blob" title="The blob() method of the Body mixin takes a Response stream and reads it to completion. It returns a promise that resolves with a Blob."><code>Body.blob()</code></a> on the response to give it the proper MIME type so it will be handled properly, then create an Object URL of it and display it in an <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img" title="The HTML &lt;img&gt; element represents an image in the document."><code>&lt;img&gt;</code></a> element.</p> <pre data-language="js">var myImage = document.querySelector('img');

var myRequest = new Request('flowers.jpg');

fetch(myRequest).then(function(response) {
  return response.blob();
}).then(function(response) {
  var objectURL = URL.createObjectURL(response);
  myImage.src = objectURL;
});</pre> <p>In our <a href="https://github.com/mdn/fetch-examples/tree/gh-pages/fetch-with-init-then-request">Fetch with init then Request example</a> (see <a href="https://mdn.github.io/fetch-examples/fetch-with-init-then-request/">Fetch Request init live</a>) we do the same thing except that we pass in an init object when we invoke <code>fetch()</code>:</p> <pre data-language="js">var myImage = document.querySelector('img');

var myHeaders = new Headers();
myHeaders.append('Content-Type', 'image/jpeg');

var myInit = { method: 'GET',
               headers: myHeaders,
               mode: 'cors',
               cache: 'default' };

var myRequest = new Request('flowers.jpg');

fetch(myRequest,myInit).then(function(response) {
  ... 
});</pre> <p>Note that you could also pass the init object in with the <code>Request</code> constructor to get the same effect, e.g.:</p> <pre data-language="js">var myRequest = new Request('flowers.jpg',myInit);</pre> <p>You can also use an object literal as <code>headers</code> in <code>init</code>.</p> <pre data-language="js">var myInit = { method: 'GET',
               headers: {
                   'Content-Type': 'image/jpeg'
               },
               mode: 'cors',
               cache: 'default' };

var myRequest = new Request('flowers.jpg', myInit);
</pre> <h2 id="Specifications">Specifications</h2> <table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a href="https://fetch.spec.whatwg.org/#fetch-method" class="external" lang="en" hreflang="en">Fetch<br><small lang="en-US">The definition of 'fetch()' in that specification.</small></a></td> <td><span class="spec-Living">Living Standard</span></td> <td>Defined in a <code>WindowOrWorkerGlobalScope</code> partial in the newest spec.</td> </tr> <tr> <td><a href="https://fetch.spec.whatwg.org/#dom-global-fetch" class="external" lang="en" hreflang="en">Fetch<br><small lang="en-US">The definition of 'fetch()' in that specification.</small></a></td> <td><span class="spec-Living">Living Standard</span></td> <td>Initial definition</td> </tr> <tr> <td><a href="https://w3c.github.io/webappsec-credential-management" class="external" lang="en" hreflang="en" title="The 'Credential Management Level 1' specification">Credential Management Level 1</a></td> <td><span class="spec-ED">Editor's Draft</span></td> <td>Adds <a href="../federatedcredential" title="The FederatedCredential interface of the the Credential Management API provides information about credentials from a federated identity provider, which is an entity that a website trusts to correctly authenticate a user, and which provides an API for that purpose. OpenID Connect is an example of such a framework. In supporting browsers an instance of this class may be passed in the credential member of the init object for global fetch."><code>FederatedCredential</code></a> or <a href="../passwordcredential" title="The interface of the the Credential Management API provides information about a username/password pair. In supporting browsers an instance of this class may be passed in the credential member of the init object for global fetch."><code>PasswordCredential</code></a> instance as a possible value for <code>init.credentials</code>.</td> </tr> </tbody> </table> <h2 id="Browser_compatibility">Browser compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Edge</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari (WebKit)</th> </tr> <tr> <td>Basic support</td> <td>42</td> <td>14</td> <td>
<a href="https://developer.mozilla.org/en-US/Firefox/Releases/34" title="Released on 2014-12-01.">34</a> (34)<sup>[1]</sup><br> <a href="https://developer.mozilla.org/en-US/Firefox/Releases/39" title="Released on 2015-06-30.">39</a> (39)<br> <a href="https://developer.mozilla.org/en-US/Firefox/Releases/52" title="Released on 2017-03-07.">52</a> (52)<sup>[2]</sup>
</td> <td><span style="color: #f00;">No support</span></td> <td>29<br> 28<sup>[1]</sup>
</td> <td><span style="color: #f00;">No support</span></td> </tr> <tr> <td>Streaming response body</td> <td>43</td> <td>14</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> </tr> <tr> <td>Support for <code>blob:</code> and <code>data:</code>
</td> <td>48</td> <td><span style="color: #f00;">No support</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> </tr> <tr> <td><code>referrerPolicy</code></td> <td>52</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td>39</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> </tr> </tbody> </table> </div> <div id="compat-mobile"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android</th> <th>Android Webview</th> <th>Edge</th> <th>Firefox Mobile (Gecko)</th> <th>Firefox OS (Gecko)</th> <th>IE Phone</th> <th>Opera Mobile</th> <th>Safari Mobile</th> <th>Chrome for Android</th> </tr> <tr> <td>Basic support</td> <td><span style="color: #f00;">No support</span></td> <td>42</td> <td>14</td> <td>52.0 (52)<sup>[2]</sup>
</td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td>42</td> </tr> <tr> <td>Streaming response body</td> <td><span style="color: #f00;">No support</span></td> <td>43</td> <td>14</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td>43</td> </tr> <tr> <td>Support for <code>blob:</code> and <code>data:</code>
</td> <td><span style="color: #f00;">No support</span></td> <td>43</td> <td><span style="color: #f00;">No support</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td>43</td> </tr> <tr> <td><code>referrerPolicy</code></td> <td><span style="color: #f00;">No support</span></td> <td>52</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td>39</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td>52</td> </tr> </tbody> </table> </div> <p>[1] API is implemented behind a preference.</p> <p>[2] <code>fetch()</code> now defined on <a href="../windoworworkerglobalscope" title="The WindowOrWorkerGlobalScope mixin describes several features common to the Window and WorkerGlobalScope interfaces. Each of these interfaces can, of course, add more features in addition to the ones listed below."><code>WindowOrWorkerGlobalScope</code></a> mixin.</p> <h2 id="See_also">See also</h2> <ul> <li><a href="../fetch_api">Fetch API</a></li> <li><a href="../service_worker_api">ServiceWorker API</a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS">HTTP access control (CORS)</a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP">HTTP</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch</a>
  </p>
</div>

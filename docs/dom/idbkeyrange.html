<h1>IDBKeyRange</h1> <div> <p>The <strong><code>IDBKeyRange</code></strong> interface of the <a href="https://developer.mozilla.org/en/IndexedDB" title="en/IndexedDB">IndexedDB API</a> represents a continuous interval over some data type that is used for keys. Records can be retrieved from <a href="idbobjectstore" title="This example shows a variety of different uses of object stores, from updating the data structure with IDBObjectStore.createIndex inside an onupgradeneeded function, to adding a new item to our object store with IDBObjectStore.add. For a full working example, see our To-do Notifications app (view example live.)"><code>IDBObjectStore</code></a> and <a href="idbindex" title="IDBIndex interface of the IndexedDB API provides asynchronous access to an index in a database. An index is a kind of object store for looking up records in another object store, called the referenced object store. You use this interface to retrieve data."><code>IDBIndex</code></a> objects using keys or a range of keys. You can limit the range using lower and upper bounds. For example, you can iterate over all values of a key in the value range A–Z.</p> </div> <p>A key range can be a single value or a range with upper and lower bounds or endpoints. If the key range has both upper and lower bounds, then it is <em>bounded</em>; if it has no bounds, it is <em>unbounded</em>. A bounded key range can either be open (the endpoints are excluded) or closed (the endpoints are included). To retrieve all keys within a certain range, you can use the following code constructs:</p> <table class="standard-table"> <thead> <tr> <th scope="col">Range</th> <th scope="col">Code</th> </tr> <tr> <td>All keys ≤ <strong>x</strong>
</td> <td>
<a href="idbkeyrange/upperbound" title="By default, it includes the upper endpoint value and is closed."><code>IDBKeyRange.upperBound</code></a><code>(<strong>x</strong>)</code>
</td> </tr> <tr> <td>All keys &lt; <strong>x</strong>
</td> <td>
<a href="idbkeyrange/upperbound" title="By default, it includes the upper endpoint value and is closed."><code>IDBKeyRange.upperBound</code></a><code>(<strong>x</strong>, true) </code>
</td> </tr> <tr> <td>All keys ≥<strong> y</strong>
</td> <td>
<a href="idbkeyrange/lowerbound" title="By default, it includes the lower endpoint value and is closed."><code>IDBKeyRange.lowerBound</code></a><code>(<strong>y</strong>)</code>
</td> </tr> <tr> <td>All keys &gt;<strong> y</strong>
</td> <td>
<a href="idbkeyrange/lowerbound" title="By default, it includes the lower endpoint value and is closed."><code>IDBKeyRange.lowerBound</code></a><code>(<strong>y</strong>, true)</code>
</td> </tr> <tr> <td>All keys ≥ <strong>x</strong> &amp;&amp; ≤ <strong>y</strong>
</td> <td>
<a href="idbkeyrange/bound" title="The bounds can be open (that is, the bounds exclude the endpoint values) or closed (that is, the bounds include the endpoint values). By default, the bounds are closed."><code>IDBKeyRange.bound</code></a><code>(<strong>x</strong>, <strong>y</strong>)</code>
</td> </tr> <tr> <td>All keys &gt; <strong>x</strong> &amp;&amp;&lt; <strong>y</strong>
</td> <td>
<a href="idbkeyrange/bound" title="The bounds can be open (that is, the bounds exclude the endpoint values) or closed (that is, the bounds include the endpoint values). By default, the bounds are closed."><code>IDBKeyRange.bound</code></a><code>(<strong>x</strong>, <strong>y</strong>, true, true)</code>
</td> </tr> <tr> <td>All keys &gt; <strong>x</strong> &amp;&amp; ≤ <strong>y</strong>
</td> <td>
<a href="idbkeyrange/bound" title="The bounds can be open (that is, the bounds exclude the endpoint values) or closed (that is, the bounds include the endpoint values). By default, the bounds are closed."><code>IDBKeyRange.bound</code></a><code>(<strong>x</strong>, <strong>y</strong>, true, false)</code>
</td> </tr> <tr> <td>All keys ≥ <strong>x</strong> &amp;&amp;&lt; <strong>y</strong>
</td> <td>
<a href="idbkeyrange/bound" title="The bounds can be open (that is, the bounds exclude the endpoint values) or closed (that is, the bounds include the endpoint values). By default, the bounds are closed."><code>IDBKeyRange.bound</code></a><code>(<strong>x</strong>, <strong>y</strong>, false, true)</code>
</td> </tr> <tr> <td>The key = <strong>z</strong>
</td> <td>
<a href="idbkeyrange/only" title="IDBKeyRange: The newly created key range."><code>IDBKeyRange.only</code></a><code>(<strong>z</strong>)</code>
</td> </tr> </thead> </table> <p>A key is in a key range if the following conditions are true:</p> <ul> <li>The lower value of the key range is one of the following: <ul> <li><code>undefined</code></li> <li>Less than key value</li> <li>Equal to key value if <code>lowerOpen</code> is <code>false</code>.</li> </ul> </li> <li>The upper value of the key range is one of the following: <ul> <li><code>undefined</code></li> <li>Greater than key value</li> <li>Equal to key value if <code>upperOpen</code> is <code>false</code>.</li> </ul> </li> </ul> <div class="note">
<strong>Note:</strong> This feature is available in <a href="web_workers_api">Web Workers</a>.</div> <h2 id="Methods">Methods</h2> <dl> <dt><a href="idbkeyrange/bound" title="The bounds can be open (that is, the bounds exclude the endpoint values) or closed (that is, the bounds include the endpoint values). By default, the bounds are closed."><code>IDBKeyRange.bound()</code></a></dt> <dd>Creates a new key range with upper and lower bounds.</dd> <dt><a href="idbkeyrange/includes" title="A Boolean."><code>IDBKeyRange.includes()</code></a></dt> <dd>Returns a boolean indicating whether a specified key is inside the key range.</dd> <dt><a href="idbkeyrange/only" title="IDBKeyRange: The newly created key range."><code>IDBKeyRange.only()</code></a></dt> <dd>Creates a new key range containing a single value.</dd> <dt><a href="idbkeyrange/lowerbound" title="By default, it includes the lower endpoint value and is closed."><code>IDBKeyRange.lowerBound()</code></a></dt> <dd>Creates a new key range with only a lower bound.</dd> <dt><a href="idbkeyrange/upperbound" title="By default, it includes the upper endpoint value and is closed."><code>IDBKeyRange.upperBound()</code></a></dt> <dd>Creates a new upper-bound key range.</dd> </dl> <h2 id="Properties">Properties</h2> <dl> <dt>
<a href="idbkeyrange/lower" title="The lower bound of the key range (can be any type.)"><code>IDBKeyRange.lower</code></a> <span class="inlineIndicator readOnly readOnlyInline" title="This value may not be changed.">Read only </span>
</dt> <dd>Lower bound of the key range.</dd> <dt>
<a href="idbkeyrange/upper" title="The upper bound of the key range (can be any type.)"><code>IDBKeyRange.upper</code></a> <span class="inlineIndicator readOnly readOnlyInline" title="This value may not be changed.">Read only </span>
</dt> <dd>Upper bound of the key range.</dd> <dt>
<a href="idbkeyrange/loweropen" title="A boolean:"><code>IDBKeyRange.lowerOpen</code></a> <span class="inlineIndicator readOnly readOnlyInline" title="This value may not be changed.">Read only </span>
</dt> <dd>Returns false if the lower-bound value is included in the key range.</dd> <dt>
<a href="idbkeyrange/upperopen" title="A boolean:"><code>IDBKeyRange.upperOpen</code></a> <span class="inlineIndicator readOnly readOnlyInline" title="This value may not be changed.">Read only </span>
</dt> <dd>Returns false if the upper-bound value is included in the key range.</dd> </dl> <h2 id="Examples">Examples</h2> <p>The following example illustrates how you'd use a key range. Here we declare a <code>keyRangeValue</code> as a range between values of "A" and "F". We open a transaction (using <a href="idbtransaction" title="Note that as of Firefox 40, IndexedDB transactions have relaxed durability guarantees to increase performance (see bug 1112702.) Previously in a readwrite transaction IDBTransaction.oncomplete was fired only when all data was guaranteed to have been flushed to disk. In Firefox 40+ the complete event is fired after the OS has been told to write the data but potentially before that data has actually been flushed to disk. The complete event may thus be delivered quicker than before, however, there exists a small chance that the entire transaction will be lost if the OS crashes or there is a loss of system power before the data is flushed to disk. Since such catastrophic events are rare most consumers should not need to concern themselves further."><code>IDBTransaction</code></a>) and an object store, and open a Cursor with <a href="idbobjectstore/opencursor" title="To determine if the add operation has completed successfully, listen for the results’s success event."><code>IDBObjectStore.openCursor</code></a>, declaring <code>keyRangeValue</code> as its optional key range value. This means that the cursor will only retrieve records with keys inside that range. This range includes the values "A" and "F", as we haven't declared that they should be open bounds. If we used IDBKeyRange.bound("A", "F", true, true);, then the range would not include "A" and "F", only the values between them.</p> <div class="note"> <p><strong>Note</strong>: For a more complete example allowing you to experiment with key range, have a look at our <a href="https://github.com/mdn/indexeddb-examples/tree/master/idbkeyrange">IDBKeyRange-example</a> repo (<a href="https://mdn.github.io/indexeddb-examples/idbkeyrange/">view the example live too</a>.)</p> </div> <pre data-language="js">function displayData() {
  var keyRangeValue = IDBKeyRange.bound("A", "F");

  var transaction = db.transaction(['fThings'], 'readonly');
  var objectStore = transaction.objectStore('fThings');

  objectStore.openCursor(keyRangeValue).onsuccess = function(event) {
    var cursor = event.target.result;
      if(cursor) {
        var listItem = document.createElement('li');
        listItem.innerHTML = '&lt;strong&gt;' + cursor.value.fThing + '&lt;/strong&gt;, ' + cursor.value.fRating;
        list.appendChild(listItem);  
          
        cursor.continue();
      } else {
        console.log('Entries all displayed.');
      }
    };
  };</pre> <h2 id="Specifications">Specifications</h2> <table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a href="https://www.w3.org/TR/IndexedDB/#idl-def-IDBKeyRange" class="external" lang="en" hreflang="en">Indexed Database API<br><small lang="en-US">The definition of 'IDBKeyRange' in that specification.</small></a></td> <td><span class="spec-REC">Recommendation</span></td> <td>Initial definition.</td> </tr> <tr> <td><a href="https://w3c.github.io/IndexedDB/#keyrange" class="external" lang="en" hreflang="en">Indexed Database API 2.0<br><small lang="en-US">The definition of 'IDBKeyRange' in that specification.</small></a></td> <td><span class="spec-REC">Recommendation</span></td> <td>Adds <code>includes()</code>.</td> </tr> </tbody> </table> <h2 name="Browser_compatibility" id="Browser_compatibility">Browser compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Edge</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari (WebKit)</th> </tr> <tr> <td>Basic support</td> <td>23<span class="inlineIndicator prefixBox prefixBoxInline" title="prefix"><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Prefixes" title="The name of this feature is prefixed with 'webkit' as this browser considers it experimental">webkit</a></span><br> 24 (unprefixed)</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>10 <span class="inlineIndicator prefixBox prefixBoxInline" title="prefix"><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Prefixes" title="The name of this feature is prefixed with 'moz' as this browser considers it experimental">moz</a></span><br> <a href="https://developer.mozilla.org/en-US/Firefox/Releases/16" title="Released on 2012-10-09.">16.0</a> (16.0)</td> <td>10, partial</td> <td>15</td> <td>7.1</td> </tr> <tr> <td>Available in workers</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>
<a href="https://developer.mozilla.org/en-US/Firefox/Releases/37" title="Released on 2015-04-07.">37.0</a> (37.0)</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> </tr> <tr> <td><code>includes()</code></td> <td>52.0</td> <td><span style="color: #f00;">No support</span></td> <td>
<a href="https://developer.mozilla.org/en-US/Firefox/Releases/47" title="Released on 2016-06-07.">47.0</a> (47.0)</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td>39</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> </tr> </tbody> </table> </div> <div id="compat-mobile"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android</th> <th>Android Webview</th> <th>Edge</th> <th>Firefox Mobile (Gecko)</th> <th>Firefox OS</th> <th>IE Phone</th> <th>Opera Mobile</th> <th>Safari Mobile</th> <th>Chrome for Android</th> </tr> <tr> <td>Basic support</td> <td>4.4</td> <td>52.0</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>22.0 (22.0)</td> <td>1.0.1</td> <td>10</td> <td>22</td> <td>8</td> <td>52.0</td> </tr> <tr> <td>Available in workers</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>37.0 (37.0)</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> </tr> <tr> <td><code>includes()</code></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td>52.0</td> <td><span style="color: #f00;">No support</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td>52.0</td> </tr> </tbody> </table> </div> <h2 id="See_also">See also</h2> <ul> <li><a href="indexeddb_api/using_indexeddb">Using IndexedDB</a></li> <li>Starting transactions: <a href="idbdatabase" title="Inherits from: EventTarget"><code>IDBDatabase</code></a>
</li> <li>Using transactions: <a href="idbtransaction" title="Note that as of Firefox 40, IndexedDB transactions have relaxed durability guarantees to increase performance (see bug 1112702.) Previously in a readwrite transaction IDBTransaction.oncomplete was fired only when all data was guaranteed to have been flushed to disk. In Firefox 40+ the complete event is fired after the OS has been told to write the data but potentially before that data has actually been flushed to disk. The complete event may thus be delivered quicker than before, however, there exists a small chance that the entire transaction will be lost if the OS crashes or there is a loss of system power before the data is flushed to disk. Since such catastrophic events are rare most consumers should not need to concern themselves further."><code>IDBTransaction</code></a>
</li> <li>Setting a range of keys: <a href="idbkeyrange" title="A key range can be a single value or a range with upper and lower bounds or endpoints. If the key range has both upper and lower bounds, then it is bounded; if it has no bounds, it is unbounded. A bounded key range can either be open (the endpoints are excluded) or closed (the endpoints are included). To retrieve all keys within a certain range, you can use the following code constructs:"><code>IDBKeyRange</code></a>
</li> <li>Retrieving and making changes to your data: <a href="idbobjectstore" title="This example shows a variety of different uses of object stores, from updating the data structure with IDBObjectStore.createIndex inside an onupgradeneeded function, to adding a new item to our object store with IDBObjectStore.add. For a full working example, see our To-do Notifications app (view example live.)"><code>IDBObjectStore</code></a>
</li> <li>Using cursors: <a href="idbcursor" title="The IDBCursor interface of the IndexedDB API represents a cursor for traversing or iterating over multiple records in a database."><code>IDBCursor</code></a>
</li> <li>Reference example: <a href="https://github.com/mdn/to-do-notifications/tree/gh-pages" class="external">To-do Notifications</a> (<a href="http://mdn.github.io/to-do-notifications/" class="external">view example live</a>.)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/IDBKeyRange$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/IDBKeyRange" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/IDBKeyRange</a>
  </p>
</div>

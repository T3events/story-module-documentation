<h1>WorkerNavigator.sendBeacon</h1><div class="notice experimental"> <p> <strong>This is an experimental technology</strong><br>Because this technology's specification has not stabilized, check the <a href="#Browser_compatibility">compatibility table</a> for usage in various browsers. Also note that the syntax and behavior of an experimental technology is subject to change in future versions of browsers as the specification changes.</p> </div> <p>The <code><strong>NavigatorWorker.sendBeacon()</strong></code> method can be used to asynchronously transfer a small amount of data over <a title="HTTP: HTTP (HyperText Transfer Protocol) is the basic protocol that enables file transfer on the Web. HTTP is textual (all communication is done in plain text) and stateless (no communication is aware of previous communications)." href="https://developer.mozilla.org/en-US/docs/Glossary/HTTP" class="glossaryLink">HTTP</a> from a <a title="The Worker interface of the Web Workers API represents a background task that can be easily created and can send messages back to its creator. Creating a worker is as simple as calling the Worker()Â constructor and specifying a script to be run in the worker thread." href="../worker"><code>worker</code></a> to a web server. This is functionally equivalent to the <a title="The navigator.sendBeacon() method can be used to asynchronously transfer a small amount of data over HTTP to a web server." href="../navigator/sendbeacon"><code>Navigator.sendBeacon()</code></a> method; see that article for additional details on what this method can be used for and why.</p> <h2 id="Syntax">Syntax</h2> <pre class="syntaxbox">self.navigator.sendBeacon(<em>url</em>, <em>data</em>);
</pre> <h3 id="Parameters">Parameters</h3> <dl> <dt><code>url</code></dt> <dd>The <code>url</code> parameter indicates the resolved URL to which the <code>data</code> is to be transmitted.</dd> <dt><code>data</code></dt> <dd>The <code>data</code> parameter is a <a title="ArrayBufferView is a helper type representing any of the following JavaScript TypedArray types:" href="../arraybufferview"><code>ArrayBufferView</code></a>, <a title="A Blob object represents a file-like object of immutable, raw data. Blobs represent data that isn't necessarily in a JavaScript-native format. The File interface is based on Blob, inheriting blob functionality and expanding it to support files on the user's system." href="../blob"><code>Blob</code></a>, <a title="DOMString is a UTF-16 String. As JavaScript already uses such strings, DOMString is mapped directly to a String." href="../domstring"><code>DOMString</code></a>, or <a title='The FormData interface provides a way to easily construct a set of key/value pairs representing form fields and their values, which can then be easily sent using the XMLHttpRequest.send() method. It uses the same format a form would use if the encoding type were set to "multipart/form-data".' href="../formdata"><code>FormData</code></a> object containing the data to be transmitted.</dd> </dl> <h3 id="Return_value">Return value</h3> <p>The <code><strong>sendBeacon()</strong></code> method returns <code>true</code> if the user agent can successfully queue the <code>data</code> for transfer, Otherwise it returns <code>false</code>.</p> <h2 id="Example">Example</h2> <p>The following example has two parts: first, the <em>main</em> thread creates a worker and sends it the message to forward to the server.</p> <pre data-language="js">// Create a worker
var myWorker = new Worker('worker-beacon.js');

// Send the worker a message and set up a response callback

myWorker.postMessage('Send beacon!');

myWorker.onmessage = function(e) {
  var msg = e.data;
  console.log('Worker beacon reply: ' + msg);
};
</pre> <p>In the following code snippet, we see the worker's <a title="The onmessage property of the Worker interface represents an EventHandler, that is a function to be called when the message event occurs. These events are of type MessageEvent and will be called when the worker's parent receives a message (i.e. from the DedicatedWorkerGlobalScope.postMessage method." href="../worker/onmessage"><code>Worker.onmessage</code></a> event handler. The text passed as the message data when calling <a title="The postMessage() method of the Worker interface sends a message to the worker's inner scope. This accepts a single parameter, which is the data to send to the worker. The data may be any value or JavaScript object handled by the structured clone algorithm, which includes cyclical references." href="../worker/postmessage"><code>Worker.postMessage()</code></a> is accepted by the event handler and sent to the server by calling <code>sendBeacon()</code>.</p> <pre data-language="js">// Worker's onmessage handler

onmessage = function(ev) {
  var msg = ev.data;
  self.navigator.sendBeacon('http://www.example.org/', msg);
}
</pre> <h2 id="Specifications">Specifications</h2> <table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a lang="en" hreflang="en" href="https://w3c.github.io/beacon/#sec-sendBeacon-method" class="external">Beacon<br><small lang="en-US">The definition of 'sendBeacon()' in that specification.</small></a></td> <td><span class="spec-ED">Editor's Draft</span></td> <td>Initial definition</td> </tr> </tbody> </table> <h2 id="Browser_compatibility">Browser compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari</th> </tr> <tr> <td>Basic support</td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> </tr> </tbody> </table> </div> <div id="compat-mobile"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android</th> <th>Android Webview</th> <th>Firefox Mobile (Gecko)</th> <th>Firefox OS</th> <th>IE Mobile</th> <th>Opera Mobile</th> <th>Safari Mobile</th> <th>Chrome for Android</th> </tr> <tr> <td>Basic support</td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> </tr> </tbody> </table> </div> <h2 id="See_also">See also</h2> <ul> <li><a title="The navigator.sendBeacon() method can be used to asynchronously transfer a small amount of data over HTTP to a web server." href="../navigator/sendbeacon"><code>navigator.sendBeacon()</code></a></li> <li><a href="https://developer.mozilla.org/Web/API/Beacon_API">Beacon API (Overview)</a></li> <li><a href="https://developer.mozilla.org/Web/API/Beacon_API/Using_the_Beacon_API">Using the Beacon API</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/WorkerNavigator/sendBeacon$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/WorkerNavigator/sendBeacon" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/WorkerNavigator/sendBeacon</a>
  </p>
</div>

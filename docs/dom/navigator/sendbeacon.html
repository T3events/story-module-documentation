<h1>navigator.sendBeacon</h1><div><div class="notice experimental"> <p> <strong>This is an experimental technology</strong><br>Because this technology's specification has not stabilized, check the <a href="#Browser_compatibility">compatibility table</a> for usage in various browsers. Also note that the syntax and behavior of an experimental technology is subject to change in future versions of browsers as the specification changes.</p> </div></div> <p>The <code><strong>navigator.sendBeacon()</strong></code> method can be used to asynchronously transfer a small amount of data over <a title="HTTP: HTTP (HyperText Transfer Protocol) is the basic protocol that enables file transfer on the Web. HTTP is textual (all communication is done in plain text) and stateless (no communication is aware of previous communications)." href="https://developer.mozilla.org/en-US/docs/Glossary/HTTP" class="glossaryLink">HTTP</a> to a web server.</p> <h2 id="Syntax">Syntax</h2> <pre class="syntaxbox">navigator.sendBeacon(<em>url</em>, <em>data</em>);
</pre> <h3 id="Parameters">Parameters</h3> <dl> <dt><code>url</code></dt> <dd>The <code>url</code> parameter indicates the resolved URL to which the <code>data</code> is to be transmitted.</dd> </dl> <dl> <dt><code>data</code></dt> <dd>The <code>data</code> parameter is a <a title="ArrayBufferView is a helper type representing any of the following JavaScript TypedArray types:" href="../arraybufferview"><code>ArrayBufferView</code></a>, <a title="A Blob object represents a file-like object of immutable, raw data. Blobs represent data that isn't necessarily in a JavaScript-native format. The File interface is based on Blob, inheriting blob functionality and expanding it to support files on the user's system." href="../blob"><code>Blob</code></a>, <a title="DOMString is a UTF-16 String. As JavaScript already uses such strings, DOMString is mapped directly to a String." href="../domstring"><code>DOMString</code></a>, or <a title='The FormData interface provides a way to easily construct a set of key/value pairs representing form fields and their values, which can then be easily sent using the XMLHttpRequest.send() method. It uses the same format a form would use if the encoding type were set to "multipart/form-data".' href="../formdata"><code>FormData</code></a> object containing the data to be transmitted.</dd> </dl> <h3 id="Return_values">Return values</h3> <p>The <code><strong>sendBeacon()</strong></code> method returns <code>true</code> if the user agent is able to successfully queue the <code>data</code> for transfer, Otherwise it returns <code>false</code>.</p> <h2 id="Description">Description</h2> <p>This method addresses the needs of analytics and diagnostics code that typically attempts to send data to a web server prior to the unloading of the document. Sending the data any sooner may result in a missed opportunity to gather data. However, ensuring that the data has been sent during the unloading of a document is something that has traditionally been difficult for developers, because user agents typically ignore asynchronous <a title="XMLHttpRequest is anÂ API that provides client functionality for transferring data between a client and a server. It provides an easy way to retrieve data from a URL without having to do a full page refresh. This enables a Web page to update just a part of the page without disrupting what the user is doing." href="../xmlhttprequest"><code>XMLHttpRequest</code></a>s made in an <code><a title="/en-US/docs/Web/Events/unload" href="https://developer.mozilla.org/en-US/docs/Web/Events/unload">unload</a></code> handler.</p> <p>To solve this problem, analytics and diagnostics code have historically made a synchronous <code>XMLHttpRequest</code> call in an <code>unload</code> or <code><a title="/en-US/docs/Web/Events/beforeunload" href="https://developer.mozilla.org/en-US/docs/Web/Events/beforeunload">beforeunload</a></code> event handler to submit the data. The synchronous <code>XMLHttpRequest</code> blocks the process of unloading the document, which in turn causes the next navigation appear to be slower. There is nothing the next page can do to avoid this perception of poor page load performance, and the result is that the user perceives that the new web page is slow to load, even though the true issue is with the previous page.</p> <p>There are other workaround techniques which have been used to ensure that this kind of data is submitted. One such technique is to delay the unload in order to submit data by creating an <a title="The HTML &lt;img&gt; element represents an image in the document." href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img"><code>&lt;img&gt;</code></a> element and setting its <code>src</code> attribute within the unload handler. As most user agents will delay the unload to complete the pending image load, data can be submitted during the unload. Another technique is to create a no-op loop for several seconds within the unload handler to delay the unload and submit data to a server.</p> <p>Not only do these techniques represent poor coding patterns, some of them are unreliable and all of them result in the perception of poor page load performance for the next navigation.</p> <p>The following example shows a theoretical analytics code that attempts to submit data to a server by using a synchronous <code>XMLHttpRequest</code> in an unload handler. This results in the unload of the page to be delayed.</p> <pre data-language="js">window.addEventListener('unload', logData, false);

function logData() {
  var client = new XMLHttpRequest();
  client.open("POST", "/log", false); // third parameter indicates sync xhr
  client.setRequestHeader("Content-Type", "text/plain;charset=UTF-8");
  client.send(analyticsData);
}
</pre> <p>This is where <code><strong>sendBeacon()</strong></code> comes in. By using the <code>sendBeacon()</code> method, the data is transmitted asynchronously to the web server when the User Agent has an opportunity to do so, without delaying the unload or affecting the performance of the next navigation. This solves all of the problems with submission of analytics data: the data is sent reliably, it's sent asynchronously, and it doesn't impact the loading of the next page. In addition, the code is actually simpler to write than any of these other techniques!</p> <p>The following example shows a theoretical analytics code pattern that submits data to a server using the <code>sendBeacon()</code> method.</p> <pre data-language="js">window.addEventListener('unload', logData, false);

function logData() {
  navigator.sendBeacon("/log", analyticsData);
}
</pre> <h2 id="Specifications">Specifications</h2> <table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a lang="en" hreflang="en" href="https://w3c.github.io/beacon/#sec-sendBeacon-method" class="external">Beacon<br><small lang="en-US">The definition of 'sendBeacon()' in that specification.</small></a></td> <td><span class="spec-ED">Editor's Draft</span></td> <td>Initial definition</td> </tr> </tbody> </table> <h2 id="Browser_compatibility">Browser compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Edge</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari</th> </tr> <tr> <td>Basic support</td> <td>39.0</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>
<a title="Released on 2014-07-22." href="https://developer.mozilla.org/en-US/Firefox/Releases/31">31</a> (31)</td> <td><span style="color: #f00;">No support</span></td> <td>26</td> <td><span style="color: #f00;">No support</span></td> </tr> </tbody> </table> </div> <div id="compat-mobile"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android</th> <th>Android Webview</th> <th>Edge</th> <th>Firefox Mobile (Gecko)</th> <th>Firefox OS</th> <th>IE Mobile</th> <th>Opera Mobile</th> <th>Safari Mobile</th> <th>Chrome for Android</th> </tr> <tr> <td>Basic support</td> <td><span style="color: #f00;">No support</span></td> <td>40.0</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>31.0 (31)</td> <td>2.5</td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td>42.0</td> </tr> </tbody> </table> </div> <h2 id="See_also">See also</h2> <ul> <li><a title="The Navigator interface represents the state and the identity of the user agent. It allows scripts to query it and to register themselves to carry on some activities." href="../navigator"><code>navigator</code></a></li> <li>
<a title="The NavigatorWorker.sendBeacon() method can be used to asynchronously transfer a small amount of data over HTTP from a worker to a web server. This is functionally equivalent to the Navigator.sendBeacon() method; see that article for additional details on what this method can be used for and why." href="../workernavigator/sendbeacon"><code>WorkerNavigator.sendBeacon()</code></a> (Using <code>sendBeacon()</code> in workers)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/navigator/sendBeacon$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/navigator/sendBeacon" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/navigator/sendBeacon</a>
  </p>
</div>

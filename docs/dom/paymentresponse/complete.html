<h1>PaymentResponse.complete</h1><div class="notice experimental"> <p> <strong>This is an experimental technology</strong><br>Because this technology's specification has not stabilized, check the <a href="#Browser_compatibility">compatibility table</a> for usage in various browsers. Also note that the syntax and behavior of an experimental technology is subject to change in future versions of browsers as the specification changes.</p> </div> <p>The <strong><code>PaymentRequest.complete()</code></strong> method of the <a href="https://github.com/google/Chrome.Docs/blob/master/m53/PaymentRequest_API.md">PaymentRequest API</a> notifies the user agent that the user interaction is over, and causes any remaining user interface to be closed. This method must be called after the user accepts the payment request and the <a title="The Promise object is used for asynchronous computations. A Promise represents a value which may be available now, or in the future, or never." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> returned by the <a title="The PaymentRequest.show() method of the PaymentRequest interface causes the user agent to begin the user interaction for the payment request." href="../paymentrequest/show"><code>PaymentRequest.show()</code></a> method is resolved.</p> <h2 id="Syntax">Syntax</h2> <pre class="syntaxbox">PaymentRequest.complete([result])
   .then(function() { ... } )
   .catch( error =&gt; { ... } )</pre> <h3 id="Returns">Returns</h3> <p>A <a title="The Promise object is used for asynchronous computations. A Promise represents a value which may be available now, or in the future, or never." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a>.</p> <h3 id="Parameters">Parameters</h3> <dl> <dt>result</dt> <dd>A string with one of the following values: <ul> <li>
<code>"success"</code>: Indicates the payment was successfully processed. The user agent may or may not indicate success to the user.</li> <li>
<code>"fail"</code>: Indicates the payment was not successfully processed. The user agent may or may not indicate failure to the user.</li> <li>
<code>""</code> (empty string): The user agent will show nothing to the user. This is the default.</li> </ul> <div class="note"> <p>Note: The value passed to this method must include the quotation marks.</p> </div> </dd> </dl> <h2 id="Examples">Examples</h2> <p>The following example sends payment information to a secure server using the Fetch API. It calls <code>complete()</code> with an answer appropriate to the status in the response.</p> <pre>// Initialization of PaymentRequest arguments are excerpted for the 
//   sake of brevity.
var payment = new PaymentRequest(supportedInstruments, details, options);

payment.show().then(function(paymentResponse) {
  var fetchOptions = {
    method: 'POST',
    credentials: include,
    body: JSON.stringify(paymentResponse)
  };
  var serverPaymentRequest = new Request('secure/payment/endpoint');
  fetch(serverPaymentRequest, fetchOptions).then( response =&gt; {
    if (response.status &lt; 400) {
      paymentResponse.complete("success");
    } else {
      paymentResponse.complete("fail");
    };
  }).catch( reason =&gt; {
    paymentResponse.complete("fail");
  });
}).catch(function(err) {
  console.error("Uh oh, something bad happened", err.message);
});</pre> <h2 id="Specifications">Specifications</h2> <table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a lang="en" hreflang="en" href="https://www.w3.org/TR/payment-request/#paymentresponse-interface" class="external">Payment Request API<br><small lang="en-US">The definition of 'PaymentResponse' in that specification.</small></a></td> <td><span class="spec-WD">Working Draft</span></td> <td>Initial definition.</td> </tr> </tbody> </table> <h2 id="Browser_Compatibility">Browser Compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari (WebKit)</th> </tr> <tr> <td>Basic support</td> <td> <p>53.0</p> </td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> </tr> </tbody> </table> </div> <div id="compat-mobile"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android</th> <th>Android Webview</th> <th>Firefox Mobile (Gecko)</th> <th>Firefox OS</th> <th>IE Mobile</th> <th>Opera Mobile</th> <th>Safari Mobile</th> <th>Chrome for Android</th> </tr> <tr> <td>Basic support</td> <td><span style="color: #f00;">No support</span></td> <td>53.0</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td>53.0</td> </tr> </tbody> </table> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/PaymentResponse/complete$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/PaymentResponse/complete" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/PaymentResponse/complete</a>
  </p>
</div>

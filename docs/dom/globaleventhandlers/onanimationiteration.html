<h1>GlobalEventHandlers.onanimationiteration</h1><div class="overheadIndicator draft"> <p><strong>Draft</strong><br> This page is not complete.</p> </div> <p>An event handler for the <code><a title="/en-US/docs/Web/Events/animationiteration" href="https://developer.mozilla.org/en-US/docs/Web/Events/animationiteration">animationiteration</a></code> event. This event is sent when a <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Animations">CSS Animation</a> reaches the end of an iteration. An iteration ends when a single pass through the sequence of animation instructions is completed by executing the last animation step.</p> <h2 id="Syntax">Syntax</h2> <pre class="syntaxbox">var <em>animIterationHandler</em> = <em>target</em>.onanimationiteration;

<em>target</em>.onanimationiteration = <em><a title="The Function constructor creates a new Function object. In JavaScript every function is actually a Function object." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function">Function</a></em>
</pre> <h3 id="Value">Value</h3> <p>A <a title="The Function constructor creates a new Function object. In JavaScript every function is actually a Function object." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function"><code>Function</code></a> to be called when an <code><a title="/en-US/docs/Web/Events/animationiteration" href="https://developer.mozilla.org/en-US/docs/Web/Events/animationiteration">animationiteration</a></code> event occurs indicating that a CSS animation has reached the end of an iteration while running on the <em><code>target</code></em>, where the target object is an HTML element (<a title="The HTMLElement interface represents any HTML element. Some elements directly implement this interface, others implement it via an interface that inherits it." href="../htmlelement"><code>HTMLElement</code></a>), document (<a title="The Document interface represents any web page loaded in the browser and serves as an entry point into the web page's content, which is the DOM tree. The DOM tree includes elements such as &lt;body&gt; and &lt;table&gt;, among many others. It provides functionality global to the document, like how to obtain the page's URL and create new elements in the document." href="../document"><code>Document</code></a>), or window (<a title="The window object represents a window containing a DOM document; the document property points to the DOM document loaded in that window." href="../window"><code>Window</code></a>). The function receives as input a single parameter: an <a title="The AnimationEvent interface represents events providing information related to animations." href="../animationevent"><code>AnimationEvent</code></a> object describing the event which occurred.</p> <h2 name="Example" id="Example">Example</h2> <p>Let's create an animation which automatically pauses at the end of each iteration, allowing the user to choose whether or not to start the next iteration. Much of this code is the same as in other examples of animation events, so it may look familiar.</p>  <h3 id="CSS_content">CSS content</h3>  <p>Leaving out some bits of the CSS that don't matter for the discussion here, let's take a look at the styles for the box that we're animating. First is the box itself. We set its size, position, color, and layout. Note that there's nothing there about animation. That's because we don't want the box to start animating right away. We'll add the <a title="The animation CSS property is a shorthand property for animation-name, animation-duration, animation-timing-function, animation-delay, animation-iteration-count, animation-direction, animation-fill-mode and animation-play-state." href="https://developer.mozilla.org/en-US/docs/Web/CSS/animation"><code>animation</code></a> style later to start animating the box.</p> <pre data-language="css">#box {
  width: var(--boxwidth);
  height: var(--boxwidth);
  left: 0;
  top: 0;
  border: 1px solid #7788FF;
  margin: 0;
  position: relative;
  background-color: #2233FF;
  display: flex;
  justify-content: center;
  animation: 2s ease-in-out 0s infinite alternate both paused slideBox;
} 
 
</pre> <p>The animation's keyframes are defined next; they describe an animation which causes the box to migrate from the top-left corner of the container to the bottom-right corner.</p> <pre data-language="css">@keyframes slideBox {
  from {
    left:0;
    top:0;
  }
  to {
    left:calc(100% - var(--boxwidth));
    top:calc(100% - var(--boxwidth))
  }
}
</pre> <h3 id="JavaScript_content">JavaScript content</h3> <p>Some JavaScript code will need to be written to handle the click on the button to start the next iteration. Let's have a look.</p> <pre data-language="js">let box = document.getElementById("box");
let iterationCounter = 0;

box.onanimationiteration = function(event) {
  box.style.animationPlayState = "paused";
  document.getElementById("play").innerHTML = "Start Iteration #" + (iterationCounter+1);
};
</pre> <p>This sets up two global variables: <code>box</code>, which references the <code>"box"</code> element that we're animating, and <code>iterationCounter</code>, which is initially zero, which indicates how many iterations of the animation have occurred.</p> <p>The onanimationiteration event handler is then set up. It simply sets the box's <a title="The animation-play-state CSS property determines whether an animation is running or paused. This can be queried to determine whether or not the animation is currently running. In addition, its value can be set to pause and resume playback of an animation." href="https://developer.mozilla.org/en-US/docs/Web/CSS/animation-play-state"><code>animation-play-state</code></a> to "paused", then updates the text displayed in the button to indicate that clicking the button will start playing the next iteration of theanimation.</p> <p>Finally, we set up a handler for a click on the button that runs the animation:</p> <pre data-language="js">document.getElementById("play").addEventListener("click", function(event) {
  box.style.animationPlayState = "running";
  iterationCounter++;
}, false);</pre> <p>This sets the box element's <a title="The animation-play-state CSS property determines whether an animation is running or paused. This can be queried to determine whether or not the animation is currently running. In addition, its value can be set to pause and resume playback of an animation." href="https://developer.mozilla.org/en-US/docs/Web/CSS/animation-play-state"><code>animation-play-state</code></a> to "running" and increments the iteration counter. That's all there is to it!</p> <h3 id="Result">Result</h3> <p>Assembled together, you get this:</p> <p><iframe width="500" id="frame_Example" frameborder="0" src="https://mdn.mozillademos.org/en-US/docs/Web/API/GlobalEventHandlers/onanimationiteration%24samples/Example?revision=1164462" height="400" class="live-sample-frame sample-code-frame"></iframe></p> <p>Each time the box reaches the opposing corner, it stops, with the button reflecting which iteration number is up next, until you click the button to run the next iteration.</p> <h2 id="Specification">Specification</h2> <table class="spectable standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a hreflang="en" class="external" lang="en" href="https://drafts.csswg.org/css-animations/#eventdef-animationevent-animationiteration">CSS Animations<br><small lang="en-US">The definition of 'onanimationiteration' in that specification.</small></a></td> <td><span class="spec-WD">Working Draft</span></td> <td> </td> </tr> </tbody> </table> <h2 id="Browser_compatibility">Browser compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Firefox (Gecko)</th> <th>Microsoft Edge</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari (WebKit)</th> </tr> <tr> <td>Basic support</td> <td>
<span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span> <span title="prefix" class="inlineIndicator prefixBox prefixBoxInline"><a title="The name of this feature is prefixed with '-webkit' as this browser considers it experimental" href="https://developer.mozilla.org/en-US/docs/Web/Guide/Prefixes">-webkit</a></span><br> <span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span> (unprefixed)</td> <td>
<a title="Released on 2017-01-24." href="https://developer.mozilla.org/en-US/Firefox/Releases/51">51</a> (51)</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> </tr> </tbody> </table> </div> <div id="compat-mobile"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android</th> <th>Android Webview</th> <th>Firefox Mobile (Gecko)</th> <th>Firefox OS</th> <th>IE Mobile</th> <th>Opera Mobile</th> <th>Safari Mobile</th> <th>Chrome for Android</th> </tr> <tr> <td>Basic support</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td>
<span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span> <span title="prefix" class="inlineIndicator prefixBox prefixBoxInline"><a title="The name of this feature is prefixed with '-webkit' as this browser considers it experimental" href="https://developer.mozilla.org/en-US/docs/Web/Guide/Prefixes">-webkit</a></span><br> ​​​​​​​<span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span> (unprefixed)</td> <td>51.0 (51)</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td>
<span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span> <span title="prefix" class="inlineIndicator prefixBox prefixBoxInline"><a title="The name of this feature is prefixed with '-webkit' as this browser considers it experimental" href="https://developer.mozilla.org/en-US/docs/Web/Guide/Prefixes">-webkit</a></span><br> ​​​​​​​<span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span> (unprefixed)</td> </tr> </tbody> </table> </div> <h2 id="See_also">See also</h2> <ul> <li>The <code><a title="/en-US/docs/Web/Events/animationiteration" href="https://developer.mozilla.org/en-US/docs/Web/Events/animationiteration">animationiteration</a></code> event this event handler is triggered by.</li> <li><a title="The AnimationEvent interface represents events providing information related to animations." href="../animationevent"><code>AnimationEvent</code></a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onanimationiteration$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onanimationiteration" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onanimationiteration</a>
  </p>
</div>

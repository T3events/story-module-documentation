<h1>GlobalEventHandlers.onerror</h1> <p>An <a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Event_handlers">event handler</a> for the <code><a href="https://developer.mozilla.org/en-US/docs/Web/Events/error">error</a></code> event. Error events are fired at various targets for different kinds of errors:</p> <ul> <li>When a <strong>JavaScript runtime error</strong> (including syntax errors and exceptions thrown within handlers) occurs, an <code><a href="https://developer.mozilla.org/en-US/docs/Web/Events/error">error</a></code> event using interface <a href="../errorevent" title="The ErrorEvent interface represents events providing information related to errors in scripts or in files."><code>ErrorEvent</code></a> is fired at <a href="../window" title="The window object represents a window containing a DOM document; the document property points to the DOM document loaded in that window."><code>window</code></a> and <code>window.onerror()</code> is invoked (as well as handlers attached by <a href="../eventtarget/addeventlistener" title="The EventTarget.addEventListener() method registers the specified listener on the EventTarget it's called on. The event target may be an Element in a document, the Document itself, a Window, or any other object that supports events (such as XMLHttpRequest)."><code>window.addEventListener</code></a> (not only capturing)).</li> <li>When a resource (such as an <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img" title="The HTML &lt;img&gt; element represents an image in the document."><code>&lt;img&gt;</code></a> or <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script" title="The HTML &lt;script&gt; element is used to embed or reference an executable script."><code>&lt;script&gt;</code></a>) <strong>fails to load</strong>, an <code><a href="https://developer.mozilla.org/en-US/docs/Web/Events/error">error</a></code> event using interface <a href="../event" title="The Event interface represents any event which takes place in the DOM; some are user-generated (such as mouse or keyboard events), while others are generated by APIs (such as events that indicate an animation has finished running, a video has been paused, and so forth). There are many types of event, some of which use are other interfaces based on the main Event interface. Event itself contains the properties and methods which are common to all events."><code>Event</code></a> is fired at the element, that initiated the load, and the <code>onerror()</code> handler on the element is invoked. These error events do not bubble up to window, but (at least in Firefox) can be handled with a single capturing <a href="../eventtarget/addeventlistener" title="The EventTarget.addEventListener() method registers the specified listener on the EventTarget it's called on. The event target may be an Element in a document, the Document itself, a Window, or any other object that supports events (such as XMLHttpRequest)."><code>window.addEventListener</code></a>.</li> </ul> <p>Installing a global <code>error</code> event handler is useful for automated collection of error reports.</p> <h2 id="Syntax">Syntax</h2> <p>For historical reasons, different arguments are passed to <code>window.onerror</code> and <code>element.onerror</code> handlers (as well as on error-type <a href="../eventtarget/addeventlistener" title="The EventTarget.addEventListener() method registers the specified listener on the EventTarget it's called on. The event target may be an Element in a document, the Document itself, a Window, or any other object that supports events (such as XMLHttpRequest)."><code>window.addEventListener</code></a> handlers).</p> <h3 id="window.onerror">window.onerror</h3> <pre data-language="js">window.onerror = function(messageOrEvent, source, lineno, colno, error) { ... }
</pre> <p>Function parameters:</p> <ul> <li>
<code>message</code>: error message (string or event object). Available as <code>event</code> (sic!) in HTML <code>onerror=""</code> handler and also as an event object when dispatching an <a href="../event">Event</a> to <code>window</code> in which case the other arguments will not be supplied (as opposed to <a href="../errorevent">ErrorEvent</a> which does cause the full range of arguments to be supplied to <code>window.onerror</code> whereas the single error event object is supplied to<code> window.addEventListener('error')</code> handlers) .</li> <li>
<code>source</code>: URL of the script where the error was raised (string)</li> <li>
<code>lineno</code>: Line number where error was raised (number)</li> <li>
<code>colno</code>: Column number for the line where the error occurred (number) </li> <li>
<code>error</code>: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error">Error Object</a> (object) </li> </ul> <p>When the function returns <code>true</code>, this prevents the firing of the default event handler.</p> <h3 id="element.onerror_(and_window.addEventListener('error'))">element.onerror (and <code>window.addEventListener('error')</code>)</h3> <pre data-language="js">element.onerror = function(event) { ... }
</pre> <p><code>element.onerror</code> accepts a function with a single argument of type <a href="../event" title="The Event interface represents any event which takes place in the DOM; some are user-generated (such as mouse or keyboard events), while others are generated by APIs (such as events that indicate an animation has finished running, a video has been paused, and so forth). There are many types of event, some of which use are other interfaces based on the main Event interface. Event itself contains the properties and methods which are common to all events."><code>Event</code></a>.</p> <h2 id="Notes">Notes</h2> <p>When a syntax<strong>(?)</strong> error occurs in a script, loaded from a <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy">different origin</a>, the details of the syntax error are not reported to prevent leaking information (see <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=363897" title="FIXED: Don't give onerror handlers detailed information about syntax errors in off-site &quot;scripts&quot;">bug 363897</a>). Instead the error reported is simply <code><strong>"Script error."</strong></code> This behavior can be overriden in some browsers using the <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script#attr-crossorigin">crossorigin</a></code></code> attribute on <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script" title="The HTML &lt;script&gt; element is used to embed or reference an executable script."><code>&lt;script&gt;</code></a> and having the server send the appropriate <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS">CORS</a> HTTP response headers. A workaround is to isolate "Script error." and handle it knowing that the error detail is only viewable in the browser console and not accessible via JavaScript.</p> <pre data-language="js">window.onerror = function (msg, url, lineNo, columnNo, error) {
    var string = msg.toLowerCase();
    var substring = "script error";
    if (string.indexOf(substring) &gt; -1){
        alert('Script Error: See Browser Console for Detail');
    } else {
        var message = [
            'Message: ' + msg,
            'URL: ' + url,
            'Line: ' + lineNo,
            'Column: ' + columnNo,
            'Error object: ' + JSON.stringify(error)
        ].join(' - ');

        alert(message);
    }

    return false;
};</pre> <p>When using the inline HTML markup (<code>&lt;body onerror="alert('an error occurred')"&gt;</code>), the HTML specification requires arguments passed to <code>onerror</code> to be named <code>event</code>, <code>source</code>, <code>lineno</code>, <code>colno</code>, <code>error</code>. In browsers that have not implemented this requirement, they can still be obtained via <code>arguments[0]</code> through <code>arguments[2]</code>.</p> <h2 id="Specifications">Specifications</h2> <table class="spectable standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a href="https://html.spec.whatwg.org/multipage/webappapis.html#handler-onerror" class="external" lang="en" hreflang="en">WHATWG HTML Living Standard<br><small lang="en-US">The definition of 'onerror' in that specification.</small></a></td> <td><span class="spec-Living">Living Standard</span></td> <td> </td> </tr> </tbody> </table> <h2 id="Browser_compatibility">Browser compatibility</h2> <p>Before Firefox 14 when a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script" title="The HTML &lt;script&gt; element is used to embed or reference an executable script."><code>&lt;script&gt;</code></a> failed to load, <code>window.onerror</code> was invoked with message <strong>"Error loading script"</strong>. This was fixed in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=737087" title="FIXED: Error event fired on &lt;script&gt; load failure is not per spec/other browsers">bug 737087</a>, now <code>scriptElement.onerror</code> is invoked instead in such cases.</p> <p>Since Firefox 31, the last 2 arguments (<code>colno</code> and <code>error</code>) were added, meaning you can access the stack trace of a script error from <code>window.onerror</code> via the provided <code>Error</code> object (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=355430" title="FIXED: Stack information of uncaught Error object should be available in window.onerror">bug 355430</a>.)</p> <h2 id="See_also">See also</h2> <ul> <li><a href="http://blog.getsentry.com/2016/01/04/client-javascript-reporting-window-onerror.html">Capture and report JavaScript errors with window.onerror (blog.getsentry.com, 2016)</a></li> <li><a href="https://danlimerick.wordpress.com/2014/01/18/how-to-catch-javascript-errors-with-window-onerror-even-on-chrome-and-firefox/">How to catch JavaScript Errors with window.onerror (even on Chrome and Firefox) (danlimerick.wordpress.com, 2014)</a></li> </ul> <h2 id="Browser_Compatibility">Browser Compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari (WebKit)</th> </tr> <tr> <td>Basic support</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> </tr> </tbody> </table> </div> <div id="compat-mobile"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android</th> <th>Android Webview</th> <th>Chrome for Android</th> <th>Firefox Mobile (Gecko)</th> <th>Firefox OS</th> <th>IE Mobile</th> <th>Opera Mobile</th> <th>Safari Mobile</th> </tr> <tr> <td>Basic support</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> </tr> </tbody> </table> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onerror$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onerror" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onerror</a>
  </p>
</div>

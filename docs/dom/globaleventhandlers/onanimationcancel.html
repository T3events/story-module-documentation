<h1>GlobalEventHandlers.onanimationcancel</h1> <p>An event handler for the <code><a title="/en-US/docs/Web/Events/animationcancel" href="https://developer.mozilla.org/en-US/docs/Web/Events/animationcancel">animationcancel</a></code> event. This event is sent when a <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Animations">CSS Animation</a> unexpectedly aborts (in other words, any time it stops running without sending an <code><a title="/en-US/docs/Web/Events/animationend" href="https://developer.mozilla.org/en-US/docs/Web/Events/animationend">animationend</a></code> event), such as when the <a title="The animation-name CSS property specifies a list of animations that should be applied to the selected element. Each name indicates a @keyframes at-rule that defines the property values for the animation sequence." href="https://developer.mozilla.org/en-US/docs/Web/CSS/animation-name"><code>animation-name</code></a> is changed such that the animation is removed, or when the animating node is hidden—either directly or because any of its containing nodes are hidden)—using CSS.</p> <h2 id="Syntax">Syntax</h2> <pre class="syntaxbox">var <em>animCancelHandler</em> = <em>target</em>.onanimationcancel;

<em>target</em>.onanimationcancel = <em><a title="The Function constructor creates a new Function object. In JavaScript every function is actually a Function object." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function">Function</a></em>
</pre> <h3 id="Value">Value</h3> <p>A <a title="The Function constructor creates a new Function object. In JavaScript every function is actually a Function object." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function"><code>Function</code></a> to be called when an <code><a title="/en-US/docs/Web/Events/animationcancel" href="https://developer.mozilla.org/en-US/docs/Web/Events/animationcancel">animationcancel</a></code> event occurs indicating that a CSS animation has begun on the <em><code>target</code></em>, where the target object is an HTML element (<a title="The HTMLElement interface represents any HTML element. Some elements directly implement this interface, others implement it via an interface that inherits it." href="../htmlelement"><code>HTMLElement</code></a>), document (<a title="The Document interface represents any web page loaded in the browser and serves as an entry point into the web page's content, which is the DOM tree. The DOM tree includes elements such as &lt;body&gt; and &lt;table&gt;, among many others. It provides functionality global to the document, like how to obtain the page's URL and create new elements in the document." href="../document"><code>Document</code></a>), or window (<a title="The window object represents a window containing a DOM document; the document property points to the DOM document loaded in that window." href="../window"><code>Window</code></a>). The function receives as input a single parameter: an <a title="The AnimationEvent interface represents events providing information related to animations." href="../animationevent"><code>AnimationEvent</code></a> object describing the event which occurred.</p> <h2 id="Example" name="Example">Example</h2> <h3 id="HTML_content">HTML content</h3> <pre data-language="html">&lt;div class="main"&gt;
  &lt;div id="box" onanimationcancel="handleCancelEvent(event);"&gt;
    &lt;div id="text"&gt;Box&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;div class="button" id="toggleBox"&gt;
  Hide the Box
&lt;/div&gt;

&lt;pre id="log"&gt;&lt;/pre&gt;</pre> <h3 id="CSS_content">CSS content</h3>  <p>Leaving out some bits of the CSS that don't matter for the discussion here, let's take a look at the styles for the box that we're animating. First is the box itself, with all its properties, including <a title="The animation CSS property is a shorthand property for animation-name, animation-duration, animation-timing-function, animation-delay, animation-iteration-count, animation-direction, animation-fill-mode and animation-play-state." href="https://developer.mozilla.org/en-US/docs/Web/CSS/animation"><code>animation</code></a>, defined. We go ahead and describe the animation in-place here because the animation is intended to begin as soon as the page loads, rather than based on an event.</p> <pre data-language="css">#box {
  width: var(--boxwidth);
  height: var(--boxwidth);
  left: 0;
  top: 0;
  border: 1px solid #7788FF;
  margin: 0;
  position: relative;
  background-color: #2233FF;
  display: flex;
  justify-content: center;
  animation: 5s ease-in-out 0s infinite alternate both slideBox;
} 
 
</pre> <p>The animation's keyframes are described next, plotting a course from the top-left corner of the content box to the bottom-right corner.</p> <pre data-language="css">@keyframes slideBox {
  from {
    left:0;
    top:0;
  }
  to {
    left:calc(100% - var(--boxwidth));
    top:calc(100% - var(--boxwidth))
  }
}
</pre> <p>Since the animation is described as taking place an infinite number of times, alternating direction each time, the box will glide back and forth between the two corners until stopped or the page is closed.</p> <h3 id="JavaScript_content">JavaScript content</h3> <p>Before we get to the animation code, we define a function which logs information to a box on the user's screen. We'll use this to show information about the events we receive. Note the use of <a title="The AnimationEvent.animationName read-only property is a DOMString containing the value of the animation-name CSS property associated with the transition." href="../animationevent/animationname"><code>AnimationEvent.animationName</code></a> and <a title='The AnimationEvent.elapsedTime read-only property is a float giving the amount of time the animation has been running, in seconds, when this event fired, excluding any time the animation was paused. For an "animationstart" event, elapsedTime is 0.0 unless there was a negative value for animation-delay, in which case the event will be fired with elapsedTime containing  (-1 * delay).' href="../animationevent/elapsedtime"><code>AnimationEvent.elapsedTime</code></a> to get information about the event which occurred.</p> <pre data-language="js">function log(msg, event) {
  let logBox = document.getElementById("log");
 
  logBox.innerHTML += msg;
 
  if (event) {
    logBox.innerHTML += " &lt;code&gt;"+ event.animationName +
        "&lt;/code&gt; at time " + event.elapsedTime.toFixed(2) +
        " seconds.";
  }
 
  logBox.innerHTML += "\n";
};
 
 
</pre> <p>Then we set up the <code>handleCancelEvent()</code> function, which is called in response to the <code><a title="/en-US/docs/Web/Events/animationcancel" href="https://developer.mozilla.org/en-US/docs/Web/Events/animationcancel">animationcancel</a></code> event, as set up in the HTML above. All we do here is log information to the console, but you might find other use cases, such as starting a new animation or effect, or terminating some dependent operation.</p> <pre data-language="js">function handleCancelEvent(event) {
  log("Animation canceled", event);
}; 
 
</pre> <p>Then we add a method to handle toggle <a title="The display CSS property specifies the type of rendering box used for an element. In HTML, default display property values are taken from behaviors described in the HTML specifications or from the browser/user default stylesheet. The default value in XML is inline." href="https://developer.mozilla.org/en-US/docs/Web/CSS/display"><code>display</code></a> between <code>"</code><code>flex"</code> and <code>"</code><code>none"</code> and establish it as the handler for a <code><a title="/en-US/docs/Web/Events/click" href="https://developer.mozilla.org/en-US/docs/Web/Events/click">click</a></code> event on the "Hide/Show" the Box button:</p> <pre data-language="js">document.getElementById('toggleBox').addEventListener('click', function() {
  if (box.style.display == "none") {
    box.style.display = "flex";
    document.getElementById("toggleBox").innerHTML = "Hide the box";
  } else {
    box.style.display = "none";
    document.getElementById("toggleBox").innerHTML = "Show the box";
  }
});
</pre> <p>Toggling the box to <code>display: none</code> has the effect of aborting its animation. In browsers that support <code><a title="/en-US/docs/Web/Events/animationcancel" href="https://developer.mozilla.org/en-US/docs/Web/Events/animationcancel">animationcancel</a></code>, the event is fired and this handler is called.</p> <div class="note"> <p>At this time, no major browser supports <code>animationcancel</code>.</p> </div> <h3 id="Result">Result</h3> <p>Assembled together, you get this:</p> <p><iframe width="500" frameborder="0" class="live-sample-frame sample-code-frame" src="https://mdn.mozillademos.org/en-US/docs/Web/API/GlobalEventHandlers/onanimationcancel%24samples/Example?revision=1189777" height="400" id="frame_Example"></iframe></p> <p>If your browser supports <code>animationcancel</code>, hiding the box using the button will cause a message to be displayed about the event.</p> <h2 id="Specification">Specification</h2> <table class="spectable standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a lang="en" hreflang="en" href="https://drafts.csswg.org/css-animations/#eventdef-animationevent-animationcancel" class="external">CSS Animations<br><small lang="en-US">The definition of 'onanimationcancel' in that specification.</small></a></td> <td><span class="spec-WD">Working Draft</span></td> <td> </td> </tr> </tbody> </table> <h2 id="Browser_compatibility">Browser compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Firefox (Gecko)</th> <th>Microsoft Edge</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari (WebKit)</th> </tr> <tr> <td>Basic support</td> <td><span style="color: #f00;">No support</span></td> <td>
<span style="color: #f00;">No support</span><sup>[1]</sup>
</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> </tr> </tbody> </table> </div> <div id="compat-mobile"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android</th> <th>Android Webview</th> <th>Firefox Mobile (Gecko)</th> <th>Firefox OS</th> <th>IE Mobile</th> <th>Opera Mobile</th> <th>Safari Mobile</th> <th>Chrome for Android</th> </tr> <tr> <td>Basic support</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span style="color: #f00;">No support</span></td> <td>
<span style="color: #f00;">No support</span><sup>[1]</sup>
</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span style="color: #f00;">No support</span></td> </tr> </tbody> </table> </div> <p>[1] For details on the status of implementation in Firefox, see <a title="FIXED: Implement animationcancel event." href="https://bugzilla.mozilla.org/show_bug.cgi?id=1302648">bug 1302648</a>.</p> <h2 id="See_also">See also</h2> <ul> <li>The <code><a title="/en-US/docs/Web/Events/animationcancel" href="https://developer.mozilla.org/en-US/docs/Web/Events/animationcancel">animationcancel</a></code> event this event handler is triggered by.</li> <li><a title="The AnimationEvent interface represents events providing information related to animations." href="../animationevent"><code>AnimationEvent</code></a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onanimationcancel$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onanimationcancel" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onanimationcancel</a>
  </p>
</div>

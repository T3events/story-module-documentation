<h1>MediaRecorder</h1> <p>The <strong><code>MediaRecorder</code></strong> interface of the <a href="mediastream_recording_api">MediaStream Recording API</a> provides functionality to easily record media. It is created by the invocation of the <a title="The MediaRecorder() constructor creates a new MediaRecorder object that will record a specified MediaStream." href="mediarecorder/mediarecorder"><code>MediaRecorder()</code></a> constructor.</p> <h2 id="Constructor">Constructor</h2> <dl> <dt><a title="The MediaRecorder() constructor creates a new MediaRecorder object that will record a specified MediaStream." href="mediarecorder/mediarecorder"><code>MediaRecorder.MediaRecorder()</code></a></dt> <dd>Creates a new <code>MediaRecorder</code> object, given a <a title="The MediaStream interface represents a stream of media content. A stream consists of several tracks such as video or audio tracks. Each track is specified as an instance of MediaStreamTrack." href="mediastream"><code>MediaStream</code></a> to record. Options are available to do things like set the container's MIME type (such as <code>"video/webm"</code> or <code>"video/mp4"</code>) and the bit rates of the audio and video tracks or a single overall bit rate.</dd> </dl> <h2 id="Properties">Properties</h2> <dl> <dt>
<a title="The MediaRecorder.mimeType read-only property returns the MIME type that is being used as the recording container when it was created. This is the file format of the file that would result from writing all of the recorded data to disk. Keep in mind, of course, that the file format and the codecs associated with the individual tracks are different things entirely; writing tracks that work just fine in a WebM video into an MP4 wrapper may not result in a file that plays everywhere you want  it to." href="mediarecorder/mimetype"><code>MediaRecorder.mimeType</code></a> <span title="This value may not be changed." class="inlineIndicator readOnly readOnlyInline">Read only </span>
</dt> <dd>Returns the MIME type that was selected as the recording container for the <code>MediaRecorder</code> object when it was created.</dd> <dt>
<a title="The MediaRecorder.state read-only property returns the current state of the current MediaRecorder object." href="mediarecorder/state"><code>MediaRecorder.state</code></a> <span title="This value may not be changed." class="inlineIndicator readOnly readOnlyInline">Read only </span>
</dt> <dd>Returns the current state of the <code>MediaRecorder</code> object (<code>inactive</code>, <code>recording</code>, or <code>paused</code>.)</dd> <dt>
<a title="The MediaRecorder.stream read-only property returns the stream that was passed into the MediaRecorder() constructor when the MediaRecorder was created." href="mediarecorder/stream"><code>MediaRecorder.stream</code></a> <span title="This value may not be changed." class="inlineIndicator readOnly readOnlyInline">Read only </span>
</dt> <dd>Returns the stream that was passed into the constructor when the <code>MediaRecorder</code> was created.</dd> <dt><a title="The ignoreMutedMedia property of the MediaRecorder interface indicates whether the MediaRecorder instance will record input when the input MediaStreamTrack is muted. If this attribute is false, MediaRecorder will record silence for audio and black frames for video. The default is false." href="mediarecorder/ignoremutedmedia"><code>MediaRecorder.ignoreMutedMedia</code></a></dt> <dd>Indicates whether the <code>MediaRecorder</code> instance will record input when the input <a title="The MediaStreamTrack interface represents a single media track within a stream; typically, these are audio or video tracks, but other track types may exist as well." href="mediastreamtrack"><code>MediaStreamTrack</code></a> is muted. If this attribute is <code>false</code>, <code>MediaRecorder</code> will record silence for audio and black frames for video. The default is <code>false</code>.</dd> <dt>
<a title="The videoBitsPerSecond read-only property of the MediaRecorder interface returns the video encoding bit rate in use. This may differ from the bit rate specified in the constructor (if it was provided)" href="mediarecorder/videobitspersecond"><code>MediaRecorder.videoBitsPerSecond</code></a> <span title="This value may not be changed." class="inlineIndicator readOnly readOnlyInline">Read only </span>
</dt> <dd>Returns the video encoding bit rate in use. This may differ from the bit rate specified in the constructor (if it was provided).</dd> <dt>
<a title="The audioBitsPerSecond read-only property of the MediaRecorder interface returns the audio encoding bit rate in use. This may differ from the bit rate specified in the constructor (if it was provided)." href="mediarecorder/audiobitspersecond"><code>MediaRecorder.audioBitsPerSecond</code></a> <span title="This value may not be changed." class="inlineIndicator readOnly readOnlyInline">Read only </span>
</dt> <dd>Returns the audio encoding bit rate in use. This may differ from the bit rate specified in the constructor (if it was provided).</dd> </dl> <h2 id="Methods">Methods</h2> <dl> <dt><a title="The documentation about this has not yet been written; please consider contributing!" href="https://developer.mozilla.org/en-US/docs/Web/API/MediaRecorder/isTypeSupported"><code>MediaRecorder.isTypeSupported()</code></a></dt> <dd> Returns a <a title="The Boolean object is an object wrapper for a boolean value." href="https://developer.mozilla.org/en-US/docs/Web/API/Boolean"><code>Boolean</code></a> value indicating if the given MIME type is supported by the current user agent . </dd> <dt><a title="The Media.pause() method (part of the MediaRecorder API) is used to pause recording of media streams." href="mediarecorder/pause"><code>MediaRecorder.pause()</code></a></dt> <dd>Pauses the recording of media.</dd> <dt><a title="The MediaRecorder.requestData() method (part of the MediaRecorder API) is used to raise a dataavailable event containing a Blob object of the captured media as it was when the method was called." href="mediarecorder/requestdata"><code>MediaRecorder.requestData()</code></a></dt> <dd>Requests a <a title="A Blob object represents a file-like object of immutable, raw data. Blobs represent data that isn't necessarily in a JavaScript-native format. The File interface is based on Blob, inheriting blob functionality and expanding it to support files on the user's system." href="blob"><code>Blob</code></a> containing the saved data received thus far (or since the last time <code>requestData()</code> was called. After calling this method, recording continues, but in a new <code>Blob</code>.</dd> <dt><a title="The MediaRecorder.resume() method (part of the MediaRecorder API) is used to resume media recording when it has been previously paused." href="mediarecorder/resume"><code>MediaRecorder.resume()</code></a></dt> <dd>Resumes recording of media after having been paused.</dd> <dt><a title="The MediaRecorder.start() method (part of the MediaRecorder API) is used to start capturing media into a Blob." href="mediarecorder/start"><code>MediaRecorder.start()</code></a></dt> <dd>Begins recording media; this method can optionally be passed a <code>timeslice</code> argument with a value in milliseconds. If this is specified, the media will be captured in separate chunks of that duration, rather than the default behavior of recording the media in a single large chunk.</dd> <dt><a title="The MediaRecorder.stop() method (part of the MediaRecorder API) is used to stop media capture." href="mediarecorder/stop"><code>MediaRecorder.stop()</code></a></dt> <dd>Stops recording, at which point a <code><a title="/en-US/docs/Web/Events/dataavailable" href="https://developer.mozilla.org/en-US/docs/Web/Events/dataavailable">dataavailable</a></code> event containing the final <code>Blob</code> of saved data is fired. No more recording occurs.</dd> </dl> <h2 id="Event_Handlers">Event Handlers</h2> <dl> <dt><a title="The MediaRecorder.ondataavailable event handler (part of the MediaStream Recording API) handles the dataavailable event, letting you run code in response to Blob data being made available for use." href="mediarecorder/ondataavailable"><code>MediaRecorder.ondataavailable</code></a></dt> <dd>Called to handle the <code><a title="/en-US/docs/Web/Events/dataavailable" href="https://developer.mozilla.org/en-US/docs/Web/Events/dataavailable">dataavailable</a></code> event, which can be used to grab the recorded media (which is made available as a <a title="A Blob object represents a file-like object of immutable, raw data. Blobs represent data that isn't necessarily in a JavaScript-native format. The File interface is based on Blob, inheriting blob functionality and expanding it to support files on the user's system." href="blob"><code>Blob</code></a> object in the event's <code>data</code> attribute.)</dd> <dt><a title="The MediaRecorder.onerror event handler (part of the MediaRecorder API) handles the DOMError event, allowing you to run code in response to fatal errors occurring that prevent media capture." href="mediarecorder/onerror"><code>MediaRecorder.onerror</code></a></dt> <dd>An <a title="A possible way to get notified of Events of a particular type (such as click) for a given object is to specify an event handler using:" href="https://developer.mozilla.org/en-US/docs/Web/API/EventHandler"><code>EventHandler</code></a> called to handle the <code><a title="/en-US/docs/Web/Events/recordingerror" href="https://developer.mozilla.org/en-US/docs/Web/Events/recordingerror">recordingerror</a></code> event, including reporting errors that arise with media recording. These are fatal errors that stop recording.</dd> <dt><a title="The MediaRecorder.onpause event handler (part of the MediaRecorder API) handles the pause event, allowing you to run code in response to the media recording being paused." href="mediarecorder/onpause"><code>MediaRecorder.onpause</code></a></dt> <dd>An <a title="A possible way to get notified of Events of a particular type (such as click) for a given object is to specify an event handler using:" href="https://developer.mozilla.org/en-US/docs/Web/API/EventHandler"><code>EventHandler</code></a> called to handle the <code><a title="/en-US/docs/Web/Events/pause" href="https://developer.mozilla.org/en-US/docs/Web/Events/pause">pause</a></code> event, which occurs when media recording is paused.</dd> <dt><a title="The MediaRecorder.onresume event handler (part of the MediaRecorder API) handles the resume event, allowing you to run code in response to the media recording being resumed after pausing." href="mediarecorder/onresume"><code>MediaRecorder.onresume</code></a></dt> <dd>An <a title="A possible way to get notified of Events of a particular type (such as click) for a given object is to specify an event handler using:" href="https://developer.mozilla.org/en-US/docs/Web/API/EventHandler"><code>EventHandler</code></a> called to handle the <code><a title="/en-US/docs/Web/Events/resume" href="https://developer.mozilla.org/en-US/docs/Web/Events/resume">resume</a></code> event, which occurs when media recording resumes after being paused.</dd> <dt><a title="The MediaRecorder.onstartevent handler (part of the MediaRecorder API) handles the start event, allowing you to run code in response to media recording being started by a MediaRecorder." href="mediarecorder/onstart"><code>MediaRecorder.onstart</code></a></dt> <dd>An <a title="A possible way to get notified of Events of a particular type (such as click) for a given object is to specify an event handler using:" href="https://developer.mozilla.org/en-US/docs/Web/API/EventHandler"><code>EventHandler</code></a> called to handle the <code><a title="/en-US/docs/Web/Events/start" href="https://developer.mozilla.org/en-US/docs/Web/Events/start">start</a></code> event, which occurs when media recording starts.</dd> <dt><a title="The MediaRecorder.onstop event handler (part of the MediaRecorder API) handles the stop event, allowing you to run code in response to media recording via a MediaRecorder being stopped." href="mediarecorder/onstop"><code>MediaRecorder.onstop</code></a></dt> <dd>An <a title="A possible way to get notified of Events of a particular type (such as click) for a given object is to specify an event handler using:" href="https://developer.mozilla.org/en-US/docs/Web/API/EventHandler"><code>EventHandler</code></a> called to handle the <code><a title="/en-US/docs/Web/Events/stop" href="https://developer.mozilla.org/en-US/docs/Web/Events/stop">stop</a></code> event, which occurs when media recording ends, either when the <a title="The MediaStream interface represents a stream of media content. A stream consists of several tracks such as video or audio tracks. Each track is specified as an instance of MediaStreamTrack." href="mediastream"><code>MediaStream</code></a> ends — or after the <a title="The MediaRecorder.stop() method (part of the MediaRecorder API) is used to stop media capture." href="mediarecorder/stop"><code>MediaRecorder.stop()</code></a> method is called.</dd> </dl> <h2 id="Example">Example</h2> <pre>if (navigator.mediaDevices) {
  console.log('getUserMedia supported.');

  var constraints = { audio: true };
  var chunks = [];

  navigator.mediaDevices.getUserMedia(constraints)
  .then(function(stream) {

    var mediaRecorder = new MediaRecorder(stream);

    visualize(stream);

    record.onclick = function() {
      mediaRecorder.start();
      console.log(mediaRecorder.state);
      console.log("recorder started");
      record.style.background = "red";
      record.style.color = "black";
    }

    stop.onclick = function() {
      mediaRecorder.stop();
      console.log(mediaRecorder.state);
      console.log("recorder stopped");
      record.style.background = "";
      record.style.color = "";
    }

    mediaRecorder.onstop = function(e) {
      console.log("data available after MediaRecorder.stop() called.");

      var clipName = prompt('Enter a name for your sound clip');

      var clipContainer = document.createElement('article');
      var clipLabel = document.createElement('p');
      var audio = document.createElement('audio');
      var deleteButton = document.createElement('button');
     
      clipContainer.classList.add('clip');
      audio.setAttribute('controls', '');
      deleteButton.innerHTML = "Delete";
      clipLabel.innerHTML = clipName;

      clipContainer.appendChild(audio);
      clipContainer.appendChild(clipLabel);
      clipContainer.appendChild(deleteButton);
      soundClips.appendChild(clipContainer);

      audio.controls = true;
      var blob = new Blob(chunks, { 'type' : 'audio/ogg; codecs=opus' });
      chunks = [];
      var audioURL = URL.createObjectURL(blob);
      audio.src = audioURL;
      console.log("recorder stopped");

      deleteButton.onclick = function(e) {
        evtTgt = e.target;
        evtTgt.parentNode.parentNode.removeChild(evtTgt.parentNode);
      }
    }

    mediaRecorder.ondataavailable = function(e) {
      chunks.push(e.data);
    }
  })
  .catch(function(err) {
    console.log('The following error occured: ' + err);
  })
}

</pre> <div class="note"> <p>This code sample is inspired by the Web Dictaphone demo. Some lines have been omitted for brevity; <a href="https://github.com/mdn/web-dictaphone/">refer to the source</a> for the complete code.</p> </div> <h2 id="Specifications">Specifications</h2> <table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a lang="en" title="The 'MediaStream Recording' specification" class="external" href="https://w3c.github.io/mediacapture-record/MediaRecorder.html#MediaRecorderAPI" hreflang="en">MediaStream Recording</a></td> <td><span class="spec-WD">Working Draft</span></td> <td>Initial definition</td> </tr> </tbody> </table> <h2 id="Browser_compatibility">Browser compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari (WebKit)</th> </tr> <tr> <td>Basic support</td> <td>47.0</td> <td>
<a title="Released on 2013-10-29." href="https://developer.mozilla.org/en-US/Firefox/Releases/25">25.0</a> (25.0)</td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> </tr> </tbody> </table> </div> <div id="compat-mobile"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android</th> <th>Android Webview</th> <th>Firefox Mobile (Gecko)</th> <th>Firefox OS</th> <th>IE Phone</th> <th>Opera Mobile</th> <th>Safari Mobile</th> <th>Chrome for Android</th> </tr> <tr> <td>Basic support</td> <td><span style="color: #f00;">No support</span></td> <td>47.0</td> <td>
<a title="Released on 2013-10-29." href="https://developer.mozilla.org/en-US/Firefox/Releases/25">25.0</a> (25.0)</td> <td>1.3<sup>[1]</sup>
</td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td>47.0</td> </tr> </tbody> </table> </div> <ul> <li>[1] The initial Firefox OS implementation only supported audio recording.</li> </ul> <h2 id="See_also">See also</h2> <ul> <li><a href="mediastream_recording_api/using_the_mediastream_recording_api">Using the MediaRecorder API</a></li> <li>
<a href="https://mdn.github.io/web-dictaphone/">Web Dictaphone</a>: MediaRecorder + getUserMedia + Web Audio API visualization demo, by <a href="https://twitter.com/chrisdavidmills">Chris Mills</a> (<a href="https://github.com/mdn/web-dictaphone/">source on Github</a>.)</li> <li><a href="mediastream_recording_api/recording_a_media_element">Recording a media element</a></li> <li>
<a href="https://simpl.info/mediarecorder/">simpl.info MediaStream Recording demo</a>, by <a href="https://twitter.com/sw12">Sam Dutton</a>.</li> <li><a title="The MediaDevices.getUserMedia() method prompts the user for permission to use one video and/or one audio input device such as a camera or screensharing and/or a microphone. If the user provides permission, then the returned Promise is resolved with the resulting MediaStream object. If the user denies permission, or media is not available, then the promise is rejected with PermissionDeniedError or NotFoundError respectively. Note that it is possible for the returned promise to neither resolve nor reject, as the user is not required to make a choice." href="mediadevices/getusermedia"><code>navigator.mediaDevices.getUserMedia</code></a></li> <li>
<a href="https://www.fingerspell.org/">FingerSpell</a>: Sign Language Fingerspelling practice using MediaDevices and the MediaStream Recording API to create and download recordings, MediaRecorder API supported desktop browsers only (<a href="https://github.com/chrisjohndigital/CameraCaptureJS">source on GitHub</a>)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaRecorder$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaRecorder" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/MediaRecorder</a>
  </p>
</div>

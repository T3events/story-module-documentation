<h1>document.createTreeWalker</h1> <p>The <strong><code>Document.createTreeWalker()</code></strong> creator method returns a newly created <a title="The TreeWalker object represents the nodes of a document subtree and a position within them." href="../treewalker"><code>TreeWalker</code></a> object.</p> <h2 id="Syntax">Syntax</h2> <pre class="syntaxbox"><em>treeWalker</em> = <em>document</em>.createTreeWalker(<em>root</em>, <em>whatToShow</em>, <em>filter</em>, <em>entityReferenceExpansion</em>);
</pre> <h3 id="Parameters">Parameters</h3> <dl> <dt><em>root </em></dt> <dd>Is the root <a title="A Node is an interface from which a number of DOM types inherit, and allows these various types to be treated (or tested) similarly." href="../node"><code>Node</code></a> of this <a title="The TreeWalker object represents the nodes of a document subtree and a position within them." href="../treewalker"><code>TreeWalker</code></a> traversal. Typically this will be an element owned by the document.</dd> <dt><em>whatToShow <span class="inlineIndicator optional optionalInline">Optional</span></em></dt> <dd>Is an optional <code>unsigned long</code> representing a bitmask created by combining the constant properties of <code><a href="http://www.w3.org/TR/DOM-Level-2-Traversal-Range/traversal.html#Traversal-NodeFilter">NodeFilter</a></code>. It is a convenient way of filtering for certain types of node. It defaults to <code>0xFFFFFFFF</code> representing the <code>SHOW_ALL</code> constant. <table class="standard-table"> <tbody> <tr> <th class="header">Constant</th> <th class="header">Numerical value</th> <th class="header">Description</th> </tr> <tr> <td><code>NodeFilter.SHOW_ALL</code></td> <td>
<code>-1</code> (that is the max value of <code>unsigned long</code>)</td> <td>Shows all nodes.</td> </tr> <tr> <td>
<code>NodeFilter.SHOW_ATTRIBUTE</code> 
</td> <td><code>2</code></td> <td>Shows attribute <a title="This type represents a DOM element's attribute as an object. In most DOM methods, you will probably directly retrieve the attribute as a string (e.g., Element.getAttribute(), but certain functions (e.g., Element.getAttributeNode()) or means of iterating give Attr types." href="../attr"><code>Attr</code></a> nodes. This is meaningful only when creating a <a title="The TreeWalker object represents the nodes of a document subtree and a position within them." href="../treewalker"><code>TreeWalker</code></a> with an <a title="This type represents a DOM element's attribute as an object. In most DOM methods, you will probably directly retrieve the attribute as a string (e.g., Element.getAttribute(), but certain functions (e.g., Element.getAttributeNode()) or means of iterating give Attr types." href="../attr"><code>Attr</code></a> node as its root; in this case, it means that the attribute node will appear in the first position of the iteration or traversal. Since attributes are never children of other nodes, they do not appear when traversing over the document tree.</td> </tr> <tr> <td>
<code>NodeFilter.SHOW_CDATA_SECTION</code> 
</td> <td><code>8</code></td> <td>Shows <a title="The CDATASection interface represents a CDATA section that can be used within XML to include extended portions of unescaped text, such that the symbols &lt; and &amp; do not need escaping as they normally do within XML when used as text." href="https://developer.mozilla.org/en-US/docs/Web/API/CDATASection"><code>CDATASection</code></a> nodes.</td> </tr> <tr> <td><code>NodeFilter.SHOW_COMMENT</code></td> <td><code>128</code></td> <td>Shows <a title="The Comment interface represents textual notations within markup; although it is generally not visually shown, such comments are available to be read in the source view. Comments are represented in HTML and XML as content between '<!--' and '-->'. In XML, the character sequence '--' cannot be used within a comment." href="../comment"><code>Comment</code></a> nodes.</td> </tr> <tr> <td><code>NodeFilter.SHOW_DOCUMENT</code></td> <td><code>256</code></td> <td>Shows <a title="The Document interface represents any web page loaded in the browser and serves as an entry point into the web page's content, which is the DOM tree. The DOM tree includes elements such as &lt;body&gt; and &lt;table&gt;, among many others. It provides functionality global to the document, like how to obtain the page's URL and create new elements in the document." href="../document"><code>Document</code></a> nodes.</td> </tr> <tr> <td><code>NodeFilter.SHOW_DOCUMENT_FRAGMENT</code></td> <td><code>1024</code></td> <td>Shows <a title="The DocumentFragment interface represents a minimal document object that has no parent. It is used as a light-weight version of Document to store well-formed or potentially non-well-formed fragments of XML." href="../documentfragment"><code>DocumentFragment</code></a> nodes.</td> </tr> <tr> <td><code>NodeFilter.SHOW_DOCUMENT_TYPE</code></td> <td><code>512</code></td> <td>Shows <a title="The DocumentType interface represents a Node containing a doctype." href="../documenttype"><code>DocumentType</code></a> nodes.</td> </tr> <tr> <td><code>NodeFilter.SHOW_ELEMENT</code></td> <td><code>1</code></td> <td>Shows <a title="The Element interface represents an object of a Document. This interface describes methods and properties common to all kinds of elements. Specific behaviors are described in interfaces which inherit from Element but add additional functionality." href="../element"><code>Element</code></a> nodes.</td> </tr> <tr> <td>
<code>NodeFilter.SHOW_ENTITY</code> 
</td> <td><code>32</code></td> <td>Shows <a title="Read-only reference to a DTD entity. Also inherits the methods and properties of Node." href="https://developer.mozilla.org/en-US/docs/Web/API/Entity"><code>Entity</code></a> nodes. This is meaningful only when creating a <a title="The TreeWalker object represents the nodes of a document subtree and a position within them." href="../treewalker"><code>TreeWalker</code></a> with an <a title="Read-only reference to a DTD entity. Also inherits the methods and properties of Node." href="https://developer.mozilla.org/en-US/docs/Web/API/Entity"><code>Entity</code></a> node as its root; in this case, it means that the <a title="Read-only reference to a DTD entity. Also inherits the methods and properties of Node." href="https://developer.mozilla.org/en-US/docs/Web/API/Entity"><code>Entity</code></a> node will appear in the first position of the traversal. Since entities are not part of the document tree, they do not appear when traversing over the document tree.</td> </tr> <tr> <td>
<code>NodeFilter.SHOW_ENTITY_REFERENCE</code> 
</td> <td><code>16</code></td> <td>Shows <a title="Read-only reference to an entity reference in the DOM tree. Has no properties or methods of its own but inherits from Node." href="https://developer.mozilla.org/en-US/docs/Web/API/EntityReference"><code>EntityReference</code></a> nodes.</td> </tr> <tr> <td>
<code>NodeFilter.SHOW_NOTATION</code> 
</td> <td><code>2048</code></td> <td>Shows <a title="Represents a DTD notation (read-only). May declare format of an unparsed entity or formally declare the document's processing instruction targets. Inherits methods and properties from Node. Its nodeName is the notation name. Has no parent." href="https://developer.mozilla.org/en-US/docs/Web/API/Notation"><code>Notation</code></a> nodes. This is meaningful only when creating a <a title="The TreeWalker object represents the nodes of a document subtree and a position within them." href="../treewalker"><code>TreeWalker</code></a> with a <a title="Represents a DTD notation (read-only). May declare format of an unparsed entity or formally declare the document's processing instruction targets. Inherits methods and properties from Node. Its nodeName is the notation name. Has no parent." href="https://developer.mozilla.org/en-US/docs/Web/API/Notation"><code>Notation</code></a> node as its root; in this case, it means that the <a title="Represents a DTD notation (read-only). May declare format of an unparsed entity or formally declare the document's processing instruction targets. Inherits methods and properties from Node. Its nodeName is the notation name. Has no parent." href="https://developer.mozilla.org/en-US/docs/Web/API/Notation"><code>Notation</code></a> node will appear in the first position of the traversal. Since entities are not part of the document tree, they do not appear when traversing over the document tree.</td> </tr> <tr> <td><code>NodeFilter.SHOW_PROCESSING_INSTRUCTION</code></td> <td><code>64</code></td> <td>Shows <a title="A processing instruction provides an opportunity for application-specific instructions to be embedded within XML and which can be ignored by XML processors which do not support processing their instructions (outside of their having a place in the DOM)." href="https://developer.mozilla.org/en-US/docs/Web/API/ProcessingInstruction"><code>ProcessingInstruction</code></a> nodes.</td> </tr> <tr> <td><code>NodeFilter.SHOW_TEXT</code></td> <td><code>4</code></td> <td>Shows <a title="The Text interface represents the textual content of Element or Attr.  If an element has no markup within its content, it has a single child implementing Text that contains the element's text.  However, if the element contains markup, it is parsed into information items and Text nodes that form its children." href="../text"><code>Text</code></a> nodes.</td> </tr> </tbody> </table> </dd> <dt><em>filter <em><span class="inlineIndicator optional optionalInline">Optional</span></em></em></dt> <dd>Is an optional <a title="A NodeFilter interface represents an object used to filter the nodes in a NodeIterator or TreeWalker. They don't know anything about the DOM or how to traverse nodes; they just know how to evaluate a single node against the provided filter." href="../nodefilter"><code>NodeFilter</code></a>, that is an object with a method <code>acceptNode</code>, which is called by the <a title="The TreeWalker object represents the nodes of a document subtree and a position within them." href="../treewalker"><code>TreeWalker</code></a> to determine whether or not to accept a node that has passed the <code>whatToShow</code> check.</dd> <dt>
<em>entityReferenceExpansion<em> <span class="inlineIndicator optional optionalInline">Optional</span></em></em> 
</dt> <dd>Is a <a title="The Boolean object is an object wrapper for a boolean value." href="https://developer.mozilla.org/en-US/docs/Web/API/Boolean"><code>Boolean</code></a> flag indicating if when discarding an <a title="Read-only reference to an entity reference in the DOM tree. Has no properties or methods of its own but inherits from Node." href="https://developer.mozilla.org/en-US/docs/Web/API/EntityReference"><code>EntityReference</code></a> its whole sub-tree must be discarded at the same time.</dd> </dl> <h2 id="Example">Example</h2> <p>The following example goes through all nodes in the body, reduces the set of nodes to elements, simply passes through as acceptable each node (it could reduce the set in the <code>acceptNode()</code> method instead), and then makes use of tree walker iterator that is created to advance through the nodes (now all elements) and push them into an array.</p> <pre data-language="js">var treeWalker = document.createTreeWalker(
  document.body,
  NodeFilter.SHOW_ELEMENT,
  { acceptNode: function(node) { return NodeFilter.FILTER_ACCEPT; } },
  false
);

var nodeList = [];

while(treeWalker.nextNode()) nodeList.push(treeWalker.currentNode);
</pre> <h2 id="Specifications">Specifications</h2> <table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a lang="en" hreflang="en" href="https://dom.spec.whatwg.org/#dom-document-createtreewalker" class="external">DOM<br><small lang="en-US">The definition of 'Document.createTreeWalker' in that specification.</small></a></td> <td><span class="spec-Living">Living Standard</span></td> <td>Removed the <code>expandEntityReferences</code> parameter. Made the <code>whatToShow</code> and <code>filter</code> parameters optionals.</td> </tr> <tr> <td><a lang="en" hreflang="en" href="https://www.w3.org/TR/DOM-Level-2-Traversal-Range/traversal.html#NodeIteratorFactory-createTreeWalker" class="external">Document Object Model (DOM) Level 2 Traversal and Range Specification<br><small lang="en-US">The definition of 'Document.createTreeWalker' in that specification.</small></a></td> <td><span class="spec-REC">Recommendation</span></td> <td>Initial definition</td> </tr> </tbody> </table> <h2 id="Browser_compatibility">Browser compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Edge</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari</th> </tr> <tr> <td>Basic support</td> <td>1.0</td>
<td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>
<a title="Released on 2006-10-24." href="https://developer.mozilla.org/en-US/Firefox/Releases/2">2.0</a> (1.8.1)</td> <td>9.0</td> <td>9.0</td> <td>3.0</td> </tr> <tr> <td>
<code>whatToShow</code> and <code>filter</code> optional</td> <td>1.0</td>
<td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td>
<a title="Released on 2012-04-24." href="https://developer.mozilla.org/en-US/Firefox/Releases/12">12</a> (12)</td> <td><span style="color: #f00;">No support</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>3.0</td> </tr> <tr> <td><code>expandEntityReferences</code></td> <td>1.0</td>
<td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td>
<a title="Released on 2006-10-24." href="https://developer.mozilla.org/en-US/Firefox/Releases/2">2.0</a> (1.8.1)<br> Removed in <a title="Released on 2012-04-24." href="https://developer.mozilla.org/en-US/Firefox/Releases/12">12</a> (12)</td> <td>9.0</td> <td>9.0</td> <td>3.0</td> </tr> </tbody> </table> </div> <div id="compat-mobile"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android</th> <th>Edge</th> <th>Firefox Mobile (Gecko)</th> <th>IE Mobile</th> <th>Opera Mobile</th> <th>Safari Mobile</th> </tr> <tr> <td>Basic support</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td>
<td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>1.0 (1.8.1)</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>9.0</td> <td>3.0</td> </tr> <tr> <td>
<code>whatToShow</code> and <code>filter</code> optional</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td>
<td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td>
<a title="Released on 2012-04-24." href="https://developer.mozilla.org/en-US/Firefox/Releases/12">12</a> (12)</td> <td><span style="color: #f00;">No support</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>3.0</td> </tr> <tr> <td><code>expandEntityReferences</code></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td>
<td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td>
<a title="Released on 2006-10-24." href="https://developer.mozilla.org/en-US/Firefox/Releases/2">2.0</a> (1.8.1)<br> Removed in <a title="Released on 2012-04-24." href="https://developer.mozilla.org/en-US/Firefox/Releases/12">12</a> (12)</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>9.0</td> <td>3.0</td> </tr> </tbody> </table> </div> <h2 id="See_also">See also</h2> <ul> <li>The interface of the object it creates: <a title="The TreeWalker object represents the nodes of a document subtree and a position within them." href="../treewalker"><code>TreeWalker</code></a>.</li> <li><a href="http://msdn.microsoft.com/en-us/library/ie/ff975302(v=vs.85).aspx">createTreeWalker on MSDN</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/document/createTreeWalker$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/document/createTreeWalker" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/document/createTreeWalker</a>
  </p>
</div>

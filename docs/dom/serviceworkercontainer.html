<h1>ServiceWorkerContainer</h1><div class="notice experimental"> <p> <strong>This is an experimental technology</strong><br>Because this technology's specification has not stabilized, check the <a href="#Browser_compatibility">compatibility table</a> for usage in various browsers. Also note that the syntax and behavior of an experimental technology is subject to change in future versions of browsers as the specification changes.</p> </div> <p>The <code>ServiceWorkerContainer</code> interface of the <a href="service_worker_api">ServiceWorker API</a> provides an object representing the service worker as an overall unit in the network ecosystem, including facilities to register, unregister and update service workers, and access the state of service workers and their registrations.</p> <p>Most importantly, it exposes the <a title="The register() method of the ServiceWorkerContainer interface creates or updates a ServiceWorkerRegistration for the given scriptURL." href="serviceworkercontainer/register"><code>ServiceWorkerContainer.register(scriptURL, scope[, base])</code></a> method used to register service workers, and the <a title="The controller read-only property of the ServiceWorkerContainer interface returns a ServiceWorker object if its state is activated (the same object returned by ServiceWorkerRegistration.active). This property returns null if the request is a force refresh (Shift + refresh) or if there is no active worker." href="serviceworkercontainer/controller"><code>ServiceWorkerContainer.controller</code></a> property used to determine whether or not the current page is actively controlled.</p> <h2 id="Properties">Properties</h2> <dl> <dt>
<a title="The controller read-only property of the ServiceWorkerContainer interface returns a ServiceWorker object if its state is activated (the same object returned by ServiceWorkerRegistration.active). This property returns null if the request is a force refresh (Shift + refresh) or if there is no active worker." href="serviceworkercontainer/controller"><code>ServiceWorkerContainer.controller</code></a> <span title="This value may not be changed." class="inlineIndicator readOnly readOnlyInline">Read only </span>
</dt> <dd>Returns a <a title="The ServiceWorker interface of the ServiceWorker API provides a reference to a service worker. Multiple browsing contexts (e.g. pages, workers, etc.) can be associated with the same service worker, each through a unique ServiceWorker object." href="serviceworker"><code>ServiceWorker</code></a> object if its state is <code>activated</code> (the same object returned by <a title="The active property of the ServiceWorkerRegistration interface returns a service worker whose ServiceWorker.state is activating or activated. This property is initially set to null." href="serviceworkerregistration/active"><code>ServiceWorkerRegistration.active</code></a>). This property returns <code style="font-style: normal;">null</code> if the request is a force refresh (<em>Shift</em> + refresh) or if there is no active worker.</dd> </dl> <dl> <dt>
<a title="" href="serviceworkercontainer/ready"><code>ServiceWorkerContainer.ready</code></a> <span title="This value may not be changed." class="inlineIndicator readOnly readOnlyInline">Read only </span>
</dt> <dd>Defines whether a service worker is ready to control a page or not. It returns a <a title="The Promise object is used for asynchronous computations. A Promise represents a value which may be available now, or in the future, or never." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> that will never reject, which resolves to a <a title="The ServiceWorkerRegistration interface of the ServiceWorker API represents the service worker registration. You register a service worker to control one or more pages that share the same origin." href="serviceworkerregistration"><code>ServiceWorkerRegistration</code></a> with an <a title="The active property of the ServiceWorkerRegistration interface returns a service worker whose ServiceWorker.state is activating or activated. This property is initially set to null." href="serviceworkerregistration/active"><code>ServiceWorkerRegistration.active</code></a> worker.</dd> </dl> <h3 id="Event_handlers">Event handlers</h3> <dl> <dt><a title="The oncontrollerchange property of the ServiceWorkerContainer interface is an event handler fired whenever a controllerchange event occurs — when the document's associated ServiceWorkerRegistration acquires a new ServiceWorkerRegistration.active worker." href="serviceworkercontainer/oncontrollerchange"><code>ServiceWorkerContainer.oncontrollerchange</code></a></dt> <dd>An event handler fired whenever a <code><a title="/en-US/docs/Web/Events/controllerchange" href="https://developer.mozilla.org/en-US/docs/Web/Events/controllerchange">controllerchange</a></code> event occurs — when the document's associated <a title="The ServiceWorkerRegistration interface of the ServiceWorker API represents the service worker registration. You register a service worker to control one or more pages that share the same origin." href="serviceworkerregistration"><code>ServiceWorkerRegistration</code></a> acquires a new <a title="The active property of the ServiceWorkerRegistration interface returns a service worker whose ServiceWorker.state is activating or activated. This property is initially set to null." href="serviceworkerregistration/active"><code>ServiceWorkerRegistration.active</code></a> worker.</dd> <dt><a title="The onerror property of the ServiceWorkerContainer interface is an event handler fired whenever an error event occurs in the associated service workers." href="serviceworkercontainer/onerror"><code>ServiceWorkerContainer.onerror</code></a></dt> <dd>An event handler fired whenever an <code><a title="/en-US/docs/Web/Events/error" href="https://developer.mozilla.org/en-US/docs/Web/Events/error">error</a></code> event occurs in the associated service workers.</dd> <dt><a title="The onmessage property of the ServiceWorkerContainer interface is an event handler fired whenever a message event occurs — when incoming messages are received to the ServiceWorkerContainer object (e.g., via a MessagePort.postMessage() call)." href="serviceworkercontainer/onmessage"><code>ServiceWorkerContainer.onmessage</code></a></dt> <dd>An event handler fired whenever a <code><a title="/en-US/docs/Web/Events/message" href="https://developer.mozilla.org/en-US/docs/Web/Events/message">message</a></code> event occurs — when incoming messages are received to the <a title="The ServiceWorkerContainer interface of the ServiceWorker API provides an object representing the service worker as an overall unit in the network ecosystem, including facilities to register, unregister and update service workers, and access the state of service workers and their registrations." href="serviceworkercontainer"><code>ServiceWorkerContainer</code></a> object (e.g. via a <a title="The postMessage() method of the MessagePort interface sends a message from the port, and optionally, transfers ownership of objects to other browsing contexts." href="messageport/postmessage"><code>MessagePort.postMessage()</code></a> call.)</dd> </dl> <h2 id="Methods">Methods</h2> <dl> <dt>
<a title="The register() method of the ServiceWorkerContainer interface creates or updates a ServiceWorkerRegistration for the given scriptURL." href="serviceworkercontainer/register"><code>ServiceWorkerContainer.register()</code></a> </dt> <dd>Creates or updates a <a title="The ServiceWorkerRegistration interface of the ServiceWorker API represents the service worker registration. You register a service worker to control one or more pages that share the same origin." href="serviceworkerregistration"><code>ServiceWorkerRegistration</code></a> for the given <code>scriptURL</code>.</dd> <dt><a title="The getRegistration() method of the ServiceWorkerContainer interface gets a ServiceWorkerRegistration object whose scope URL matches the provided document URL.  The method returns a Promise that resolves to a ServiceWorkerRegistration or undefined." href="serviceworkercontainer/getregistration"><code>ServiceWorkerContainer.getRegistration()</code></a></dt> <dd>Gets a <a title="The ServiceWorkerRegistration interface of the ServiceWorker API represents the service worker registration. You register a service worker to control one or more pages that share the same origin." href="serviceworkerregistration"><code>ServiceWorkerRegistration</code></a> object whose scope URL matches the provided document URL. If the method can't return a <a title="The ServiceWorkerRegistration interface of the ServiceWorker API represents the service worker registration. You register a service worker to control one or more pages that share the same origin." href="serviceworkerregistration"><code>ServiceWorkerRegistration</code></a>, it returns a <a title="The Promise object is used for deferred and asynchronous computations. A Promise is in one of the three states:" style="text-decoration: underline;" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a>. </dd> <dt><a title="The getRegistrations() method of the ServiceWorkerContainer interface returns all ServiceWorkerRegistrations associated with a ServiceWorkerContainer in an array.  If the method can't return ServiceWorkerRegistrations, it returns a Promise." href="serviceworkercontainer/getregistrations"><code>ServiceWorkerContainer.getRegistrations()</code></a></dt> <dd>Returns all <a title="The ServiceWorkerRegistration interface of the ServiceWorker API represents the service worker registration. You register a service worker to control one or more pages that share the same origin." href="serviceworkerregistration"><code>ServiceWorkerRegistration</code></a>s associated with a <code>ServiceWorkerContainer</code> in an array. If the method can't return <a title="The ServiceWorkerRegistration interface of the ServiceWorker API represents the service worker registration. You register a service worker to control one or more pages that share the same origin." href="serviceworkerregistration"><code>ServiceWorkerRegistration</code></a>s, it returns a <a title="The Promise object is used for deferred and asynchronous computations. A Promise is in one of the three states:" style="text-decoration: underline;" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a>. </dd> </dl> <h2 id="Examples">Examples</h2> <p>This code snippet is from the <a href="https://github.com/GoogleChrome/samples/blob/gh-pages/service-worker/fallback-response/index.html#L126">service worker fallback-response sample</a> (see <a href="http://googlechrome.github.io/samples/service-worker/fallback-response/">fallback-response live</a>). The code checks to see if the browser supports service workers. Then the code registers the service worker and determines if the page is actively controlled by the service worker. If it isn't, it prompts the user to reload the page so the service worker can take control. The code also reports any registration failures.</p> <pre data-language="js">if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('service-worker.js', {scope: './'}).then(function() {
    if (navigator.serviceWorker.controller) {
      document.querySelector('#status').textContent = 'The service worker is currently handling network operations.';
      showRequestButtons();
    } else {
      document.querySelector('#status').textContent = 'Please reload this page to allow the service worker to handle network operations.';
    }
  }).catch(function(error) {
    document.querySelector('#status').textContent = error;
  });
} else {
  var aElement = document.createElement('a');
  aElement.href = 'http://www.chromium.org/blink/serviceworker/service-worker-faq';
  aElement.textContent = 'unavailable';
  document.querySelector('#status').appendChild(aElement);
}</pre> <h2 id="Specifications">Specifications</h2> <table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a hreflang="en" class="external" lang="en" href="https://www.w3.org/TR/service-workers/#service-worker-container">Service Workers<br><small lang="en-US">The definition of 'ServiceWorkerContainer' in that specification.</small></a></td> <td><span class="spec-WD">Working Draft</span></td> <td>Initial definition.</td> </tr> </tbody> </table> <h2 id="Browser_compatibility">Browser compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari (WebKit)</th> </tr> <tr> <td>Basic support</td> <td>40.0</td> <td>
<a title="Released on 2016-01-26." href="https://developer.mozilla.org/en-US/Firefox/Releases/44">44.0</a> (44.0)<sup>[1]</sup>
</td> <td><span style="color: #f00;">No support</span></td> <td>24</td> <td><span style="color: #f00;">No support</span></td> </tr> </tbody> </table> </div> <div id="compat-mobile"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android</th> <th>Firefox Mobile (Gecko)</th> <th>Firefox OS</th> <th>IE Mobile</th> <th>Opera Mobile</th> <th>Safari Mobile</th> <th>Chrome for Android</th> </tr> <tr> <td>Basic support</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td>44.0 (44.0)</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span style="color: #f00;">No support</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span style="color: #f00;">No support</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> </tr> </tbody> </table> </div> <p>[1] Service workers (and <a href="push_api">Push</a>) have been disabled in the <a href="https://www.mozilla.org/en-US/firefox/organizations/">Firefox 45 Extended Support Release</a> (ESR.)</p> <h2 id="See_also">See also</h2> <ul> <li><a href="service_worker_api/using_service_workers">Using Service Workers</a></li> <li><a class="external external-icon" href="https://github.com/mdn/sw-test">Service workers basic code example</a></li> <li><a class="external external-icon" href="https://jakearchibald.github.io/isserviceworkerready/">Is ServiceWorker ready?</a></li> <li><a title="The Promise object is used for asynchronous computations. A Promise represents a value which may be available now, or in the future, or never." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Performance/Using_web_workers">Using web workers</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer</a>
  </p>
</div>

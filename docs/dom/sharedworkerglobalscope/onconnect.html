<h1>SharedWorkerGlobalScope.onconnect</h1> <p>The <code><strong>onconnect</strong></code> property of the <a href="../sharedworkerglobalscope" title="The SharedWorkerGlobalScope object (the SharedWorker global scope) is accessible through the self keyword. Some additional global functions, namespaces objects, and constructors, not typically associated with the worker global scope, but available on it, are listed in the JavaScript Reference. See also: Functions available to workers."><code>SharedWorkerGlobalScope</code></a> interface is an <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventHandler" title="The documentation about this has not yet been written; please consider contributing!"><code>EventHandler</code></a> representing the code to be called when the <code><a href="https://developer.mozilla.org/en-US/docs/Web/Events/connect" title="/en-US/docs/Web/Events/connect">connect</a></code> event is raised — that is, when a <a href="../messageport" title="The MessagePort interface of the Channel Messaging API represents one of the two ports of a MessageChannel, allowing sending of messages from one port and listening out for them arriving at the other."><code>MessagePort</code></a> connection is opened between the associated <a href="../sharedworker" title="The SharedWorker interface represents a specific kind of worker that can be accessed from several browsing contexts, such as several windows, iframes or even workers. They implement an interface different than dedicated workers and have a different global scope, SharedWorkerGlobalScope."><code>SharedWorker</code></a> and the main thread.</p> <h2 id="Syntax">Syntax</h2> <pre data-language="js">onconnect = function() { ... };</pre> <h2 id="Specifications">Specifications</h2> <table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a href="https://html.spec.whatwg.org/multipage/#handler-sharedworkerglobalscope-onconnect" class="external" lang="en" hreflang="en">WHATWG HTML Living Standard<br><small lang="en-US">The definition of 'onconnect' in that specification.</small></a></td> <td><span class="spec-Living">Living Standard</span></td> <td>No change from <a href="http://dev.w3.org/html5/workers/" class="external" lang="en" title="The 'Web Workers' specification" hreflang="en">Web Workers</a>.</td> </tr> <tr> <td><a href="http://dev.w3.org/html5/workers/#handler-sharedworkerglobalscope-onconnect" class="external" lang="en" hreflang="en">Web Workers<br><small lang="en-US">The definition of 'onconnect' in that specification.</small></a></td> <td><span class="spec-CR">Candidate Recommendation</span></td> <td>Initial definition.</td> </tr> </tbody> </table> <h2 name="Browser_Compatibility" id="Browser_Compatibility">Example</h2> <p>This example shows a shared worker file — when a connection to the worker occurs from a main thread via a <a href="../messageport" title="The MessagePort interface of the Channel Messaging API represents one of the two ports of a MessageChannel, allowing sending of messages from one port and listening out for them arriving at the other."><code>MessagePort</code></a>, the <code>onconnect</code> event handler fires. The connecting port can be referenced through the event's <code>ports</code> parameter; this reference can have an <code>onmessage</code> handler attached to it to handle messages coming in through the port, and its <code>postMessage()</code> method can be used to send messages back to the main thread using the worker.</p> <pre data-language="js">onconnect = function(e) {
    var port = e.ports[0];

    port.onmessage = function(e) {
      var workerResult = 'Result: ' + (e.data[0] * e.data[1]);
      port.postMessage(workerResult);
    }

    port.start();
}</pre> <p>For a complete running example, see our <a href="https://github.com/mdn/simple-shared-worker" class="external-icon external">Basic shared worker example</a> (<a href="http://mdn.github.io/simple-shared-worker/" class="external-icon external">run shared worker</a>.)</p> <h2 name="Browser_Compatibility" id="Browser_Compatibility">Browser compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari</th> </tr> <tr> <td>Support</td> <td>3</td> <td>
<a href="https://developer.mozilla.org/en-US/Firefox/Releases/29" title="Released on 2014-04-29.">29.0</a> (29.0)</td> <td><span style="color: #f00;">Not supported</span></td> <td>10.60</td> <td><span style="color: #f00;">Not supported</span></td> </tr> </tbody> </table> </div> <div id="compat-mobile"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android</th> <th>Chrome for Android</th> <th>Firefox Mobile (Gecko)</th> <th>Firefox OS (Gecko)</th> <th>IE Mobile</th> <th>Opera Mobile</th> <th>Safari Mobile</th> </tr> <tr> <td>Support</td> <td>---</td> <td><span style="color: #f00;">Not supported</span></td> <td>29.0 (29.0)</td> <td>1.4</td> <td>---</td> <td>---</td> <td>---</td> </tr> </tbody> </table> </div> <h2 id="See_also">See also</h2> <ul> <li><a href="../sharedworkerglobalscope" title="The SharedWorkerGlobalScope object (the SharedWorker global scope) is accessible through the self keyword. Some additional global functions, namespaces objects, and constructors, not typically associated with the worker global scope, but available on it, are listed in the JavaScript Reference. See also: Functions available to workers."><code>SharedWorkerGlobalScope</code></a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/SharedWorkerGlobalScope/onconnect$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/SharedWorkerGlobalScope/onconnect" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/SharedWorkerGlobalScope/onconnect</a>
  </p>
</div>

<h1>MediaStream Recording API</h1> <p><span class="seoSummary">The <strong>MediaStream Recording API</strong>, sometimes simply referred to as the <em>Media Recording API</em> or the <em>MediaRecorder API</em>, is closely affiliated with the <a href="media_streams_api">Media Capture and Streams API</a> and the <a href="webrtc_api">WebRTC API</a>. The MediaStream Recording API makes it possible to capture the data generated by a <a href="mediastream" title="The MediaStream interface represents a stream of media content. A stream consists of several tracks such as video or audio tracks. Each track is specified as an instance of MediaStreamTrack."><code>MediaStream</code></a> or <a href="htmlmediaelement" title="The HTMLMediaElement interface adds to HTMLElement the properties and methods needed to support basic media-related capabilities that are common to audio and video. The HTMLVideoElement and HTMLAudioElement elements both inherit this interface."><code>HTMLMediaElement</code></a> object for analysis, processing, or saving to disk. It's also surprisingly easy to work with.</span></p> <h2 id="Basic_concepts">Basic concepts</h2> <p>The MediaStream Recording API is comprised of a single interface, <a href="mediarecorder" title="The MediaRecorder interface of the MediaStream Recording API provides functionality to easily record media. It is created by the invocation of the MediaRecorder() constructor."><code>MediaRecorder</code></a>, which does all the work of taking the data from a <a href="mediastream" title="The MediaStream interface represents a stream of media content. A stream consists of several tracks such as video or audio tracks. Each track is specified as an instance of MediaStreamTrack."><code>MediaStream</code></a> and delivering it to you for processing. The data is delivered by a series of <code><a href="https://developer.mozilla.org/en-US/docs/Web/Events/dataavailable" title="/en-US/docs/Web/Events/dataavailable">dataavailable</a></code> events, already in the format you specify when creating the <code>MediaRecorder</code>. The process of recording a stream is simple:</p> <ol> <li>Set up a <a href="mediastream" title="The MediaStream interface represents a stream of media content. A stream consists of several tracks such as video or audio tracks. Each track is specified as an instance of MediaStreamTrack."><code>MediaStream</code></a> or <a href="htmlmediaelement" title="The HTMLMediaElement interface adds to HTMLElement the properties and methods needed to support basic media-related capabilities that are common to audio and video. The HTMLVideoElement and HTMLAudioElement elements both inherit this interface."><code>HTMLMediaElement</code></a> (in the form of an <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/audio" title="The HTML &lt;audio&gt; element is used to embed sound content in documents. It may contain one or more audio sources, represented using the src attribute or the &lt;source&gt; element; the browser will choose the most suitable one."><code>&lt;audio&gt;</code></a> or <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video" title="Use the  HTML &lt;video&gt; element to embed video content in a document. The video element contains one or more video sources. To specify a video source, use either the src attribute or the &lt;source&gt; element; the browser will choose the most suitable one."><code>&lt;video&gt;</code></a> element) to serve as the source of the media data.</li> <li>Set <a href="mediarecorder/ondataavailable" title="The MediaRecorder.ondataavailable event handler (part of the MediaStream Recording API) handles the dataavailable event, letting you run code in response to Blob data being made available for use."><code>MediaRecorder.ondataavailable</code></a> to an event handler for the <code><a href="https://developer.mozilla.org/en-US/docs/Web/Events/dataavailable" title="/en-US/docs/Web/Events/dataavailable">dataavailable</a></code> event; this will be called whenever data is available for you.</li> <li>Create a <a href="mediarecorder" title="The MediaRecorder interface of the MediaStream Recording API provides functionality to easily record media. It is created by the invocation of the MediaRecorder() constructor."><code>MediaRecorder</code></a> object, specifying the source stream and any desired options (such as the container's MIME type or the desired bit rates of its tracks.</li> <li>Once the source media is playing and you've reached the point where you're ready to record video, call <a href="mediarecorder/start" title="The MediaRecorder.start() method (part of the MediaRecorder API) is used to start capturing media into a Blob."><code>MediaRecorder.start()</code></a> to begin recording.</li> <li>Your <code><a href="https://developer.mozilla.org/en-US/docs/Web/Events/dataavailable" title="/en-US/docs/Web/Events/dataavailable">dataavailable</a></code> event handler gets called every time there's data ready for you to do with as you will; the event has a data attribute whose value is a <a href="blob" title="A Blob object represents a file-like object of immutable, raw data. Blobs represent data that isn't necessarily in a JavaScript-native format. The File interface is based on Blob, inheriting blob functionality and expanding it to support files on the user's system."><code>Blob</code></a> that contains the media data in the . You can force a <code>dataavailable</code> event to occur, thereby delivering the latest sound to you so you can filter it, save it, whatever.</li> <li>Recording stops automatically when the source media stops playing.</li> <li>You can stop recording at any time by calling <a href="mediarecorder/stop" title="The MediaRecorder.stop() method (part of the MediaRecorder API) is used to stop media capture."><code>MediaRecorder.stop()</code></a>.</li> </ol> <p>You can also use the properties of the MediaRecorder object to determine the state of the recording process, and its <a href="mediarecorder/pause" title="The Media.pause() method (part of the MediaRecorder API) is used to pause recording of media streams."><code>pause()</code></a> and <a href="mediarecorder/resume" title="The MediaRecorder.resume() method (part of the MediaRecorder API) is used to resume media recording when it has been previously paused."><code>resume()</code></a> methods to pause and resume recording of the source media.</p> <p>If you need or want to check to see if a specific MIME type is supported, that's possible as well. Just call <a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaRecorder/isTypeSupported" title="The documentation about this has not yet been written; please consider contributing!"><code>MediaRecorder.isTypeSupported()</code></a>.</p> <p>To learn more about using the MediaStream Recording API, see <a href="mediastream_recording_api/using_the_mediastream_recording_api">Using the MediaStream Recording API</a>, which shows how to use the API to record audio clips. A second article, <a href="mediastream_recording_api/recording_a_media_element">Recording a media element</a>, describes how to receive a stream from an <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/audio" title="The HTML &lt;audio&gt; element is used to embed sound content in documents. It may contain one or more audio sources, represented using the src attribute or the &lt;source&gt; element; the browser will choose the most suitable one."><code>&lt;audio&gt;</code></a> or <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video" title="Use the  HTML &lt;video&gt; element to embed video content in a document. The video element contains one or more video sources. To specify a video source, use either the src attribute or the &lt;source&gt; element; the browser will choose the most suitable one."><code>&lt;video&gt;</code></a> element and use the captured stream (in this case, recording it and saving it to a local disk).</p> <h2 id="Reference">Reference</h2> <p><a href="blobevent" title="The BlobEvent interface represents events associated with a Blob. These blobs are typically, but not necessarily,  associated with media content."><code>BlobEvent</code></a></p> <p><a href="mediarecorder" title="The MediaRecorder interface of the MediaStream Recording API provides functionality to easily record media. It is created by the invocation of the MediaRecorder() constructor."><code>MediaRecorder</code></a></p> <h2 id="Specifications">Specifications</h2> <table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a href="https://w3c.github.io/mediacapture-record/MediaRecorder.html#MediaRecorderAPI" class="external" lang="en" title="The 'MediaStream Recording' specification" hreflang="en">MediaStream Recording</a></td> <td><span class="spec-WD">Working Draft</span></td> <td>Initial definition</td> </tr> </tbody> </table> <h2 id="Browser_compatibility">Browser compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Microsoft Edge</th> <th>Opera</th> <th>Safari (WebKit)</th> </tr> <tr> <td>Basic support</td> <td>47.0</td> <td>
<a href="https://developer.mozilla.org/en-US/Firefox/Releases/25" title="Released on 2013-10-29.">25.0</a> (25.0)</td> <td><span style="color: #f00;">No support</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> </tr> </tbody> </table> </div> <div id="compat-mobile"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android</th> <th>Android Webview</th> <th>Firefox Mobile (Gecko)</th> <th>Firefox OS</th> <th>IE Phone</th> <th>Opera Mobile</th> <th>Safari Mobile</th> <th>Chrome for Android</th> </tr> <tr> <td>Basic support</td> <td><span style="color: #f00;">No support</span></td> <td>47.0</td> <td>
<a href="https://developer.mozilla.org/en-US/Firefox/Releases/25" title="Released on 2013-10-29.">25.0</a> (25.0)</td> <td>1.3<sup>[1]</sup>
</td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td>47.0</td> </tr> </tbody> </table> </div> <p>[1] The initial Firefox OS implementation only supported audio recording.</p> <p>[2] To use <a href="mediarecorder" title="The MediaRecorder interface of the MediaStream Recording API provides functionality to easily record media. It is created by the invocation of the MediaRecorder() constructor."><code>MediaRecorder</code></a> in Chrome 47 and 48, enable <strong>experimental Web Platform features</strong> from the <code>chrome://flags</code> page.</p> <p>[3] Audio recording works in Chrome 49 and above; Chrome 47 and 48 only support video recording.</p> <h2 id="See_also">See also</h2> <ul> <li><a href="mediastream_recording_api/using_the_mediastream_recording_api">Using the MediaStream Recording API</a></li> <li><a href="mediastream_recording_api/recording_a_media_element">Recording a media element</a></li> <li>
<a href="https://simpl.info/mediarecorder/">simpl.info MediaStream Recording demo</a>, by <a href="https://twitter.com/sw12">Sam Dutton</a>
</li> <li><a href="mediadevices/getusermedia" title="The MediaDevices.getUserMedia() method prompts the user for permission to use one video and/or one audio input device such as a camera or screensharing and/or a microphone. If the user provides permission, then the returned Promise is resolved with the resulting MediaStream object. If the user denies permission, or media is not available, then the promise is rejected with PermissionDeniedError or NotFoundError respectively. Note that it is possible for the returned promise to neither resolve nor reject, as the user is not required to make a choice."><code>navigator.mediaDevices.getUserMedia()</code></a></li> <li><a href="https://addpipe.com/blog/mediarecorder-api/">HTML5’s Media Recorder API in Action on Chrome and Firefox</a></li> <li>
<a href="https://github.com/chrisjohndigital/TutorRoom">TutorRoom</a>: HTML5 video capture/playback/download using getUserMedia and the MediaRecorder API (<a href="https://github.com/chrisjohndigital/TutorRoom">source on GitHub</a>)</li> <li>
<a href="https://www.fingerspell.org/">FingerSpell</a>: Sign Language Fingerspelling practice using getUserMedia and the MediaRecorder API to create and download recordings, MediaRecorder API supported desktop browsers only <a href="https://github.com/chrisjohndigital/CameraCaptureJS">(source on GitHub</a>)</li> <li><a href="http://codepen.io/anon/pen/gpmPzm">Simple video recording demo</a></li> <li><a href="https://quickblox.github.io/javascript-media-recorder/sample/">Advanced media stream recorder sample</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaStream_Recording_API$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaStream_Recording_API" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/MediaStream_Recording_API</a>
  </p>
</div>

<h1>Worker.onmessage</h1> <p>The <strong><code>onmessage</code></strong> property of the <a title="The Worker interface of the Web Workers API represents a background task that can be easily created and can send messages back to its creator. Creating a worker is as simple as calling the Worker() constructor and specifying a script to be run in the worker thread." href="../worker"><code>Worker</code></a> interface represents an <a title="A possible way to get notified of Events of a particular type (such as click) for a given object is to specify an event handler using:" href="https://developer.mozilla.org/en-US/docs/Web/API/EventHandler"><code>EventHandler</code></a>, that is a function to be called when the <code><a title="/en-US/docs/Web/Events/message" href="https://developer.mozilla.org/en-US/docs/Web/Events/message">message</a></code> event occurs. These events are of type <a title="A MessageEvent is the interface representing a message received by a target, being a WebSocket or a WebRTC RTCDataChannel" href="../messageevent"><code>MessageEvent</code></a> and will be called when the worker's parent receives a message (i.e. from the <a title="The postMessage() method of the DedicatedWorkerGlobalScope interface sends a message to the main thread that spawned it. This accepts a single parameter, which is the data to send to the worker. The data may be any value or JavaScript object handled by the structured clone algorithm, which includes cyclical references." href="../dedicatedworkerglobalscope/postmessage"><code>DedicatedWorkerGlobalScope.postMessage</code></a> method.</p> <div class="note"> <p><strong>Note</strong>: The message payload is available in the <code><a title="/en-US/docs/Web/Events/message" href="https://developer.mozilla.org/en-US/docs/Web/Events/message">message</a></code> event's <code>data</code> property.</p> </div> <h2 id="Syntax">Syntax</h2> <pre data-language="js">myWorker.onmessage = function(e) { ... }</pre> <h2 id="Example">Example</h2> <p>The following code snippet shows creation of a <a title="The Worker interface of the Web Workers API represents a background task that can be easily created and can send messages back to its creator. Creating a worker is as simple as calling the Worker() constructor and specifying a script to be run in the worker thread." href="../worker"><code>Worker</code></a> object using the <a title="The Worker() constructor creates a Worker object that executes the script at the specified URL. This script must obey the same-origin policy." href="worker"><code>Worker()</code></a> constructor. Messages are passed to the worker when the value inside the form input <code>first</code> changes. An onmessage handler is also present, to deal with messages are passed back from the worker.</p> <pre data-language="js">var myWorker = new Worker('worker.js');

first.onchange = function() {
  myWorker.postMessage([first.value,second.value]);
  console.log('Message posted to worker');
}

myWorker.onmessage = function(e) {
  result.textContent = e.data;
  console.log('Message received from worker');
}
</pre> <p>In the <code>worker.js</code> script, an <code>onmessage</code> handler is used the handle messages from the main script:</p> <pre data-language="js">onmessage = function(e) {
  console.log('Message received from main script');
  var workerResult = 'Result: ' + (e.data[0] * e.data[1]);
  console.log('Posting message back to main script');
  postMessage(workerResult);
}</pre> <p>Notice how in the main script, <code>onmessage</code> has to be called on <code>myWorker</code>, whereas inside the worker script you just need <code>onmessage</code> because the worker is effectively the global scope (<a title="The DedicatedWorkerGlobalScope object (the Worker global scope) is accessible through the self keyword. Some additional global functions, namespaces objects, and constructors, not typically associated with the worker global scope, but available on it, are listed in the JavaScript Reference. See also: Functions available to workers." href="../dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>).</p> <p>For a full example, see our<a href="https://github.com/mdn/simple-web-worker" class="external external-icon">Basic dedicated worker example</a> (<a href="http://mdn.github.io/simple-web-worker/" class="external external-icon">run dedicated worker</a>).</p> <h2 id="Specifications">Specifications</h2> <table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a lang="en" hreflang="en" href="https://html.spec.whatwg.org/multipage/#handler-worker-onmessage" class="external">WHATWG HTML Living Standard<br><small lang="en-US">The definition of 'Worker.onmessage' in that specification.</small></a></td> <td><span class="spec-Living">Living Standard</span></td> <td>No change from <a lang="en" title="The 'Web Workers' specification" class="external" href="https://w3c.github.io/workers/" hreflang="en">Web Workers</a>.</td> </tr> <tr> <td><a lang="en" hreflang="en" href="https://w3c.github.io/workers/#handler-worker-onmessage" class="external">Web Workers<br><small lang="en-US">The definition of 'Worker.onmessage' in that specification.</small></a></td> <td><span class="spec-ED">Editor's Draft</span></td> <td>Initial definition.</td> </tr> </tbody> </table> <h2 id="Browser_compatibility">Browser compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari (WebKit)</th> </tr> <tr> <td>Basic support</td> <td>4</td> <td>3.5</td> <td>10.0</td> <td>10.6</td> <td>4</td> </tr> </tbody> </table> </div> <div id="compat-mobile"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android</th> <th>Firefox Mobile (Gecko)</th> <th>Firefox OS (Gecko)</th> <th>IE Phone</th> <th>Opera Mobile</th> <th>Safari Mobile</th> </tr> <tr> <td>Basic support</td> <td>4.4</td> <td>3.5</td> <td>1.0.1</td> <td>10.0</td> <td>11.5</td> <td>5.1</td> </tr> </tbody> </table> </div> <h2 id="See_also">See also</h2> <p>The <a title="The Worker interface of the Web Workers API represents a background task that can be easily created and can send messages back to its creator. Creating a worker is as simple as calling the Worker() constructor and specifying a script to be run in the worker thread." href="../worker"><code>Worker</code></a> interface it belongs to.</p><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Worker/onmessage$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Worker/onmessage" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/Worker/onmessage</a>
  </p>
</div>

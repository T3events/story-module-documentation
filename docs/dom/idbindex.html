<h1>IDBIndex</h1> <p><span class="seoSummary"><code>IDBIndex</code> interface of the <a title="en/IndexedDB" href="https://developer.mozilla.org/en/IndexedDB">IndexedDB API</a> provides asynchronous access to an <a title="en/IndexedDB/Basic_Concepts_Behind_IndexedDB#gloss_index" href="https://developer.mozilla.org/en/IndexedDB/Basic_Concepts_Behind_IndexedDB#gloss_index">index</a> in a database. An index is a kind of object store for looking up records in another object store, called the referenced object store. You use this interface to retrieve data.</span></p> <p>You can retrieve records in an object store through the primary key or by using an index. An index lets you look up records in an object store using properties of the values in the object stores records other than the primary key</p> <p>The index is a persistent key-value storage where the value part of its records is the key part of a record in the referenced object store. The records in an index are automatically populated whenever records in the referenced object store are inserted, updated, or deleted. Each record in an index can point to only one record in its referenced object store, but several indexes can reference the same object store. When the object store changes, all indexes that refers to the object store are automatically updated.</p> <p><span style="line-height: 1.5;">You can grab a set of keys within a range. To learn more, see <a title="A key range can be a single value or a range with upper and lower bounds or endpoints. If the key range has both upper and lower bounds, then it is bounded; if it has no bounds, it is unbounded. A bounded key range can either be open (the endpoints are excluded) or closed (the endpoints are included). To retrieve all keys within a certain range, you can use the following code constructs:" href="idbkeyrange"><code>IDBKeyRange</code></a>.</span></p> <div class="note">
<strong>Note:</strong> This feature is available in <a href="web_workers_api">Web Workers</a>.</div> <h2 id="Methods">Methods</h2> <p>Inherits from: <a title="en/DOM/EventTarget" href="eventtarget">EventTarget</a></p> <dl> <dt><a title="A IDBRequest object on which subsequent events related to this operation are fired." href="idbindex/count"><code>IDBIndex.count()</code></a></dt> <dd>Returns an <a title="The request object does not initially contain any information about the result of the operation, but once information becomes available, an event is fired on the request, and the information becomes available through the properties of the IDBRequest instance." href="idbrequest"><code>IDBRequest</code></a> object, and in a separate thread, returns the number of records within a key range.</dd> <dt><a title="If a value is found, then a structured clone of it is created and set as the result of the request object: this returns the record the key is associated with." href="idbindex/get"><code>IDBIndex.get()</code></a></dt> <dd>Returns an <a title="The request object does not initially contain any information about the result of the operation, but once information becomes available, an event is fired on the request, and the information becomes available through the properties of the IDBRequest instance." href="idbrequest"><code>IDBRequest</code></a> object, and, in a separate thread, finds either the value in the referenced object store that corresponds to the given key or the first corresponding value, if <code>key</code> is an <a title="A key range can be a single value or a range with upper and lower bounds or endpoints. If the key range has both upper and lower bounds, then it is bounded; if it has no bounds, it is unbounded. A bounded key range can either be open (the endpoints are excluded) or closed (the endpoints are included). To retrieve all keys within a certain range, you can use the following code constructs:" href="idbkeyrange"><code>IDBKeyRange</code></a>.</dd> <dt><a title="If a key is found it is set as the result of the request object: this returns the primary key of the record the key is associated with, not the whole record as IDBIndex.get does." href="idbindex/getkey"><code>IDBIndex.getKey()</code></a></dt> <dd>Returns an <a title="The request object does not initially contain any information about the result of the operation, but once information becomes available, an event is fired on the request, and the information becomes available through the properties of the IDBRequest instance." href="idbrequest"><code>IDBRequest</code></a> object, and, in a separate thread, finds either the given key or the primary key, if <code>key</code> is an <a title="A key range can be a single value or a range with upper and lower bounds or endpoints. If the key range has both upper and lower bounds, then it is bounded; if it has no bounds, it is unbounded. A bounded key range can either be open (the endpoints are excluded) or closed (the endpoints are included). To retrieve all keys within a certain range, you can use the following code constructs:" href="idbkeyrange"><code>IDBKeyRange</code></a>.</dd> <dt><a title="There is a performance cost associated with looking at the value property of a cursor, because the object is created lazily. To use a feature like getAll(), the browser has to create all the objects at once. If you are just interested in looking at each of the keys, for instance, it is more efficient to use a cursor. If you are trying to get an array of all the objects in an object store, though, you should use getAll()." href="idbindex/getall"><code>IDBIndex.getAll()</code></a></dt> <dd>Returns an <a title="The request object does not initially contain any information about the result of the operation, but once information becomes available, an event is fired on the request, and the information becomes available through the properties of the IDBRequest instance." href="idbrequest"><code>IDBRequest</code></a> object, in a separate thread, finds all matching values in the referenced object store that correspond to the given key or are in range, if <code>key</code> is an <a title="A key range can be a single value or a range with upper and lower bounds or endpoints. If the key range has both upper and lower bounds, then it is bounded; if it has no bounds, it is unbounded. A bounded key range can either be open (the endpoints are excluded) or closed (the endpoints are included). To retrieve all keys within a certain range, you can use the following code constructs:" href="idbkeyrange"><code>IDBKeyRange</code></a>.</dd> <dt><a title="An IDBRequest object on which subsequent events related to this operation are fired." href="idbindex/getallkeys"><code>IDBIndex.getAllKeys()</code></a></dt> <dd>Returns an <a title="The request object does not initially contain any information about the result of the operation, but once information becomes available, an event is fired on the request, and the information becomes available through the properties of the IDBRequest instance." href="idbrequest"><code>IDBRequest</code></a> object, in a separate thread, finds all matching keys in the referenced object store that correspond to the given key or are in range, if <code>key</code> is an <a title="A key range can be a single value or a range with upper and lower bounds or endpoints. If the key range has both upper and lower bounds, then it is bounded; if it has no bounds, it is unbounded. A bounded key range can either be open (the endpoints are excluded) or closed (the endpoints are included). To retrieve all keys within a certain range, you can use the following code constructs:" href="idbkeyrange"><code>IDBKeyRange</code></a>.</dd> <dt><a title="The method sets the position of the cursor to the appropriate record, based on the specified direction." href="idbindex/opencursor"><code>IDBIndex.openCursor()</code></a></dt> <dd>Returns an <a title="The request object does not initially contain any information about the result of the operation, but once information becomes available, an event is fired on the request, and the information becomes available through the properties of the IDBRequest instance." href="idbrequest"><code>IDBRequest</code></a> object, and, in a separate thread, creates a <a title="en/IndexedDB#gloss cursor" href="https://developer.mozilla.org/en/IndexedDB#gloss_cursor">cursor</a> over the specified key range.</dd> <dt><a title="The method sets the position of the cursor to the appropriate key, based on the specified direction." href="idbindex/openkeycursor"><code>IDBIndex.openKeyCursor()</code></a></dt> <dd>Returns an <a title="The request object does not initially contain any information about the result of the operation, but once information becomes available, an event is fired on the request, and the information becomes available through the properties of the IDBRequest instance." href="idbrequest"><code>IDBRequest</code></a> object, and, in a separate thread, creates a cursor over the specified key range, as arranged by this index.</dd> </dl> <h2 id="Properties">Properties</h2> <dl> <dt>
<a title="The isAutoLocale read-only property of the IDBIndex interface returns a Boolean indicating whether the index had a locale value of auto specified upon its creation (see createIndex()'s optionalParameters.)" href="idbindex/isautolocale"><code>IDBIndex.isAutoLocale</code></a> <span title="This value may not be changed." class="inlineIndicator readOnly readOnlyInline">Read only </span> 
</dt> <dd>Returns a <a title="The Boolean object is an object wrapper for a boolean value." href="https://developer.mozilla.org/en-US/docs/Web/API/Boolean"><code>Boolean</code></a> indicating whether the index had a <code>locale</code> value of <code>auto</code> specified upon its creation (see <a href="idbobjectstore/createindex#Parameters"><code>createIndex()</code>'s optionalParameters</a>.)</dd> <dt>
<a title="The locale read-only property of the IDBIndex interface returns the locale of the index (for example en-US, or pl) if it had a locale value specified upon its creation (see createIndex()'s optionalParameters.) Note that this property always returns the current locale being used in this index, in other words, it never returns &quot;auto&quot;." href="idbindex/locale"><code>IDBIndex.locale</code></a> <span title="This value may not be changed." class="inlineIndicator readOnly readOnlyInline">Read only </span> 
</dt> <dd>Returns the locale of the index (for example <code>en-US</code>, or <code>pl</code>) if it had a <code>locale</code> value specified upon its creation (see <a href="idbobjectstore/createindex#Parameters"><code>createIndex()</code>'s optionalParameters</a>.)</dd> <dt><a title="A DOMString specifying a name for the index." href="idbindex/name"><code>IDBIndex.name</code></a></dt> <dd>The name of this index.</dd> <dt>
<a title="An IDBObjectStore." href="idbindex/objectstore"><code>IDBIndex.objectStore</code></a> <span title="This value may not be changed." class="inlineIndicator readOnly readOnlyInline">Read only </span>
</dt> <dd>The name of the object store referenced by this index.</dd> <dt>
<a title="Any data type that can be used as a key path." href="idbindex/keypath"><code>IDBIndex.keyPath</code></a> <span title="This value may not be changed." class="inlineIndicator readOnly readOnlyInline">Read only </span>
</dt> <dd>The <a title="en/IndexedDB#gloss key path" href="https://developer.mozilla.org/en/IndexedDB#gloss_key_path">key path</a> of this index. If null, this index is not <a title="en/IndexedDB/Index#gloss auto-populated" href="https://developer.mozilla.org/en/IndexedDB/Index#gloss_auto-populated">auto-populated</a>.</dd> <dt>
<a title="A Boolean:" href="idbindex/multientry"><code>IDBIndex.multiEntry</code></a> <span title="This value may not be changed." class="inlineIndicator readOnly readOnlyInline">Read only </span>
</dt> <dd>Affects how the index behaves when the result of evaluating the index's key path yields an array. If <code>true</code>, there is one record in the index for each item in an array of keys. If <code>false</code>, then there is one record for each key that is an array.</dd> <dt>
<a title="A Boolean:" href="idbindex/unique"><code>IDBIndex.unique</code></a> <span title="This value may not be changed." class="inlineIndicator readOnly readOnlyInline">Read only </span>
</dt> <dd>If <code>true</code>, this index does not allow duplicate values for a key.</dd> </dl> <h2 id="Example">Example</h2> <p>In the following example we open a transaction and an object store, then get the index <code>lName</code> from a simple contacts database. We then open a basic cursor on the index using <a title="The method sets the position of the cursor to the appropriate record, based on the specified direction." href="idbindex/opencursor"><code>IDBIndex.openCursor</code></a> — this works the same as opening a cursor directly on an <code>ObjectStore</code> using <a title="To determine if the add operation has completed successfully, listen for the results’s success event." href="idbobjectstore/opencursor"><code>IDBObjectStore.openCursor</code></a> except that the returned records are sorted based on the index, not the primary key.</p> <p>Finally, we iterate through each record, and insert the data into an HTML table. For a complete working example, see our <a href="https://mdn.github.io/indexeddb-examples/idbindex/">IDBIndex-example demo repo</a> (<a href="https://github.com/mdn/indexeddb-examples/tree/master/idbindex">View the example live</a>.)</p> <pre data-language="js">function displayDataByIndex() {
  tableEntry.innerHTML = '';
  var transaction = db.transaction(['contactsList'], 'readonly');
  var objectStore = transaction.objectStore('contactsList');

  var myIndex = objectStore.index('lName'); 
  myIndex.openCursor().onsuccess = function(event) {
    var cursor = event.target.result;
    if(cursor) {
      var tableRow = document.createElement('tr');
      tableRow.innerHTML =   '&lt;td&gt;' + cursor.value.id + '&lt;/td&gt;'
                           + '&lt;td&gt;' + cursor.value.lName + '&lt;/td&gt;'
                           + '&lt;td&gt;' + cursor.value.fName + '&lt;/td&gt;'
                           + '&lt;td&gt;' + cursor.value.jTitle + '&lt;/td&gt;'
                           + '&lt;td&gt;' + cursor.value.company + '&lt;/td&gt;'
                           + '&lt;td&gt;' + cursor.value.eMail + '&lt;/td&gt;'
                           + '&lt;td&gt;' + cursor.value.phone + '&lt;/td&gt;'
                           + '&lt;td&gt;' + cursor.value.age + '&lt;/td&gt;';
      tableEntry.appendChild(tableRow);  

      cursor.continue();
    } else {
      console.log('Entries all displayed.');    
    }
  };
};</pre> <h2 id="Specification">Specification</h2> <table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a lang="en" hreflang="en" href="https://www.w3.org/TR/IndexedDB/#idl-def-IDBIndex" class="external">Indexed Database API<br><small lang="en-US">The definition of 'IDBIndex' in that specification.</small></a></td> <td><span class="spec-REC">Recommendation</span></td> <td> </td> </tr> </tbody> </table> <h2 name="Browser_compatibility" id="Browser_compatibility">Browser compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Edge</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari (WebKit)</th> </tr> <tr> <td>Basic support</td> <td>23.0<span title="prefix" class="inlineIndicator prefixBox prefixBoxInline"><a title="The name of this feature is prefixed with 'webkit' as this browser considers it experimental" href="https://developer.mozilla.org/en-US/docs/Web/Guide/Prefixes">webkit</a></span><br> 24.0</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>10 <span title="prefix" class="inlineIndicator prefixBox prefixBoxInline"><a title="The name of this feature is prefixed with 'moz' as this browser considers it experimental" href="https://developer.mozilla.org/en-US/docs/Web/Guide/Prefixes">moz</a></span><br> <a title="Released on 2012-10-09." href="https://developer.mozilla.org/en-US/Firefox/Releases/16">16.0</a> (16.0)</td> <td>10, partial</td> <td>15</td> <td>7.1</td> </tr> <tr> <td><code>count()</code></td> <td>23.0</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>
<a title="Released on 2013-06-25." href="https://developer.mozilla.org/en-US/Firefox/Releases/22">22.0</a> (22.0)</td> <td>10, partial</td> <td>15</td> <td>7.1</td> </tr> <tr> <td>
<code>getAll()</code> and <code>getAllKeys()</code>
</td> <td>48.0</td> <td><span style="color: #f00;">No support</span></td> <td>
<a title="Released on 2013-09-17." href="https://developer.mozilla.org/en-US/Firefox/Releases/24">24.0</a> (24.0)<br> behind <code>dom.indexedDB.experimental</code> pref</td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> </tr> <tr> <td>Available in workers</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>
<a title="Released on 2015-04-07." href="https://developer.mozilla.org/en-US/Firefox/Releases/37">37.0</a> (37.0)</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> </tr> <tr> <td>
<code>isAutoLocale</code> and <code>locale</code>
</td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td> <p><a title="Released on 2015-12-15." href="https://developer.mozilla.org/en-US/Firefox/Releases/43">43.0</a> (43.0)<br> behind <code>dom.indexedDB.experimental</code> pref</p> </td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> </tr> <tr> <td>
<code>name</code> setter available</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>
<a title="Released on 2016-09-13." href="https://developer.mozilla.org/en-US/Firefox/Releases/49">49</a> (49)</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> </tr> </tbody> </table> </div> <div id="compat-mobile"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android</th> <th>Android Webview</th> <th>Edge</th> <th>Firefox Mobile (Gecko)</th> <th>Firefox OS</th> <th>IE Phone</th> <th>Opera Mobile</th> <th>Safari Mobile</th> <th>Chrome for Android</th> </tr> <tr> <td>Basic support</td> <td>4.4</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>22.0 (22.0)</td> <td>1.0.1</td> <td>10</td> <td>22</td> <td><span style="color: #f00;">No support</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> </tr> <tr> <td><code>count()</code></td> <td>4.4</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>22.0 (22.0)</td> <td>1.0.1</td> <td>10</td> <td>22</td> <td><span style="color: #f00;">No support</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> </tr> <tr> <td>
<code>getAll()</code> and <code>getAllKeys()</code>
</td> <td><span style="color: #f00;">No support</span></td> <td>48.0</td> <td><span style="color: #f00;">No support</span></td> <td>24.0 (24.0)<br> behind <code>dom.indexedDB.experimental</code> pref</td> <td>1.1 behind<br> <code>dom.indexedDB.experimental</code> pref</td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td>48.0</td> </tr> <tr> <td>Available in workers</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>37.0 (37.0)</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> </tr> <tr> <td>
<code>isAutoLocale</code> and <code>locale</code>
</td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td>43.0 (43.0)<br> behind <code>dom.indexedDB.experimental</code> pref</td> <td>2.5<br> behind <code>dom.indexedDB.experimental</code> pref</td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> </tr> <tr> <td>
<code>name</code> setter available</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>49.0 (49)</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> </tr> </tbody> </table> </div> <h2 id="See_also">See also</h2> <ul> <li><a href="indexeddb_api/using_indexeddb">Using IndexedDB</a></li> <li>Starting transactions: <a title="Inherits from: EventTarget" href="idbdatabase"><code>IDBDatabase</code></a>
</li> <li>Using transactions: <a title="Note that as of Firefox 40, IndexedDB transactions have relaxed durability guarantees to increase performance (see bug 1112702.) Previously in a readwrite transaction IDBTransaction.oncomplete was fired only when all data was guaranteed to have been flushed to disk. In Firefox 40+ the complete event is fired after the OS has been told to write the data but potentially before that data has actually been flushed to disk. The complete event may thus be delivered quicker than before, however, there exists a small chance that the entire transaction will be lost if the OS crashes or there is a loss of system power before the data is flushed to disk. Since such catastrophic events are rare most consumers should not need to concern themselves further." href="idbtransaction"><code>IDBTransaction</code></a>
</li> <li>Setting a range of keys: <a title="A key range can be a single value or a range with upper and lower bounds or endpoints. If the key range has both upper and lower bounds, then it is bounded; if it has no bounds, it is unbounded. A bounded key range can either be open (the endpoints are excluded) or closed (the endpoints are included). To retrieve all keys within a certain range, you can use the following code constructs:" href="idbkeyrange"><code>IDBKeyRange</code></a>
</li> <li>Retrieving and making changes to your data: <a title="This example shows a variety of different uses of object stores, from updating the data structure with IDBObjectStore.createIndex inside an onupgradeneeded function, to adding a new item to our object store with IDBObjectStore.add. For a full working example, see our To-do Notifications app (view example live.)" href="idbobjectstore"><code>IDBObjectStore</code></a>
</li> <li>Using cursors: <a title="The IDBCursor interface of the IndexedDB API represents a cursor for traversing or iterating over multiple records in a database." href="idbcursor"><code>IDBCursor</code></a>
</li> <li>Reference example: <a href="https://github.com/mdn/to-do-notifications/tree/gh-pages" class="external">To-do Notifications</a> (<a href="http://mdn.github.io/to-do-notifications/" class="external">view example live</a>.)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/IDBIndex$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/IDBIndex" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/IDBIndex</a>
  </p>
</div>

<h1>RTCPeerConnection.onconnectionstatechange</h1><div class="notice experimental"> <p> <strong>This is an experimental technology</strong><br>Because this technology's specification has not stabilized, check the <a href="#Browser_compatibility">compatibility table</a> for usage in various browsers. Also note that the syntax and behavior of an experimental technology is subject to change in future versions of browsers as the specification changes.</p> </div> <p><span class="seoSummary">The <strong><code>RTCPeerConnection.onconnectionstatechange</code></strong> property specifies an <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventHandler" title="A possible way to get notified of Events of a particular type (such as click) for a given object is to specify anÂ event handler using:"><code>EventHandler</code></a> which is called to handle the <code><a href="https://developer.mozilla.org/en-US/docs/Web/Events/connectionstatechange" title="/en-US/docs/Web/Events/connectionstatechange">connectionstatechange</a></code> event when it occurs on an instance of <a href="../rtcpeerconnection" title="The RTCPeerConnection interface represents a WebRTC connection between the local computer and a remote peer. It provides methods to connect to a remote peer, maintain and monitor the connection, and close the connection once it's no longer needed."><code>RTCPeerConnection</code></a>. This happens whenever the aggregate state of the connection changes.</span> The aggregate state is a combination of the states of all of the individual network transports being used by the connection.</p> <h2 id="Syntax">Syntax</h2> <pre class="syntaxbox"><em>RTCPeerConnection</em>.onconnectionstatechange = <em>eventHandler</em>;
</pre> <h3 id="Value">Value</h3> <p>A function which is called by the browser when the <code><a href="https://developer.mozilla.org/en-US/docs/Web/Events/connectionstatechange" title="/en-US/docs/Web/Events/connectionstatechange">connectionstatechange</a></code> event occurs on the <a href="../rtcpeerconnection" title="The RTCPeerConnection interface represents a WebRTC connection between the local computer and a remote peer. It provides methods to connect to a remote peer, maintain and monitor the connection, and close the connection once it's no longer needed."><code>RTCPeerConnection</code></a>. The function receives as input a single parameter, which is an object of type <a href="../event" title="The Event interface represents any event which takes place in the DOM; some are user-generated (such as mouse or keyboard events), while others are generated by APIs (such as events that indicate an animation has finished running, a video has been paused, and so forth). There are many types of event, some of which use are other interfaces based on the main Event interface. Event itself contains the properties and methods which are common to all events."><code>Event</code></a>. The event object contains no special information of note; you can look at the value of the peer connection's <a href="connectionstate" title="The read-only connectionState property of the RTCPeerConnection interface indicates the current state of the peer connection by returning one of the string values specified by the enum RTCPeerConnectionState."><code>connectionState</code></a> property to determine what the new state is.</p> <h2 id="Example">Example</h2> <pre data-language="js">pc.onconnectionstatechange = function(event) {
  switch(pc.connectionState) {
    case "connected":
      // The connection has become fully connected
      break;
    case "disconnected":
    case "failed":
      // One or more transports has terminated unexpectedly or in an error
      break;
    case "closed":
      // The connection has been closed
      break;
  }
}</pre> <h2 id="Specifications">Specifications</h2> <table class="standard-table"> <thead> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> </thead> <tbody> <tr> <td><a href="https://w3c.github.io/webrtc-pc/#widl-RTCPeerConnection-onconnectionstatechange" class="external" lang="en" hreflang="en">WebRTC 1.0: Real-time Communication Between Browsers<br><small lang="en-US">The definition of 'RTCPeerConnection.onconnectionstatechange' in that specification.</small></a></td> <td><span class="spec-WD">Working Draft</span></td> <td>Initial specification.</td> </tr> </tbody> </table> <h2 id="Browser_compatibility">Browser compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari</th> </tr> <tr> <td>Basic support</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>
<span style="color: #f00;">No support</span> [1]</td> <td><span style="color: #f00;">No support</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> </tr> </tbody> </table> </div> <div id="compat-mobile"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android</th> <th>Chrome for Android</th> <th>Firefox Mobile (Gecko)</th> <th>IE Mobile</th> <th>Opera Mobile</th> <th>Safari Mobile</th> </tr> <tr> <td>Basic support</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td>
<span style="color: #f00;">No support</span> [1]</td> <td><span style="color: #f00;">No support</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> </tr> </tbody> </table> </div> <p>[1] See <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1265827" title="Add support for RTCPeerConnectionState in RTCPeerConnection">bug 1265827</a> to track the status of implementing this event and the <a href="connectionstate" title="The read-only connectionState property of the RTCPeerConnection interface indicates the current state of the peer connection by returning one of the string values specified by the enum RTCPeerConnectionState."><code>RTCPeerConnection.connectionState</code></a> property.</p> <h2 id="See_also">See also</h2> <ul> <li>The <code><a href="https://developer.mozilla.org/en-US/docs/Web/Events/connectionstatechange" title="/en-US/docs/Web/Events/connectionstatechange">connectionstatechange</a></code> event and its type, <a href="../event" title="The Event interface represents any event which takes place in the DOM; some are user-generated (such as mouse or keyboard events), while others are generated by APIs (such as events that indicate an animation has finished running, a video has been paused, and so forth). There are many types of event, some of which use are other interfaces based on the main Event interface. Event itself contains the properties and methods which are common to all events."><code>Event</code></a>.</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/onconnectionstatechange$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/onconnectionstatechange" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/onconnectionstatechange</a>
  </p>
</div>

<h1>RTCPeerConnection.createDataChannel</h1><div class="notice experimental"> <p> <strong>This is an experimental technology</strong><br>Because this technology's specification has not stabilized, check the <a href="#Browser_compatibility">compatibility table</a> for usage in various browsers. Also note that the syntax and behavior of an experimental technology is subject to change in future versions of browsers as the specification changes.</p> </div> <p>The <code>createDataChannel()</code> method on the <a title="The RTCPeerConnection interface represents a WebRTC connection between the local computer and a remote peer. It provides methods to connect to a remote peer, maintain and monitor the connection, and close the connection once it's no longer needed." href="../rtcpeerconnection"><code>RTCPeerConnection</code></a> interface creates a new channel over which any kind of data may be transmitted. This can be useful for back-channel content such as images, file transfer, text chat, game update packets, and so forth.</p> <p>If the new data channel is the first one added to the connection, renegotiation is started by delivering a <code><a title="/en-US/docs/Web/Events/notificationneeded" href="https://developer.mozilla.org/en-US/docs/Web/Events/notificationneeded">notificationneeded</a></code> event.</p> <h2 id="Syntax">Syntax</h2> <pre class="syntaxbox"><em>dataChannel</em> = <em>RTCPeerConnection</em>.createDataChannel(<em>label</em>[, <em>options</em>]);</pre> <h3 id="Parameters" class="syntaxbox">Parameters</h3> <dl> <dt><code>label</code></dt> <dd>A human-readable name for the channel. <code>null</code> is treated as if you specified an empty string (""). This string may not be longer than 65,535 <em>bytes</em>.</dd> <dt>
<code>options</code> <span class="inlineIndicator optional optionalInline">Optional</span>
</dt> <dd>An <a href="#RTCDataChannelInit_dictionary"><code>RTCDataChannelInit</code> dictionary</a> providing configuration options for the data channel</dd> </dl> <h3 id="RTCDataChannelInit_dictionary">RTCDataChannelInit dictionary</h3> <p>The <code>RTCDataChannelInit</code> dictionary provides the following fields, any of which may be included as needed in the object passed as the options parameter in order to configure the data channel to suit your needs:</p> <dl> <dt>
<code>ordered</code> <span class="inlineIndicator optional optionalInline">Optional</span>
</dt> <dd>Indicates whether or not messages sent on the <a title="The RTCDataChannel interface represents a bi-directional data channel between two peers of a connection." href="../rtcdatachannel"><code>RTCDataChannel</code></a> are required to arrive at their destination in the same order in which they were sent (<code>true</code>), or if they're allowed to arrive out-of-order (<code>false</code>). <strong>Default: <code>true</code>.</strong>
</dd> <dt><strong><code>maxPacketLifeTime</code> <span class="inlineIndicator optional optionalInline">Optional</span></strong></dt> <dd>The maximum number of milliseconds that attempts to transfer a message may take in unreliable mode. While this value is a 16-bit unsigned number, each user agent may clamp it to whatever maximum it deems appropriate. <strong>Default: <code>null</code>.</strong>
</dd> <dt>
<code>maxRetransmits</code> <span class="inlineIndicator optional optionalInline">Optional</span>
</dt> <dd>The maximum number of times the user agent should attempt to retransmit a message which fails the first time in unreliable mode. While this value is a16-bit unsigned number, each user agent may clamp it to whatever maximum it deems appropriate. <strong>Default: <code>null</code>.</strong>
</dd> <dt>
<code>protocol</code> <span class="inlineIndicator optional optionalInline">Optional</span>
</dt> <dd>The name of the sub-protocol being used on the <a title="The RTCDataChannel interface represents a bi-directional data channel between two peers of a connection." href="../rtcdatachannel"><code>RTCDataChannel</code></a>, if any; otherwise, the empty string (""). <strong>Default: empty string, <code>""</code>. </strong> This string may not be longer than 65,535 <em>bytes</em>.</dd> <dt>
<code>negotiated</code> <span class="inlineIndicator optional optionalInline">Optional</span>
</dt> <dd>Indicates whether or not the two peers negotiated when creating the data channel (<code>true</code>), or if the channel was simply created by one of the peers, letting the other peer choose to accept the connection or not when it receives the resulting <a title="The RTCDataChannelEvent interface represents events that occurÂ while attaching a RTCDataChannel to a RTCPeerConnection. The only event sent with this interface is datachannel." href="../rtcdatachannelevent"><code>RTCDataChannelEvent</code></a> (<code>false</code>). <strong>Default: <code>false</code>.</strong>
</dd> <dt>
<code>id</code> <span class="inlineIndicator optional optionalInline">Optional</span>
</dt> <dd>A 16-bit numeric ID for the channel. If you don't include this option, the user agent will select an ID for you.</dd> </dl> <div class="note"> <p>The options which can be configured using the <code>RTCDataChannelInit</code> dictionary represent the script-settable subset of the properties on the <a title="The RTCDataChannel interface represents a bi-directional data channel between two peers of a connection." href="../rtcdatachannel"><code>RTCDataChannel</code></a> interface.</p> </div> <h3 id="Return_value">Return value</h3> <p>A new <a title="The RTCDataChannel interface represents a bi-directional data channel between two peers of a connection." href="../rtcdatachannel"><code>RTCDataChannel</code></a> object with the specified <code>label</code>, configured using the options specified by <code>options</code> if that parameter is included; otherwise, the defaults listed above are established.</p> <h3 id="Exceptions">Exceptions</h3> <dl> <dt><code>InvalidStateError</code></dt> <dd>The <a title="The RTCPeerConnection interface represents a WebRTC connection between the local computer and a remote peer. It provides methods to connect to a remote peer, maintain and monitor the connection, and close the connection once it's no longer needed." href="../rtcpeerconnection"><code>RTCPeerConnection</code></a> is closed.</dd> <dt><code>TypeError</code></dt> <dd>The label and/or protocol string is too long; these cannot be longer than 65,535 bytes (bytes, rather than characters).</dd> <dt><code>SyntaxError</code></dt> <dd>Values were specified for both the <code>maxPacketLifeTime</code> and <code>maxRetransmits</code> options. You may only specify a non-<code>null</code> value for one of these.</dd> <dt><code>ResourceInUse</code></dt> <dd>An <code>id</code> was specified, but another <a title="The RTCDataChannel interface represents a bi-directional data channel between two peers of a connection." href="../rtcdatachannel"><code>RTCDataChannel</code></a> is already using the same value.</dd> </dl> <h2 id="Example">Example</h2> <p>This simple example opens a channel and sets up handlers for the <code><a title="/en-US/docs/Web/Events/open" href="https://developer.mozilla.org/en-US/docs/Web/Events/open">open</a></code> and <code><a title="/en-US/docs/Web/Events/message" href="https://developer.mozilla.org/en-US/docs/Web/Events/message">message</a></code> events to send and receive messages on the data channel. For a more thorough example showing how the connection and channel are established, see <a href="../webrtc_api/simple_rtcdatachannel_sample">A simple RTCDataChannel sample</a>.</p> <pre data-language="js">var pc = new RTCPeerConnection();
var channel = pc.createDataChannel("Mydata");
channel.onopen = function(event) {
  channel.send('sending a message');
}
channel.onmessage = function(event) {
  console.log(event.data);
}</pre> <h2 id="Specifications">Specifications</h2> <table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a hreflang="en" class="external" lang="en" href="https://w3c.github.io/webrtc-pc/#widl-RTCPeerConnection-createDataChannel-RTCDataChannel-DOMString-label-RTCDataChannelInit-dataChannelDict">WebRTC 1.0: Real-time Communication Between Browser<br><small lang="en-US">The definition of 'createDataChannel()' in that specification.</small></a></td> <td><span class="spec-WD">Working Draft</span></td> <td>Initial definition.</td> </tr> </tbody> </table> <h2 id="Browser_compatibility">Browser compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari (WebKit)</th> </tr> <tr> <td>Basic support</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>
<a title="Released on 2013-06-25." href="https://developer.mozilla.org/en-US/Firefox/Releases/22">22</a> (22)</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> </tr> </tbody> </table> </div> <div id="compat-mobile"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android</th> <th>Android Webview</th> <th>Firefox Mobile (Gecko)</th> <th>Firefox OS</th> <th>IE Mobile</th> <th>Opera Mobile</th> <th>Safari Mobile</th> <th>Chrome for Android</th> </tr> <tr> <td>Basic support</td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td>24.0 (24)</td> <td>
<span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span> [2]</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> </tr> </tbody> </table> </div> <h2 id="See_also">See also</h2> <ul> <li><a title="The RTCDataChannel interface represents a bi-directional data channel between two peers of a connection." href="../rtcdatachannel"><code>RTCDataChannel</code></a></li> <li><a href="../webrtc_api/simple_rtcdatachannel_sample">A simple RTCDataChannel sample</a></li> <li><a title="The RTCPeerConnection interface represents a WebRTC connection between the local computer and a remote peer. It provides methods to connect to a remote peer, maintain and monitor the connection, and close the connection once it's no longer needed." href="../rtcpeerconnection"><code>RTCPeerConnection</code></a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/createDataChannel$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/createDataChannel" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/createDataChannel</a>
  </p>
</div>

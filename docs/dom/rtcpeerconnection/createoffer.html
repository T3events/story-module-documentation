<h1>RTCPeerConnection.createOffer</h1><div class="notice experimental"> <p> <strong>This is an experimental technology</strong><br>Because this technology's specification has not stabilized, check the <a href="#Browser_compatibility">compatibility table</a> for usage in various browsers. Also note that the syntax and behavior of an experimental technology is subject to change in future versions of browsers as the specification changes.</p> </div> <p>The <strong><code>createOffer()</code></strong> method of the <a title="The RTCPeerConnection interface represents a WebRTC connection between the local computer and a remote peer. It provides methods to connect to a remote peer, maintain and monitor the connection, and close the connection once it's no longer needed." href="../rtcpeerconnection"><code>RTCPeerConnection</code></a> interface initiates the creation of an <a title="SDP: SDP (Session Description Protocol) is the standard describing a peer-to-peer connection. SDP contains the codec, source address, and timing information of audio and video." href="https://developer.mozilla.org/en-US/docs/Glossary/SDP" class="glossaryLink">SDP</a> offer which includes information about any <a title="The MediaStreamTrack interface represents a single media track within a stream; typically, these are audio or video tracks, but other track types may exist as well." href="../mediastreamtrack"><code>MediaStreamTrack</code></a>s already attached to the WebRTC session, codec and options supported by the browser, and any candidates already gathered by the <a title="ICE: ICE (Interactive Connectivity Establishment) is a framework used by WebRTC (among other technologies) for connecting two peers to each other, regardless of network topology (usually for audio and/or video chat). This protocol lets two peers find and establish a connection with one another even though they may both be using Network Address Translator (NAT) to share a global IP address with other devices on their respective local networks." href="https://developer.mozilla.org/en-US/docs/Glossary/ICE" class="glossaryLink">ICE</a> agent, for the purpose of being sent over the signaling channel to a potential peer to request a connection or to update the configuration of an existing connection.</p> <p>The return value is a <a title="The Promise interface represents a proxy for a value not necessarily known at its creation time. It allows you to associate handlers to an asynchronous action's eventual success or failure. This lets asynchronous methods return values like synchronous methods: instead of the final value, the asynchronous method returns a promise of having a value at some point in the future." href="https://developer.mozilla.org/en-US/docs/Web/API/Promise"><code>Promise</code></a> which, when the offer has been created, is resolved with a <a title="The RTCSessionDescription interface represents the parameters of a session. Each RTCSessionDescription consists of a description type indicating which part of the offer/answer negotiation process it describes and of the SDP descriptor of the session." href="../rtcsessiondescription"><code>RTCSessionDescription</code></a> object containing the newly-created offer.</p> <h2 id="Syntax">Syntax</h2> <pre class="syntaxbox"><em>aPromise</em> = <em>myPeerConnection</em>.createOffer([<em>options</em>]);

<em>myPeerConnection</em>.createOffer(<em>successCallback</em>, <em>failureCallback, </em>[<em>options</em>]) 
</pre> <h3 id="Parameters">Parameters</h3> <dl> <dt>
<code>options</code> <span class="inlineIndicator optional optionalInline">Optional</span>
</dt> <dd>An <code><a href="#RTCOfferOptions_dictionary">RTCOfferOptions</a></code> dictionary providing options requested for the offer.</dd> </dl> <h3 id="RTCOfferOptions_dictionary">RTCOfferOptions dictionary</h3> <p>The <code>RTCOfferOptions</code> dictionary is used to customize the offer created by this method.</p> <dl> <dt>iceRestart <span class="inlineIndicator optional optionalInline">Optional</span>
</dt> <dd>To restart ICE on an active connection, set this to <code>true</code>. This will cause the returned offer to have different credentials than those already in place. If you then apply the returned offer, ICE will restart. Specify <code>false</code> to keep the same credentials and therefore not restart ICE. <strong>The default is <code>false</code></strong>.</dd> <dt>
<code>voiceActivityDetection</code> <span class="inlineIndicator optional optionalInline">Optional</span>
</dt> <dd>Some codecs and hardware are able to detect when audio begins and ends by watching for "silence" (or relatively low sound levels) to occur. This reduces network bandwidth used for audio by only sending audio data when there's actually something to broadcast. However, in some cases, this is unwanted. For example, in the case of music or other non-voice transmission, this can cause loss of important low-volume sounds. Also, emergency calls should never cut audio when quiet. <strong>This option defaults to <code>true</code></strong> (voice activity detection <em>enabled</em>).</dd> </dl> <dl> <dt> <h3 id="Deprecated_parameters">Deprecated parameters</h3> </dt> </dl> <p>In older code and documentation, you may see a callback-based version of this function. This has been deprecated and its use is <strong>strongly</strong> discouraged. You should update any existing code to use the <a title="The Promise object is used for asynchronous computations. A Promise represents a value which may be available now, or in the future, or never." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a>-based version of <code>createOffer()</code> instead. The parameters for this form of <code>createOffer()</code> are described below, to aid in updating existing code.</p> <dl> <dt>
<code>successCallback</code> 
</dt> <dd>An <a title="The documentation about this has not yet been written; please consider contributing!" href="https://developer.mozilla.org/en-US/docs/Web/API/RTCSessionDescriptionCallback"><code>RTCSessionDescriptionCallback</code></a> which will be passed a single <a title="The RTCSessionDescription interface represents the parameters of a session. Each RTCSessionDescription consists of a description type indicating which part of the offer/answer negotiation process it describes and of the SDP descriptor of the session." href="../rtcsessiondescription"><code>RTCSessionDescription</code></a> object describing the newly-created offer.</dd> <dt>
<code>errorCallback</code> 
</dt> <dd>An <a title="The documentation about this has not yet been written; please consider contributing!" href="https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnectionErrorCallback"><code>RTCPeerConnectionErrorCallback</code></a> which will be passed a single <a title="The DOMError interface describes an error object that contains an error name." href="../domerror"><code>DOMError</code></a> object explaining why the request to create an offer failed.</dd> <dt>
<code>options</code> <span class="inlineIndicator optional optionalInline">Optional</span>
</dt> <dd>An optional <code><a href="#RTCOfferOptions_dictionary">RTCOfferOptions</a></code> dictionary providing options requested for the offer.</dd> </dl> <h3 id="Return_value">Return value</h3> <p>A <a title="The Promise object is used for asynchronous computations. A Promise represents a value which may be available now, or in the future, or never." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> whose fulfillment handler will receive an <a title="The RTCSessionDescription interface represents the parameters of a session. Each RTCSessionDescription consists of a description type indicating which part of the offer/answer negotiation process it describes and of the SDP descriptor of the session." href="../rtcsessiondescription"><code>RTCSessionDescription</code></a> which contains the SDP describing the generated offer. That received offer should be delivered through the signaling server to a remote peer.</p> <h2 id="Example">Example</h2> <p>Here we see a handler for the <code><a title="/en-US/docs/Web/Events/negotiationneeded" href="https://developer.mozilla.org/en-US/docs/Web/Events/negotiationneeded">negotiationneeded</a></code> event which creates the offer and sends it to the remote system over a signaling channel.</p> <div class="note"> <p>Keep in mind that this is part of the signaling process, the transport layer for which is an implementation detail that's entirely up to you. In this case, a <a href="../websocket_api">WebSocket</a> connection is used to send a <a title="JSON: The JavaScript Object Notation (JSON) is a data-interchange format.  Although not a strict subset, JSON closely resembles a subset of JavaScript syntax. Though many programming languages support JSON, JSON is especially useful for JavaScript-based apps, including websites and browser extensions." href="https://developer.mozilla.org/en-US/docs/Glossary/JSON" class="glossaryLink">JSON</a> message with a <code>type</code> field with the value "video-offer" to the other peer. The contents of the object being passed to the <code>sendToServer()</code> function, along with everything else in the promise fulfillment handler, depend entirely on your design.</p> </div> <pre data-language="js">  myPeerConnection.createOffer().then(function(offer) {
    return myPeerConnection.setLocalDescription(offer);
  })
  .then(function() {
    sendToServer({
      name: myUsername,
      target: targetUsername,
      type: "video-offer",
      sdp: myPeerConnection.localDescription
    });
  })
  .catch(function(reason) {
    // An error occurred, so handle the failure to connect
  });</pre> <p>In this code, the offer is created, and once successful, the local end of the <a title="The RTCPeerConnection interface represents a WebRTC connection between the local computer and a remote peer. It provides methods to connect to a remote peer, maintain and monitor the connection, and close the connection once it's no longer needed." href="../rtcpeerconnection"><code>RTCPeerConnection</code></a> is configured to match by calling <a title="The RTCPeerConnection.setLocalDescription() method changes the local description associated with the connection. This description specifies the properties of the local end of the connection, including the media format." href="setlocaldescription"><code>setLocalDescription()</code></a>. Once that's done, the offer is sent to the remote system over the signaling channel; in this case, by using a custom function called <code>sendToServer()</code>. The implementation of the signaling server is independent from the WebRTC specification, so it doesn't matter how the offer is sent as long as both the caller and potential receiver are using the same one.</p> <p>Use <a title="The catch() method returns a Promise and deals with rejected cases only. It behaves the same as calling Promise.prototype.then(undefined, onRejected)." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch"><code>Promise.catch()</code></a> to trap and handle errors.</p> <p>See <a href="../webrtc_api/signaling_and_video_calling">Signaling and video calling</a> for the complete example from which this snippet is derived; this will help you to understand how the signaling code here works.</p> <h2 id="Specifications">Specifications</h2> <table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a lang="en" hreflang="en" href="https://w3c.github.io/webrtc-pc/#widl-RTCPeerConnection-createOffer-Promise-RTCSessionDescription--RTCOfferOptions-options" class="external">WebRTC 1.0: Real-time Communication Between Browser<br><small lang="en-US">The definition of 'createOffer()' in that specification.</small></a></td> <td><span class="spec-WD">Working Draft</span></td> <td>Initial definition.</td> </tr> </tbody> </table> <h2 id="Browser_compatibility">Browser compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Edge</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari (WebKit)</th> </tr> <tr> <td>Basic support</td> <td>
<span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span><sup>[1]</sup>
</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>
<a title="Released on 2013-06-25." href="https://developer.mozilla.org/en-US/Firefox/Releases/22">22</a> (22)<sup>[2][3]</sup>
</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> </tr> <tr> <td>Promise-based version</td> <td>52.0</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> </tr> </tbody> </table> </div> <div id="compat-mobile"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android</th> <th>Android Webview</th> <th>Edge</th> <th>Firefox Mobile (Gecko)</th> <th>Firefox OS</th> <th>IE Mobile</th> <th>Opera Mobile</th> <th>Safari Mobile</th> <th>Chrome for Android</th> </tr> <tr> <td>Basic support</td> <td><span style="color: #f00;">No support</span></td> <td>
<span style="color: #f00;">No support</span><sup>[1]</sup>
</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>24.0 (24)<sup>[2]</sup>
</td> <td>
<span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span> [2]</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td>
<span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span> [1]</td> </tr> <tr> <td>Promise-based version</td> <td><span style="color: #f00;">No support</span></td> <td>52.0</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td>52.0</td> </tr> </tbody> </table> </div> <p>[1] The callback-based version of this method was deprecated in Chrome 49.</p> <p>[2] The callback-based version of this method was deprecated in Firefox 37.</p> <p>[3] Starting in Firefox 46, VP9 support was added, but disabled by default. To enable it, set the preference <code>media.peerconnection.video.vp9_enabled</code> to <code>true</code> using <code>about:config</code>. If you enable VP9 in Firefox 46 through Firefox 50, it's the preferred video codec. Starting in Firefox 51, it's enabled by default but VP8 is preferred.</p><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/createOffer$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/createOffer" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/createOffer</a>
  </p>
</div>

<h1>Frame Timing API</h1><div><div class="notice experimental"> <p> <strong>This is an experimental technology</strong><br>Because this technology's specification has not stabilized, check the <a href="#Browser_compatibility">compatibility table</a> for usage in various browsers. Also note that the syntax and behavior of an experimental technology is subject to change in future versions of browsers as the specification changes.</p> </div></div> <p>The <strong><code>PerformanceFrameTiming</code></strong> interface provides <em>frame</em> timing data about the browser's event loop. A <em>frame</em> represents the amount of work a browser does in <a href="https://html.spec.whatwg.org/multipage/webappapis.html#processing-model-8">one event loop iteration</a> such as processing DOM events, resizing, scrolling, rendering, CSS animations, etc. A <em>frame rate</em> of 60 fps (frames per second) for a 60 Hz refresh rate is a common target for a good <em>responsive</em> user experience. This means the browser should process a frame in about 16.7 ms.</p> <p>An application can register a <a href="performanceobserver" title="The PerformanceObserver interface is used to observe performance measurement events and be notified of new performance entries as they are recorded in the browser's performance timeline."><code>PerformanceObserver</code></a> for "<code>frame</code>" <a href="performanceentry" title="The PerformanceEntry object encapsulates a single performance metric that is part of the performance timeline. A performance entry can be directly created by making a performance mark or measure (for example by calling the mark() method) at an explicit point in an application. Performance entries are also created in indirect ways such as loading a resource (such as an image)."><code>performance entry types</code></a>. The <em>observer</em> (callback) will be notified when new "<code>frame</code>" events are added to the browser's <em>performance timeline</em> and the frame's <a href="performanceentry/duration" title="The duration property returns a timestamp that is the duration of the performance entry."><code>duration</code></a> (length of time) will be available. This data can be used to help identify areas that take too long to provide a good user experience.</p> <p>Example code of the interfaces described in this document is included in <em><a href="https://developer.mozilla.org/Web/API/Frame_Timing_API/Using_the_Frame_Timing_API">Using the Frame Timing API</a></em>.</p> <h2 id="Performance_frames">Performance <code>frames</code>
</h2> <p>The <a href="performanceframetiming" title="The PerformanceFrameTiming interface provides frame timing data about the browser's event loop. A frame represents the amount of work a browser does in one event loop such as processing DOM events, resizing, scrolling, rendering, CSS animations, etc. A frame rate of 60fps (frames per second) for a 60Hz refresh rate is the target for a good responsive user experience. This means the browser should process a frame in about 16.7ms."><code>PerformanceFrameTiming</code></a> interface extends the following <a href="performanceentry" title="The PerformanceEntry object encapsulates a single performance metric that is part of the performance timeline. A performance entry can be directly created by making a performance mark or measure (for example by calling the mark() method) at an explicit point in an application. Performance entries are also created in indirect ways such as loading a resource (such as an image)."><code>PerformanceEntry</code></a> properties (for "<code>frame</code>" <a href="performanceentry/entrytype" title="The entryType property returns the performance entry's type. The valid entryType values are:"><code>performance entry types</code></a>) by qualifying and constrainting the properties as follows:</p> <dl> <dt><a href="performanceentry/entrytype" title="The entryType property returns the performance entry's type. The valid entryType values are:"><code>PerformanceEntry.entryType</code></a></dt> <dd>Set to "<code>frame</code>".</dd> <dt><a href="performanceentry/name" title="The name property returns the name given to a performance entry when the entry was created (for example by calling performance.mark())."><code>PerformanceEntry.name</code></a></dt> <dd>Set to the <a href="https://dom.spec.whatwg.org/#concept-document-url">document's address</a>.</dd> <dt><a href="performanceentry/starttime" title="The startTime property returns the first recorded timestamp of the performance entry."><code>PerformanceEntry.startTime</code></a></dt> <dd>Set to the <a href="domhighrestimestamp" title="The DOMHighResTimeStamp type is a double and is used to store a time value. The value could be a discrete point in time or the difference in time between two discrete points in time. The unit is milliseconds and should be accurate to 5 µs (microseconds). However, if the browser is unable to provide a time value accurate to 5 microseconds (because, for example, due to hardware or software constraints), the browser can represent the value as a time in milliseconds accurate to a millisecond."><code>DOMHighResTimeStamp</code></a> when the frame was started.</dd> <dt><a href="performanceentry/duration" title="The duration property returns a timestamp that is the duration of the performance entry."><code>PerformanceEntry.duration</code></a></dt> <dd>Set to a <a href="domhighrestimestamp" title="The DOMHighResTimeStamp type is a double and is used to store a time value. The value could be a discrete point in time or the difference in time between two discrete points in time. The unit is milliseconds and should be accurate to 5 µs (microseconds). However, if the browser is unable to provide a time value accurate to 5 microseconds (because, for example, due to hardware or software constraints), the browser can represent the value as a time in milliseconds accurate to a millisecond."><code>timestamp</code></a> indicating the difference between the <code>startTime</code>s of two successive frames.</dd> </dl> <p>This data, particularly the <code>duration</code> timestamp, can be used to help identify performance problems.</p> <h2 id="Frame_observers">Frame observers</h2> <p>The <em>performance observer</em> interfaces allow an application to register an <em>observer</em> for specific <a href="performanceentry" title="The PerformanceEntry object encapsulates a single performance metric that is part of the performance timeline. A performance entry can be directly created by making a performance mark or measure (for example by calling the mark() method) at an explicit point in an application. Performance entries are also created in indirect ways such as loading a resource (such as an image)."><code>performance event types</code></a>. When one of those event types is recorded in the browser's <em>performance timeline</em>, the application is notified of the event via the observer's callback function that was specified when the observer was created.</p> <p>To observe "<code>frame</code>" performance entry types, the application first creates a <a href="performanceobserver" title="The PerformanceObserver interface is used to observe performance measurement events and be notified of new performance entries as they are recorded in the browser's performance timeline."><code>PerformanceObserver</code></a> object with a specific frame observer callback (function). Next, <a href="performanceobserver/observe" title="The observe() method is used to specify the set of performance interface types to observe. The performance observer's callback function will be invoked when a performance entry is recorded for one of the specified types."><code>PerformanceObserver.observe()</code></a> is used to specify the set of performance events to observe - in this case, just the "<code>frame</code>" event type. When the browser adds a new frame to the performance timeline, the specified observer callback will be invoked.</p> <h2 id="Accessing_frame_data">Accessing frame data</h2> <p>When a frame <a href="performanceobserver" title="The PerformanceObserver interface is used to observe performance measurement events and be notified of new performance entries as they are recorded in the browser's performance timeline."><code>observer</code></a> is invoked, frame <a href="performanceentry" title="The PerformanceEntry object encapsulates a single performance metric that is part of the performance timeline. A performance entry can be directly created by making a performance mark or measure (for example by calling the mark() method) at an explicit point in an application. Performance entries are also created in indirect ways such as loading a resource (such as an image)."><code>performance entries</code></a> can be retrieved by calling <a href="performanceobserverentrylist/getentriesbytype" title="The getEntriesByType() method returns a list of explicitly observed performance entry objects for a given performance entry type. The list's members are determined by the set of entry types specified in the call to the observe() method. The list is available in the observer's callback function (as the first parameter in the callback)."><code>PerformanceObserverEntryList.getEntriesByType()</code></a> with an argument of "<code>frame</code>". This method returns a list of "<code>frame</code>" <a href="performanceentry" title="The PerformanceEntry object encapsulates a single performance metric that is part of the performance timeline. A performance entry can be directly created by making a performance mark or measure (for example by calling the mark() method) at an explicit point in an application. Performance entries are also created in indirect ways such as loading a resource (such as an image)."><code>PerformanceEntry</code></a> objects. Each frame object's <a href="performanceentry/duration" title="The duration property returns a timestamp that is the duration of the performance entry."><code>duration</code></a> property returns the timestamp of two consecutive frames. If this value is greater than the time needed to provide a good user experience, further analysis might be warranted.</p> <h2 id="Browser_compatibility">Browser compatibility</h2> <p>As shown in the <a href="performanceframetiming" title="The PerformanceFrameTiming interface provides frame timing data about the browser's event loop. A frame represents the amount of work a browser does in one event loop such as processing DOM events, resizing, scrolling, rendering, CSS animations, etc. A frame rate of 60fps (frames per second) for a 60Hz refresh rate is the target for a good responsive user experience. This means the browser should process a frame in about 16.7ms."><code>PerformanceFrameTiming</code></a> interface's <a href="https://developer.mozilla.org/Web/API/PerformanceFrameTiming#Browser_compatibility">Browser Compatibility</a> table, this interface has no implementations.</p> <h2 id="See_also">See also</h2> <ul> <li><a href="https://developer.mozilla.org/docs/Tools/Performance/Frame_rate">Frame Rate (Firefox Performance Tool)</a></li> <li><a href="https://developer.mozilla.org/Web/API/Frame_Timing_API/Using_the_Frame_Timing_API">Using the Frame Timing API</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Frame_Timing_API$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Frame_Timing_API" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/Frame_Timing_API</a>
  </p>
</div>

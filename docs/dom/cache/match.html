<h1>Cache.match</h1><div class="notice experimental"> <p> <strong>This is an experimental technology</strong><br>Because this technology's specification has not stabilized, check the <a href="#Browser_compatibility">compatibility table</a> for usage in various browsers. Also note that the syntax and behavior of an experimental technology is subject to change in future versions of browsers as the specification changes.</p> </div> <p>The <strong><code>match()</code></strong> method of the <a title="The Cache interface provides a storage mechanism for Request / Response object pairs that are cached, for example as part of the ServiceWorker life cycle. Note that the Cache interface is exposed to windowed scopes as well as workers. You don't have to use it in conjunction with service workers, even though it is defined in the service worker spec." href="../cache"><code>Cache</code></a> interface returns a <a title="The Promise object is used for asynchronous computations. A Promise represents a value which may be available now, or in the future, or never." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> that resolves to the <a title="The Response interface of the Fetch API represents the response to a request." href="../response"><code>Response</code></a> associated with the first matching request in the <a title="The Cache interface provides a storage mechanism for Request / Response object pairs that are cached, for example as part of the ServiceWorker life cycle. Note that the Cache interface is exposed to windowed scopes as well as workers. You don't have to use it in conjunction with service workers, even though it is defined in the service worker spec." href="../cache"><code>Cache</code></a> object. If no match is found, the <a title="The Promise object is used for asynchronous computations. A Promise represents a value which may be available now, or in the future, or never." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> resolves to <a title="The global undefined property represents the primitive value undefined. It is one of JavaScript's primitive types." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined"><code>undefined</code></a>.</p> <h2 id="Syntax">Syntax</h2> <pre data-language="js">cache.match(request,{options}).then(function(response) {
  //do something with the response
});
</pre> <h3 id="Returns">Returns</h3> <p>A <a title="The Promise object is used for asynchronous computations. A Promise represents a value which may be available now, or in the future, or never." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> that resolves to the first <a title="The Response interface of the Fetch API represents the response to a request." href="../response"><code>Response</code></a> that matches the request or to <a title="The global undefined property represents the primitive value undefined. It is one of JavaScript's primitive types." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined"><code>undefined</code></a> if no match is found.</p> <div class="note"> <p><strong>Note</strong>: <code>Cache.match()</code> is basically identical to <a title="The matchAll() method of the Cache interface returns a Promise that resolves to an array of all matching requests in the Cache object." href="matchall"><code>Cache.matchAll()</code></a>, except <code>Cache.match()</code> resolves with <code>response[0]</code> (the first matching response) instead of <code>response[]</code> (all matching response in an array).</p> </div> <h3 id="Parameters">Parameters</h3> <dl> <dt>request</dt> <dd>The <a title="The Request interface of the Fetch API represents a resource request." href="../request"><code>Request</code></a> you are attempting to find in the <a title="The Cache interface provides a storage mechanism for Request / Response object pairs that are cached, for example as part of the ServiceWorker life cycle. Note that the Cache interface is exposed to windowed scopes as well as workers. You don't have to use it in conjunction with service workers, even though it is defined in the service worker spec." href="../cache"><code>Cache</code></a>.</dd> <dt>options <span class="inlineIndicator optional optionalInline">Optional</span>
</dt> <dd>An object that sets options for the <code>match</code> operation. The available options are: <ul> <li>
<code>ignoreSearch</code>: A <a title="The Boolean object is an object wrapper for a boolean value." href="https://developer.mozilla.org/en-US/docs/Web/API/Boolean"><code>Boolean</code></a> that specifies whether to ignore the query string in the url. For example, if set to <code>true</code> the <code>?value=bar</code> part of <code>http://foo.com/?value=bar</code> would be ignored when performing a match. It defaults to <code>false</code>.</li> <li>
<code>ignoreMethod</code>: A <a title="The Boolean object is an object wrapper for a boolean value." href="https://developer.mozilla.org/en-US/docs/Web/API/Boolean"><code>Boolean</code></a> that, when set to <code>true</code>, prevents matching operations from validating the <a title="The Request interface of the Fetch API represents a resource request." href="../request"><code>Request</code></a> <code>http</code> method (normally only <code>GET</code> and <code>HEAD</code> are allowed.) It defaults to <code>false</code>.</li> <li>
<code>ignoreVary</code>: A <a title="The Boolean object is an object wrapper for a boolean value." href="https://developer.mozilla.org/en-US/docs/Web/API/Boolean"><code>Boolean</code></a> that when set to <code>true</code> tells the matching operation not to perform <code>VARY</code> header matching â€” i.e. if the URL matches you will get a match regardless of whether the <a title="The Response interface of the Fetch API represents the response to a request." href="../response"><code>Response</code></a> object has a <code>VARY</code> header. It defaults to <code>false</code>.</li> <li>
<code>cacheName</code>: A <a title="DOMString is a UTF-16 String. As JavaScript already uses such strings, DOMString is mapped directly to a String." href="../domstring"><code>DOMString</code></a> that represents a specific cache to search within. Note that this option is ignored by <code>Cache.match()</code>.</li> </ul> </dd> </dl> <h2 id="Examples">Examples</h2> <p>This example is taken from the <a href="https://github.com/GoogleChrome/samples/blob/gh-pages/service-worker/custom-offline-page/service-worker.js">custom offline page</a> example (<a href="https://googlechrome.github.io/samples/service-worker/custom-offline-page/index.html">live demo</a>).</p> <p>The following example uses a cache to supply selected data when a request fails. A <code>catch()</code> clause is triggered when the call to <code>fetch()</code> throws an exception. Inside the <code>catch()</code> clause, <code>match()</code> is used to return the correct response.</p> <p> In this example, we decided that only HTML documents retrieved with the GET HTTP verb will be cached. <span style="line-height: 19.0909080505371px;">If our <code>if()</code> condition is false, then this fetch handler won't intercept the request. If there are any other fetch handlers registered, they will get a chance to call <code>event.respondWith()</code>. If no fetch handlers call <code>event.respondWith()</code>, the request will be handled by the browser as if there were no service worker involvement. If </span><code style="font-style: normal; line-height: 19.0909080505371px;">fetch()</code><span style="line-height: 19.0909080505371px;"> returns a valid HTTP response with an response code in the 4xx or 5xx range, the </span><code style="font-style: normal; line-height: 19.0909080505371px;">catch()</code><span style="line-height: 19.0909080505371px;"> will NOT be called. </span></p> <pre data-language="js">self.addEventListener('fetch', function(event) {
  // We only want to call event.respondWith() if this is a GET request for an HTML document.
  if (event.request.method === 'GET' &amp;&amp;
      event.request.headers.get('accept').indexOf('text/html') !== -1) {
    console.log('Handling fetch event for', event.request.url);
    event.respondWith(
      fetch(event.request).catch(function(e) {
        console.error('Fetch failed; returning offline page instead.', e);
        return caches.open(OFFLINE_CACHE).then(function(cache) {
          return cache.match(OFFLINE_URL);
        });
      })
    );
  }
});</pre> <h2 id="Specifications">Specifications</h2> <table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a lang="en" hreflang="en" href="https://www.w3.org/TR/service-workers/#cache" class="external">Service Workers<br><small lang="en-US">The definition of 'Cache' in that specification.</small></a></td> <td><span class="spec-WD">Working Draft</span></td> <td>Initial definition.</td> </tr> </tbody> </table> <h2 id="Browser_compatibility">Browser compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari (WebKit)</th> </tr> <tr> <td>Basic support</td> <td>40.0 [1]</td> <td>
<a title="Released on 2015-06-30." href="https://developer.mozilla.org/en-US/Firefox/Releases/39">39</a> (39)<sup>[2]</sup>
</td> <td><span style="color: #f00;">No support</span></td> <td>24</td> <td><span style="color: #f00;">No support</span></td> </tr> <tr> <td>All options supported</td> <td>54.0</td> <td> </td> <td> </td> <td>41</td> <td> </td> </tr> </tbody> </table> </div> <div id="compat-mobile"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android</th> <th>Android Webview</th> <th>Firefox Mobile (Gecko)</th> <th>Firefox OS</th> <th>IE Mobile</th> <th>Opera Mobile</th> <th>Safari Mobile</th> <th>Chrome for Android</th> </tr> <tr> <td>Basic support</td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td>39.0 (39)</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span style="color: #f00;">No support</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span style="color: #f00;">No support</span></td> <td>40.0 [1]</td> </tr> <tr> <td>All options supported</td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td> </td> <td> </td> <td> </td> <td>41</td> <td> </td> <td>54.0</td> </tr> </tbody> </table> </div> <ul> <li>[1] The options parameter only supports <code>ignoreSearch</code>, and <code>cacheName</code>. </li> <li>[2] Service workers (and <a href="../push_api">Push</a>) have been disabled in the <a href="https://www.mozilla.org/en-US/firefox/organizations/">Firefox 45 Extended Support Release</a> (ESR.)</li> </ul> <h2 id="See_also">See also</h2> <ul> <li><a href="../service_worker_api/using_service_workers">Using Service Workers</a></li> <li><a title="The Cache interface provides a storage mechanism for Request / Response object pairs that are cached, for example as part of the ServiceWorker life cycle. Note that the Cache interface is exposed to windowed scopes as well as workers. You don't have to use it in conjunction with service workers, even though it is defined in the service worker spec." href="../cache"><code>Cache</code></a></li> <li><a title="Technical review completed." href="../windoworworkerglobalscope/caches"><code>WorkerGlobalScope.caches</code></a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Cache/match$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Cache/match" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/Cache/match</a>
  </p>
</div>

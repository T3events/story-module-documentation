<h1>MediaKeySession</h1><div class="notice experimental"> <p> <strong>This is an experimental technology</strong><br>Because this technology's specification has not stabilized, check the <a href="#Browser_compatibility">compatibility table</a> for usage in various browsers. Also note that the syntax and behavior of an experimental technology is subject to change in future versions of browsers as the specification changes.</p> </div> <p>The <code><strong>MediaKeySession</strong></code> interface of the <a href="encrypted_media_extensions_api">EncryptedMediaExtensions API</a> represents a context for message exchange with a content decryption module (CDM).</p> <h2 id="Properties">Properties</h2> <dl> <dt>
<a title="The MediaKeySession.closed read-only property returns a Promise signaling when a MediaKeySession closes. This promise can only be fulfilled and is never rejected. Closing a session means that licenses and keys associated with it are no longer valid for decrypting media data." href="mediakeysession/closed"><code>MediaKeySession.closed</code></a> <span title="This value may not be changed." class="inlineIndicator readOnly readOnlyInline">Read only </span>
</dt> <dd>Returns a <a title="The Promise object is used for asynchronous computations. A Promise represents a value which may be available now, or in the future, or never." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> signaling when a MediaKeySession closes. This promise can only be fulfilled and is never rejected. Closing a session means that licenses and keys associated with it are no longer valid for decrypting media data. </dd> <dt>
<a title="The MediaKeySession.expiration read-only property returns the time after which the keys in the current session can no longer be used to decrypt media data, or NaN if no such time exists. This value is determined by the CDM and measured in milliseconds since January 1, 1970, UTC. This value may change during a session lifetime, such as when an action triggers the start of a window." href="mediakeysession/expiration"><code>MediaKeySession.expiration</code></a> <span title="This value may not be changed." class="inlineIndicator readOnly readOnlyInline">Read only </span>
</dt> <dd>The time after which the keys in the current session can no longer be used to decrypt media data, or NaN if no such time exists. This value is determined by the CDM and measured in milliseconds since January 1, 1970, UTC. This value may change during a session lifetime, such as when an action triggers the start of a window.</dd> <dt>
<a title="The MediaKeySession.keyStatuses read-only property returns a reference to a read-only MediaKeyStatusMap of the current session's keys and their statuses." href="mediakeysession/keystatuses"><code>MediaKeySession.keyStatuses</code></a> <span title="This value may not be changed." class="inlineIndicator readOnly readOnlyInline">Read only </span>
</dt> <dd>Contains a reference to a read-only <a title="The MediaKeyStatusMap interface of the EncryptedMediaExtensions API is a read-only map of media key statuses by key IDs." href="mediakeystatusmap"><code>MediaKeyStatusMap</code></a> of the current session's keys and their statuses.</dd> <dt>
<a title="The MediaKeySession.sessionId read-only property contains a unique string generated by the CDM for the current media object and its associated keys or licenses." href="mediakeysession/sessionid"><code>MediaKeySession.sessionId</code></a> <span title="This value may not be changed." class="inlineIndicator readOnly readOnlyInline">Read only </span>
</dt> <dd>Contains a unique string generated by the CDM for the current media object and its associated keys or licenses.</dd> </dl> <h3 id="Event_handlers">Event handlers</h3> <dl> <dt><a title="The onkeystatuseschange property of the MediaKeySession is an event handler fired whenever a keystatuschange event ocurrs — when there has been a change in the keys in a session or their statuses." href="mediakeysession/onkeystatuseschange"><code>MediaKeySession.onkeystatuseschange</code></a></dt> <dd>Sets the <a title="A possible way to get notified of Events of a particular type (such as click) for a given object is to specify an event handler using:" href="https://developer.mozilla.org/en-US/docs/Web/API/EventHandler"><code>EventHandler</code></a> called when there has been a change in the keys in a session or their statuses.</dd> <dt><a title="The onmessage property of the MediaKeySession is an event handler fired whenever a MediaKeyMessageEvent ocurrs — when a message is generated by the content decryption module." href="mediakeysession/onmessage"><code>MediaKeySession.onmessage</code></a></dt> <dd>Sets the <a title="A possible way to get notified of Events of a particular type (such as click) for a given object is to specify an event handler using:" href="https://developer.mozilla.org/en-US/docs/Web/API/EventHandler"><code>EventHandler</code></a> called when the content decryption module has generated a message for the session.</dd> </dl> <h2 id="Methods">Methods</h2> <dl> <dt><a title="The MediaKeySession.close() method notifies that the current media session is no longer needed, and that the content decryption module should release any resources associated with this object and close it. Then, it returns a Promise." href="mediakeysession/close"><code>MediaKeySession.close()</code></a></dt> <dd> <p class="p1">Returns a <a title="The Promise object is used for asynchronous computations. A Promise represents a value which may be available now, or in the future, or never." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> after notifying the current media session is no longer needed and that the CDM should release any resources associated with this object and close it.</p> </dd> <dt><a title="The MediaKeySession.generateRequest() method returns a Promise after generating a media request based on initialization data." href="mediakeysession/generaterequest"><code>MediaKeySession.generateRequest()</code></a></dt> <dd>Returns a <a title="The Promise object is used for asynchronous computations. A Promise represents a value which may be available now, or in the future, or never." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> after generating a media request based on initialization data.</dd> <dt><a title="The MediaKeySession.load() method returns a Promise that resolves to a boolean value after loading data for a specified session object." href="mediakeysession/load"><code>MediaKeySession.load()</code></a></dt> <dd>Returns a <a title="The Promise object is used for asynchronous computations. A Promise represents a value which may be available now, or in the future, or never." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> that resolves to a boolean value after loading data for a specified session object. </dd> <dt><a title="The MediaKeySession.remove() method returns a Promise after removing any session data associated with the current object." href="mediakeysession/remove"><code>MediaKeySession.remove()</code></a></dt> <dd>Returns a <a title="The Promise object is used for asynchronous computations. A Promise represents a value which may be available now, or in the future, or never." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> after removing any session data associated with the current object.</dd> <dt><a title="The MediaKeySession.update() method loads messages and licenses to the CDM, and then returns a Promise ." href="mediakeysession/update"><code>MediaKeySession.update()</code></a></dt> <dd>Returns a <a title="The Promise object is used for asynchronous computations. A Promise represents a value which may be available now, or in the future, or never." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> after loading messages and licenses to the CDM.</dd> </dl> <h2 id="Examples">Examples</h2> <pre data-language="js">// TBD</pre> <h2 id="Specifications">Specifications</h2> <table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a hreflang="en" class="external" lang="en" href="https://w3c.github.io/encrypted-media/#mediakeysession-interface">Encrypted Media Extensions<br><small lang="en-US">The definition of 'MediaKeySession' in that specification.</small></a></td> <td><span class="spec-WD">Working Draft</span></td> <td>Initial definition.</td> </tr> </tbody> </table> <h2 id="Browser_compatibility">Browser compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Edge</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari (WebKit)</th> </tr> <tr> <td>Basic support</td> <td>42.0</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> </tr> <tr> <td>
<code>onkeystatuseschange</code> and <code>onmessage</code>
</td> <td>55.0</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td>42</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> </tr> </tbody> </table> </div> <div id="compat-mobile"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android</th> <th>Android Webview</th> <th>Edge</th> <th>Firefox Mobile (Gecko)</th> <th>Firefox OS</th> <th>IE Mobile</th> <th>Opera Mobile</th> <th>Safari Mobile</th> <th>Chrome for Android</th> </tr> <tr> <td>Basic support</td> <td><span style="color: #f00;">No support</span></td> <td>43.0</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td>42.0</td> </tr> <tr> <td>
<code>onkeystatuseschange</code> and <code>onmessage</code>
</td> <td><span style="color: #f00;">No support</span></td> <td>55.0</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td>42</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td>55.0</td> </tr> </tbody> </table> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaKeySession$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaKeySession" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/MediaKeySession</a>
  </p>
</div>

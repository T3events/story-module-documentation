<h1>ServiceWorkerMessageEvent</h1><div><div class="notice experimental"> <p> <strong>This is an experimental technology</strong><br>Because this technology's specification has not stabilized, check the <a href="#Browser_compatibility">compatibility table</a> for usage in various browsers. Also note that the syntax and behavior of an experimental technology is subject to change in future versions of browsers as the specification changes.</p> </div></div>  <p>The <strong><code>ServiceWorkerMessageEvent</code></strong> interface of the <a title="The documentation about this has not yet been written; please consider contributing!" href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API"><code>ServiceWorker API</code></a> contains information about an event sent to a <a title="The ServiceWorkerContainer interface of the ServiceWorker API provides an object representing the service worker as an overall unit in the network ecosystem, including facilities to register, unregister and update service workers, and access the state of service workers and their registrations." href="serviceworkercontainer"><code>ServiceWorkerContainer</code></a> target. This extends the default <code><a title="/en-US/docs/Web/Events/message" href="https://developer.mozilla.org/en-US/docs/Web/Events/message">message</a></code> event to allow setting a <a title="The ServiceWorker interface of the ServiceWorker API provides a reference to a service worker. Multiple browsing contexts (e.g. pages, workers, etc.) can be associated with the same service worker, each through a unique ServiceWorker object." href="serviceworker"><code>ServiceWorker</code></a> object as the source of a message. The event object is accessed via the handler function of a <code><a title="/en-US/docs/Web/Events/message_(ServiceWorker)" href="https://developer.mozilla.org/en-US/docs/Web/Events/message_(ServiceWorker)">message</a></code> event, when fired by a message received from a service worker.</p> <p>This interface inherits from the <a title="The Event interface represents any event which takes place in the DOM; some are user-generated (such as mouse or keyboard events), while others are generated by APIs (such as events that indicate an animation has finished running, a video has been paused, and so forth). There are many types of event, some of which use are other interfaces based on the main Event interface. Event itself contains the properties and methods which are common to all events." href="event"><code>Event</code></a> interface.</p> <h2 id="Constructor">Constructor</h2> <dl> <dt><a title="The ServiceWorkerMessageEvent() constructor creates a new ServiceWorkerMessageEvent object instance." href="serviceworkermessageevent/serviceworkermessageevent"><code>ServiceWorkerMessageEvent.ServiceWorkerMessageEvent()</code></a></dt> <dd>Creates a new <code>ServiceWorkerMessageEvent</code> object instance.</dd> </dl> <h2 id="Properties">Properties</h2> <p><em>Inherits properties from its parent, </em><em><a title="The Event interface represents any event which takes place in the DOM; some are user-generated (such as mouse or keyboard events), while others are generated by APIs (such as events that indicate an animation has finished running, a video has been paused, and so forth). There are many types of event, some of which use are other interfaces based on the main Event interface. Event itself contains the properties and methods which are common to all events." href="event"><code>Event</code></a></em>.</p> <dl> <dt>
<a title="The data read-only property of the ServiceWorkerMessageEvent interface returns the event's data. It can be any data type." href="serviceworkermessageevent/data"><code>ServiceWorkerMessageEvent.data</code></a> <span title="This value may not be changed." class="inlineIndicator readOnly readOnlyInline">Read only </span>
</dt> <dd>Returns the event's data. It can be any data type.</dd> <dt>
<a title="The origin read-only property of the ServiceWorkerMessageEvent interface returns the origin of the service worker's environment settings object." href="serviceworkermessageevent/origin"><code>ServiceWorkerMessageEvent.origin</code></a> <span title="This value may not be changed." class="inlineIndicator readOnly readOnlyInline">Read only </span>
</dt> <dd>Returns the origin of the service worker's environment settings object.</dd> <dt>
<a title="The lastEventID read-only property of the ServiceWorkerMessageEvent interface represents, in server-sent events, the last event ID of the event source." href="serviceworkermessageevent/lasteventid"><code>ServiceWorkerMessageEvent.lastEventId</code></a> <span title="This value may not be changed." class="inlineIndicator readOnly readOnlyInline">Read only </span>
</dt> <dd>Represents, in <a href="https://developer.mozilla.org/en-US/docs/Web/API/en-US/docs/Server-sent_events/Using_server-sent_events">server-sent events</a>, the last event ID of the event source.</dd> <dt>
<a title="The source read-only property of the ServiceWorkerMessageEvent returns a reference to the ServiceWorker object of the associated service worker that sent the message." href="serviceworkermessageevent/source"><code>ServiceWorkerMessageEvent.source</code></a> <span title="This value may not be changed." class="inlineIndicator readOnly readOnlyInline">Read only </span>
</dt> <dd>Returns a reference to the service worker that sent the message.</dd> <dt>
<a title="The ports read-only property of the ServiceWorkerMessageEvent interface returns an array of MessagePort objects connected with the message channel the message is being sent through." href="serviceworkermessageevent/ports"><code>ServiceWorkerMessageEvent.ports</code></a> <span title="This value may not be changed." class="inlineIndicator readOnly readOnlyInline">Read only </span>
</dt> <dd>Returns an array of <a title="The MessagePort interface of the Channel Messaging API represents one of the two ports of a MessageChannel, allowing sending of messages from one port and listening out for them arriving at the other." href="messageport"><code>MessagePort</code></a> objects.</dd> </dl> <h2 id="Methods">Methods</h2> <p><em>Inherits methods from its parent, </em><em><a title="The Event interface represents any event which takes place in the DOM; some are user-generated (such as mouse or keyboard events), while others are generated by APIs (such as events that indicate an animation has finished running, a video has been paused, and so forth). There are many types of event, some of which use are other interfaces based on the main Event interface. Event itself contains the properties and methods which are common to all events." href="event"><code>Event</code></a></em>.</p> <h2 id="Examples">Examples</h2> <p>When the following code is used inside the main thread to set up a message channel between it and a service worker for sending messages between the two, the event object of <code>onmessage</code> will be a <code>ServiceWorkerMessageEvent</code>.</p> <pre data-language="js">navigator.serviceWorker.ready.then(function(reg) {  

  ...

      // set up a message channel to communicate with the SW
      var channel = new MessageChannel();
      channel.port1.onmessage = function(e) {
        console.log(e);
        handleChannelMessage(e.data);
      }
      
      mySW = reg.active;
      mySW.postMessage('hello', [channel.port2]);
  });</pre> <h2 id="Specifications">Specifications</h2> <table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a lang="en" hreflang="en" href="https://www.w3.org/TR/service-workers/#serviceworkermessage-event-section" class="external">Service Workers<br><small lang="en-US">The definition of 'ServiceWorkerMessageEvent' in that specification.</small></a></td> <td><span class="spec-WD">Working Draft</span></td> <td>Initial definition.</td> </tr> </tbody> </table> <h2 id="Browser_compatibility">Browser compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari (WebKit)</th> </tr> <tr> <td>Basic support</td> <td>45.0</td> <td>
<a title="Released on 2016-01-26." href="https://developer.mozilla.org/en-US/Firefox/Releases/44">44.0</a> (44.0)<sup>[1]</sup>
</td> <td><span style="color: #f00;">No support</span></td> <td>24</td> <td><span style="color: #f00;">No support</span></td> </tr> </tbody> </table> </div> <div id="compat-mobile"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android</th> <th>Android Webview</th> <th>Firefox Mobile (Gecko)</th> <th>Firefox OS</th> <th>IE Mobile</th> <th>Opera Mobile</th> <th>Safari Mobile</th> <th>Chrome for Android</th> </tr> <tr> <td>Basic support</td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span style="color: #f00;">No support</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span style="color: #f00;">No support</span></td> <td>45.0</td> </tr> </tbody> </table> </div> <p>[1] Service workers (and <a href="push_api">Push</a>) have been disabled in the <a href="https://www.mozilla.org/en-US/firefox/organizations/">Firefox 45 Extended Support Release</a> (ESR.)</p> <h2 id="See_also">See also</h2> <ul> <li><a href="service_worker_api/using_service_workers">Using Service Workers</a></li> <li><a href="https://github.com/mdn/sw-test" class="external external-icon">Service workers basic code example</a></li> <li><a href="https://jakearchibald.github.io/isserviceworkerready/" class="external external-icon">Is ServiceWorker ready?</a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Performance/Using_web_workers">Using web workers</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerMessageEvent$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerMessageEvent" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerMessageEvent</a>
  </p>
</div>

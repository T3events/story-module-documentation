<h1>DedicatedWorkerGlobalScope.onmessage</h1>  <p>The <strong><code>onmessage</code></strong> property of the <a title="The DedicatedWorkerGlobalScope object (the Worker global scope) is accessible through the self keyword. Some additional global functions, namespaces objects, and constructors, not typically associated with the worker global scope, but available on it, are listed in the JavaScript Reference. See also: Functions available to workers." href="../dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a> interface represents an <a title="The documentation about this has not yet been written; please consider contributing!" href="https://developer.mozilla.org/en-US/docs/Web/API/EventHandler"><code>EventHandler</code></a> to be called when the <code><a title="/en-US/docs/Web/Events/message" href="https://developer.mozilla.org/en-US/docs/Web/Events/message">message</a></code> event occurs and bubbles through the <a title="The Worker interface of the Web Workers API represents a background task that can be easily created and can send messages back to its creator. Creating a worker is as simple as calling the Worker() constructor and specifying a script to be run in the worker thread." href="../worker"><code>Worker</code></a> — i.e. when a message is sent to the worker using the <a title="The postMessage() method of the Worker interface sends a message to the worker's inner scope. This accepts a single parameter, which is the data to send to the worker. The data may be any value or JavaScript object handled by the structured clone algorithm, which includes cyclical references." href="../worker/postmessage"><code>Worker.postMessage</code></a> method.</p> <h2 id="Syntax">Syntax</h2> <pre>self.onmessage = function() { ... };</pre> <h2 id="Example">Example</h2> <p>The following code snippet shows creation of a <a title="The Worker interface of the Web Workers API represents a background task that can be easily created and can send messages back to its creator. Creating a worker is as simple as calling the Worker() constructor and specifying a script to be run in the worker thread." href="../worker"><code>Worker</code></a> object using the <a title="The Worker() constructor creates a Worker object that executes the script at the specified URL. This script must obey the same-origin policy." href="../worker/worker"><code>Worker()</code></a> constructor. Messages are passed to the worker when the value inside the form input <code>first</code> changes. A <a title="The onmessage property of the Worker interface represents an EventHandler, that is a function to be called when the message event occurs. These events are of type MessageEvent and will be called when the worker's parent receives a message (i.e. from the DedicatedWorkerGlobalScope.postMessage method." href="../worker/onmessage"><code>Worker.onmessage</code></a> handler is also present, to deal with messages are passed back from the worker.</p> <pre data-language="js">var myWorker = new Worker("worker.js");

first.onchange = function() {
  myWorker.postMessage([first.value,second.value]);
  console.log('Message posted to worker');
}

myWorker.onmessage = function(e) {
  result.textContent = e.data;
  console.log('Message received from worker');
}
</pre> <p>In the <code>worker.js</code> script, a <code>DedicatedWorkerGlobalScope.onmessage</code> handler is used to handle messages from the main script:</p> <pre data-language="js">onmessage = function(e) {
  console.log('Message received from main script');
  var workerResult = 'Result: ' + (e.data[0] * e.data[1]);
  console.log('Posting message back to main script');
  postMessage(workerResult);
}</pre> <p>Notice how in the main script, <code>onmessage</code> has to be called on <code>myWorker</code>, whereas inside the worker script you just need <code>onmessage</code> because the worker is effectively the global scope (the <a title="The DedicatedWorkerGlobalScope object (the Worker global scope) is accessible through the self keyword. Some additional global functions, namespaces objects, and constructors, not typically associated with the worker global scope, but available on it, are listed in the JavaScript Reference. See also: Functions available to workers." href="../dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>, in this case).</p> <p>For a full example, see our<a href="https://github.com/mdn/simple-web-worker" class="external external-icon">Basic dedicated worker example</a> (<a href="http://mdn.github.io/simple-web-worker/" class="external external-icon">run dedicated worker</a>).</p> <h2 id="Specifications">Specifications</h2> <table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a lang="en" hreflang="en" href="https://html.spec.whatwg.org/multipage/#handler-dedicatedworkerglobalscope-onmessage" class="external">WHATWG HTML Living Standard<br><small lang="en-US">The definition of 'DedicatedWorkerGlobalScope.onmessage' in that specification.</small></a></td> <td><span class="spec-Living">Living Standard</span></td> <td>No change from <a lang="en" title="The 'Web Workers' specification" class="external" href="http://dev.w3.org/html5/workers/" hreflang="en">Web Workers</a>.</td> </tr> <tr> <td><a lang="en" hreflang="en" href="http://dev.w3.org/html5/workers/#handler-dedicatedworkerglobalscope-onmessage" class="external">Web Workers<br><small lang="en-US">The definition of 'DedicatedWorkerGlobalScope.onmessage' in that specification.</small></a></td> <td><span class="spec-CR">Candidate Recommendation</span></td> <td>Initial definition.</td> </tr> </tbody> </table> <h2 id="Browser_compatibility">Browser compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari</th> </tr> <tr> <td>Basic support</td> <td>4</td> <td>
<a title="Released on 2009-06-30." href="https://developer.mozilla.org/en-US/Firefox/Releases/3.5">3.5</a> (1.9.1)</td> <td>10</td> <td>10.6</td> <td>4</td> </tr> </tbody> </table> </div> <div id="compat-mobile"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android</th> <th>Chrome for Android</th> <th>Firefox Mobile (Gecko)</th> <th>Firefox OS (Gecko)</th> <th>IE Mobile</th> <th>Opera Mobile</th> <th>Safari Mobile</th> </tr> <tr> <td>Basic support</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>1.0 (1.9.1)</td> <td>1.0.1</td> <td>10</td> <td>11.5</td> <td>5.1</td> </tr> </tbody> </table> </div> <h2 id="See_also">See also</h2> <ul> <li>The <a title="The DedicatedWorkerGlobalScope object (the Worker global scope) is accessible through the self keyword. Some additional global functions, namespaces objects, and constructors, not typically associated with the worker global scope, but available on it, are listed in the JavaScript Reference. See also: Functions available to workers." href="../dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a> interface it belongs to.</li> <li><a title="The WorkerGlobalScope interface of the Web Workers API is an interface representing the scope of any worker. Workers have no browsing context; this scope contains the information usually conveyed by Window objects — in this case event handlers, the console or the associated WorkerNavigator object. Each WorkerGlobalScope has its own event loop." href="../workerglobalscope"><code>WorkerGlobalScope</code></a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/DedicatedWorkerGlobalScope/onmessage$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/DedicatedWorkerGlobalScope/onmessage" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/DedicatedWorkerGlobalScope/onmessage</a>
  </p>
</div>

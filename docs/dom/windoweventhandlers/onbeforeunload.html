<h1>WindowEventHandlers.onbeforeunload</h1>  <p>The <code><strong>WindowEventHandlers.onbeforeunload</strong></code> event handler property contains the code executed when the <code><a title="/en-US/docs/Web/Events/beforeunload" href="https://developer.mozilla.org/en-US/docs/Web/Events/beforeunload">beforeunload</a></code> is sent. This event fires when a window is about to <code><a title="/en-US/docs/Web/Events/unload" href="https://developer.mozilla.org/en-US/docs/Web/Events/unload">unload</a></code> its resources. The document is still visible and the event is still cancelable.</p> <div class="note"> <p><strong>Note:</strong> To combat unwanted pop-ups, browsers may not display prompts created in beforeunload event handlers unless the page has been interacted with. For a list of specific browsers, see the Browser compatibility section.</p> </div> <h2 name="Syntax" id="Syntax">Syntax</h2> <pre class="syntaxbox">window.onbeforeunload = <var>funcRef</var></pre> <ul> <li>
<code>funcRef</code> is a reference to a function or a function expression.</li> <li>The function should assign a string value to the <code>returnValue</code> property of the Event object and return the same string.</li> </ul> <h2 name="Example" id="Example">Example</h2> <pre data-language="js">window.onbeforeunload = function(e) {
  var dialogText = 'Dialog text here';
  e.returnValue = dialogText;
  return dialogText;
};
</pre> <h2 id="Notes">Notes</h2> <p>When this event returns (or sets the <code>returnValue</code> property to) a value other than <code>null</code> or <code>undefined</code>, the user is prompted to confirm the page unload. In some browsers, the return value of the event is displayed in this dialog. Starting with Firefox 4, Chrome 51, Opera 38 and Safari 9.1, a generic string not under the control of the webpage will be shown instead of the returned string. For example, Firefox displays the string "This page is asking you to confirm that you want to leave - data you have entered may not be saved." See <a title="FIXED: Remove site-supplied text for beforeunload and onunload dialogs, and improve button text" href="https://bugzilla.mozilla.org/show_bug.cgi?id=588292">bug 588292</a> and <a href="https://www.chromestatus.com/feature/5349061406228480">Chrome Platform Status</a>.</p> <p>Since 25 May 2011, the HTML5 specification states that calls to <a title="The Window.alert() method displays an alert dialog with the optional specified content and an OK button." href="../window/alert"><code>window.alert()</code></a>, <a title="The Window.confirm() method displays a modal dialog with an optional message and two buttons, OK and Cancel." href="../window/confirm"><code>window.confirm()</code></a>, and <a title="The Window.prompt() displays a dialog with an optional message prompting the user to input some text." href="../window/prompt"><code>window.prompt()</code></a> methods may be ignored during this event. See the <a href="http://www.w3.org/TR/html5/webappapis.html#user-prompts">HTML5 specification</a> for more details.</p> <p>Note also, that various mobile browsers ignore the result of the event (that is, they do not ask the user for confirmation). Firefox has a hidden preference in about:config to do the same. In essence this means the user always confirms that the document may be unloaded.</p> <p>You <em>can</em> and <em>should</em> handle this event through <a title="The EventTarget.addEventListener() method registers the specified listener on the EventTarget it's called on. The event target may be an Element in a document, the Document itself, a Window, or any other object that supports events (such as XMLHttpRequest)." href="../eventtarget/addeventlistener"><code>window.addEventListener()</code></a> and the <code><a title="/en-US/docs/Web/Events/beforeunload" href="https://developer.mozilla.org/en-US/docs/Web/Events/beforeunload">beforeunload</a></code> event. More documentation is available there.</p> <h2 id="Specifications">Specifications</h2> <p>The event was originally introduced by Microsoft in Internet Explorer 4 and standardized in the HTML5 specification.</p> <table class="standard-table"> <thead> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> </thead> <tbody> <tr> <td><a lang="en" hreflang="en" href="https://html.spec.whatwg.org/multipage/#windoweventhandlers" class="external">WHATWG HTML Living Standard<br><small lang="en-US">The definition of 'GlobalEventHandlers' in that specification.</small></a></td> <td><span class="spec-Living">Living Standard</span></td> <td> </td> </tr> <tr> <td><a lang="en" hreflang="en" href="http://www.w3.org/html/wg/drafts/html/master/#windoweventhandlers" class="external">HTML5.1<br><small lang="en-US">The definition of 'GlobalEventHandlers' in that specification.</small></a></td> <td><span class="spec-REC">Recommendation</span></td> <td> </td> </tr> <tr> <td><a lang="en" hreflang="en" href="http://www.w3.org/TR/html5/#windoweventhandlers" class="external">HTML5<br><small lang="en-US">The definition of 'GlobalEventHandlers' in that specification.</small></a></td> <td><span class="spec-REC">Recommendation</span></td> <td> </td> </tr> </tbody> </table> <h2 id="Browser_compatibility">Browser compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Edge</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari (WebKit)</th> </tr> <tr> <td>Basic support</td> <td>1.0</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>1</td> <td>4</td> <td>12</td> <td>3</td> </tr> <tr> <td>Custom text support removed</td> <td>51.0</td> <td><span style="color: #f00;">No support</span></td> <td>44.0 (44.0)</td> <td> </td> <td>38</td> <td><a href="https://developer.apple.com/library/mac/releasenotes/General/WhatsNewInSafari/Articles/Safari_9_1.html">9.1</a></td> </tr> </tbody> </table> </div> <div id="compat-mobile"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android</th> <th>Android Webview</th> <th>Edge</th> <th>Firefox Mobile (Gecko)</th> <th>IE Phone</th> <th>Opera Mobile</th> <th>Safari Mobile</th> <th>Chrome for Android</th> </tr> <tr> <td>Basic support</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td>(no) <a href="https://bugs.webkit.org/show_bug.cgi?id=19324">defect</a>
</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> </tr> <tr> <td>Custom text support removed</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td>51.0</td> <td><span style="color: #f00;">No support</span></td> <td>44.0 (44.0)</td> <td> </td> <td> </td> <td> </td> <td>51.0</td> </tr> </tbody> </table> </div> <h2 name="See also" id="See also">See also</h2> <ul> <li><a href="http://msdn.microsoft.com/en-us/library/ms536907(VS.85).aspx">MSDN: onbeforeunload event</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onbeforeunload$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onbeforeunload" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onbeforeunload</a>
  </p>
</div>

<h1>WebSocket</h1><div><div class="notice experimental"> <p> <strong>This is an experimental technology</strong><br>Because this technology's specification has not stabilized, check the <a href="#Browser_compatibility">compatibility table</a> for usage in various browsers. Also note that the syntax and behavior of an experimental technology is subject to change in future versions of browsers as the specification changes.</p> </div></div> <p>The <code>WebSocket</code> object provides the API for creating and managing a <a href="websockets_api">WebSocket</a> connection to a server, as well as for sending and receiving data on the connection.</p> <p>The WebSocket constructor accepts one required and one optional parameter:</p> <pre class="syntaxbox">WebSocket WebSocket(
  in DOMString url,
  in optional DOMString protocols
);

WebSocket WebSocket(
  in DOMString url,
  in optional DOMString[] protocols
);
</pre> <dl> <dt><code>url</code></dt> <dd>The URL to which to connect; this should be the URL to which the WebSocket server will respond.</dd> <dt>
<code>protocols</code> <span class="inlineIndicator optional optionalInline">Optional</span>
</dt> <dd>Either a single protocol string or an array of protocol strings. These strings are used to indicate sub-protocols, so that a single server can implement multiple WebSocket sub-protocols (for example, you might want one server to be able to handle different types of interactions depending on the specified <code>protocol</code>). If you don't specify a protocol string, an empty string is assumed.</dd> </dl> <p>The constructor can throw exceptions:</p> <dl> <dt><code>SECURITY_ERR</code></dt> <dd>The port to which the connection is being attempted is being blocked.</dd> </dl> <h2 id="Method_overview">Method overview</h2> <table class="standard-table"> <tbody> <tr> <td><code>void <a href="#close()">close</a>(in optional unsigned long code, in optional DOMString reason);</code></td> </tr> <tr> <td><code>void <a href="#send()">send</a>(in DOMString data);</code></td> </tr> </tbody> </table> <h2 id="Attributes">Attributes</h2> <table class="standard-table"> <tbody> <tr> <th class="header">Attribute</th> <th class="header">Type</th> <th class="header">Description</th> </tr> <tr> <td><code>binaryType</code></td> <td><a title="DOMString is a UTF-16 String. As JavaScript already uses such strings, DOMString is mapped directly to a String." href="domstring"><code>DOMString</code></a></td> <td>A string indicating the type of binary data being transmitted by the connection. This should be either "blob" if DOM <a title="A Blob object represents a file-like object of immutable, raw data. Blobs represent data that isn't necessarily in a JavaScript-native format. The File interface is based on Blob, inheriting blob functionality and expanding it to support files on the user's system." href="blob"><code>Blob</code></a> objects are being used or "arraybuffer" if <a title="The ArrayBuffer object is used to represent a generic, fixed-length raw binary data buffer. You cannot directly manipulate the contents of an ArrayBuffer; instead, you create one of the typed array objects or a DataView object which represents the buffer in a specific format, and use that to read and write the contents of the buffer." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer"><code>ArrayBuffer</code></a> objects are being used.</td> </tr> <tr> <td><code>bufferedAmount</code></td> <td><code>unsigned long</code></td> <td>The number of bytes of data that have been queued using calls to <code><a href="websocket#send()">send()</a></code> but not yet transmitted to the network. This value resets to zero once all queued data has been sent. This value does not reset to zero when the connection is closed; if you keep calling <code><a href="websocket#send()">send()</a></code>, this will continue to climb. <strong>Read only</strong>
</td> </tr> <tr> <td><code>extensions</code></td> <td><a title="DOMString is a UTF-16 String. As JavaScript already uses such strings, DOMString is mapped directly to a String." href="domstring"><code>DOMString</code></a></td> <td>The extensions selected by the server. This is currently only the empty string or a list of extensions as negotiated by the connection.</td> </tr> <tr> <td><code>onclose</code></td> <td><a title="This method is called whenever an event occurs of the type for which the EventListener interface was registered." href="eventlistener"><code>EventListener</code></a></td> <td>An event listener to be called when the WebSocket connection's <code>readyState</code> changes to <code>CLOSED</code>. The listener receives a <a href="closeevent"><code>CloseEvent</code></a> named "close".</td> </tr> <tr> <td><code>onerror</code></td> <td><a title="This method is called whenever an event occurs of the type for which the EventListener interface was registered." href="eventlistener"><code>EventListener</code></a></td> <td>An event listener to be called when an error occurs. This is a simple event named "error".</td> </tr> <tr> <td><code>onmessage</code></td> <td><a title="This method is called whenever an event occurs of the type for which the EventListener interface was registered." href="eventlistener"><code>EventListener</code></a></td> <td>An event listener to be called when a message is received from the server. The listener receives a <a href="messageevent"><code>MessageEvent</code></a> named "message".</td> </tr> <tr> <td><code>onopen</code></td> <td><a title="This method is called whenever an event occurs of the type for which the EventListener interface was registered." href="eventlistener"><code>EventListener</code></a></td> <td>An event listener to be called when the WebSocket connection's <code>readyState</code> changes to <code>OPEN</code>; this indicates that the connection is ready to send and receive data. The event is a simple one with the name "open".</td> </tr> <tr> <td><code>protocol</code></td> <td><a title="DOMString is a UTF-16 String. As JavaScript already uses such strings, DOMString is mapped directly to a String." href="domstring"><code>DOMString</code></a></td> <td>A string indicating the name of the sub-protocol the server selected; this will be one of the strings specified in the <code>protocols</code> parameter when creating the WebSocket object.</td> </tr> <tr> <td><code>readyState</code></td> <td><code>unsigned short</code></td> <td>The current state of the connection; this is one of the <a href="#Ready_state_constants">Ready state constants</a>. <strong>Read only.</strong>
</td> </tr> <tr> <td><code>url</code></td> <td><a title="DOMString is a UTF-16 String. As JavaScript already uses such strings, DOMString is mapped directly to a String." href="domstring"><code>DOMString</code></a></td> <td>The URL as resolved by the constructor. This is always an absolute URL. <strong>Read only.</strong>
</td> </tr> </tbody> </table> <h2 id="Constants">Constants</h2> <h3 id="Ready_state_constants">Ready state constants</h3> <p>These constants are used by the <code>readyState</code> attribute to describe the state of the WebSocket connection.</p> <table class="standard-table"> <tbody> <tr> <th class="header">Constant</th> <th class="header">Value</th> <th class="header">Description</th> </tr> <tr> <td><code>CONNECTING</code></td> <td><code>0</code></td> <td>The connection is not yet open.</td> </tr> <tr> <td><code>OPEN</code></td> <td><code>1</code></td> <td>The connection is open and ready to communicate.</td> </tr> <tr> <td><code>CLOSING</code></td> <td><code>2</code></td> <td>The connection is in the process of closing.</td> </tr> <tr> <td><code>CLOSED</code></td> <td><code>3</code></td> <td>The connection is closed or couldn't be opened.</td> </tr> </tbody> </table> <h2 id="Methods">Methods</h2> <h3 id="close()">close()</h3> <p>Closes the WebSocket connection or connection attempt, if any. If the connection is already <code>CLOSED</code>, this method does nothing.</p> <pre class="syntaxbox">void close(
  in optional unsigned short code,
  in optional DOMString reason
);
</pre> <h4 id="Parameters">Parameters</h4> <dl> <dt>
<code>code</code> <span class="inlineIndicator optional optionalInline">Optional</span>
</dt> <dd>A numeric value indicating the status code explaining why the connection is being closed. If this parameter is not specified, a default value of 1000 (indicating a normal "transaction complete" closure) is assumed. See the <a href="closeevent#Status_codes">list of status codes</a> on the <a href="closeevent"><code>CloseEvent</code></a> page for permitted values.</dd> <dt>
<code>reason</code> <span class="inlineIndicator optional optionalInline">Optional</span>
</dt> <dd>A human-readable string explaining why the connection is closing. This string must be no longer than 123 bytes of UTF-8 text (<strong>not</strong> characters).</dd> </dl> <h4 id="Exceptions_thrown">Exceptions thrown</h4> <dl> <dt><code>INVALID_ACCESS_ERR</code></dt> <dd>An invalid <code>code</code> was specified.</dd> <dt><code>SYNTAX_ERR</code></dt> <dd>The <code>reason</code> string is too long or contains unpaired surrogates.</dd> </dl> <div class="note"> <p><strong>Note:</strong> In Gecko, this method didn't support any parameters prior to Gecko 8.0 (Firefox 8.0 / Thunderbird 8.0 / SeaMonkey 2.5).</p> </div> <h3 id="send()">send()</h3> <p>Transmits data to the server over the WebSocket connection.</p> <pre class="syntaxbox">void send(
  in DOMString data
);

void send(
  in ArrayBuffer data
);

void send(
  in Blob data
); 
</pre> <h4 id="Parameters_2">Parameters</h4> <dl> <dt><code>data</code></dt> <dd>A text string to send to the server.</dd> </dl> <h4 id="Exceptions_thrown_2">Exceptions thrown</h4> <dl> <dt><code>INVALID_STATE_ERR</code></dt> <dd>The connection is not currently <code>OPEN</code>.</dd> <dt><code>SYNTAX_ERR</code></dt> <dd>The data is a string that has unpaired surrogates.</dd> </dl> <div class="note"> <p><strong>Note:</strong> Gecko's implementation of the <code>send()</code> method differs somewhat from the specification in <span title="(Firefox 6.0 / Thunderbird 6.0 / SeaMonkey 2.3)">Gecko 6.0</span>; Gecko returns a <code>boolean</code> indicating whether or not the connection is still open (and, by extension, that the data was successfully queued or transmitted); this is corrected in <span title="(Firefox 8.0 / Thunderbird 8.0 / SeaMonkey 2.5)">Gecko 8.0</span>.</p> <p>As of <span title="(Firefox 11.0 / Thunderbird 11.0 / SeaMonkey 2.8)">Gecko 11.0</span>, support for <a title="The ArrayBuffer object is used to represent a generic, fixed-length raw binary data buffer. You cannot directly manipulate the contents of an ArrayBuffer; instead, you create one of the typed array objects or a DataView object which represents the buffer in a specific format, and use that to read and write the contents of the buffer." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer"><code>ArrayBuffer</code></a> is implemented but not <a title="A Blob object represents a file-like object of immutable, raw data. Blobs represent data that isn't necessarily in a JavaScript-native format. The File interface is based on Blob, inheriting blob functionality and expanding it to support files on the user's system." href="blob"><code>Blob</code></a> data types.</p> </div> <h2 id="Example">Example</h2> <pre data-language="js">// Create WebSocket connection.
const socket = new WebSocket('ws://localhost:8080');

// Connection opened
socket.addEventListener('open', function (event) {
    socket.send('Hello Server!');
});

// Listen for messages
socket.addEventListener('message', function (event) {
    console.log('Message from server', event.data);
});</pre> <h2 id="Specifications">Specifications</h2> <table class="standard-table"> <tbody> <tr> <th>Specification</th> <th>Status</th> <th>Comment</th> </tr> <tr> <td><a lang="en" hreflang="en" href="https://html.spec.whatwg.org/multipage/comms.html#the-websocket-interface" class="external">The WebSocket API<br><small lang="en-US">The definition of 'WebSocket' in that specification.</small></a></td> <td><span class="spec-CR">Candidate Recommendation</span></td> <td>Initial definition</td> </tr> </tbody> </table> <h2 id="Browser_compatibility">Browser compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Edge</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari</th> </tr> <tr> <td>Basic support</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>
<a title="Released on 2011-03-22." href="https://developer.mozilla.org/en-US/Firefox/Releases/4">4.0</a> (2.0)<sup>[1]</sup>
</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> </tr> <tr> <td>Sub-protocol support</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td>
<a title="Released on 2011-08-16." href="https://developer.mozilla.org/en-US/Firefox/Releases/6">6.0</a> (6.0)</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> </tr> </tbody> </table> </div> <div id="compat-mobile"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android</th> <th>Edge</th> <th>Firefox Mobile (Gecko)</th> <th>IE Mobile</th> <th>Opera Mobile</th> <th>Safari Mobile</th> </tr> <tr> <td>Basic support</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>7.0 (7.0)<sup>[1]</sup>
</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> </tr> <tr> <td>Sub-protocol support</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td>7.0 (7.0)</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> </tr> </tbody> </table> </div> <p>[1] Starting in Gecko 6.0 (Firefox 6.0 / Thunderbird 6.0 / SeaMonkey 2.3), the constructor is prefixed; you will need to use <code>MozWebSocket()</code>: <code>var mySocket = new MozWebSocket("http://www.example.com/socketserver");</code></p> <p>The <code>extensions</code> attribute was not supported in Gecko until Gecko 8.0.</p> <p>Prior to Gecko 11.0 (Firefox 11.0 / Thunderbird 11.0 / SeaMonkey 2.8), outbound messages sent using the <a href="#send()">send()</a> method were limited to 16 MB. They can now be up to 2 GB in size.</p> <h2 id="See_also">See also</h2> <ul> <li><a href="websockets_api/writing_websocket_client_applications">Writing WebSocket client applications</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/WebSocket</a>
  </p>
</div>

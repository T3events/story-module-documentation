<h1>Resource Timing API</h1> <p>The <strong><code>Resource Timing</code></strong> interfaces enable retrieving and analyzing detailed network timing data regarding the loading of an application's <em>resource(s)</em>. An application can use the timing metrics to determine, for example, the length of time it takes to load a specific resource, such as an <a title="XMLHttpRequest is an API that provides client functionality for transferring data between a client and a server. It provides an easy way to retrieve data from a URL without having to do a full page refresh. This enables a Web page to update just a part of the page without disrupting what the user is doing." href="xmlhttprequest"><code>XMLHttpRequest</code></a>, <a title="The svg element can be used to embed an SVG fragment inside the current document (for example, an HTML document). This SVG fragment has its own viewport and coordinate system." href="https://developer.mozilla.org/en-US/docs/Web/SVG/Element/SVG"><code>&lt;SVG&gt;</code></a>, image, or script.</p> <p>The interface's properties create a <em>resource loading timeline</em> with <a title="The DOMHighResTimeStamp type is a double and is used to store a time value. The value could be a discrete point in time or the difference in time between two discrete points in time. The unit is milliseconds and should be accurate to 5 µs (microseconds). However, if the browser is unable to provide a time value accurate to 5 microseconds (due, for example, to hardware or software constraints), the browser can represent the value as a time in milliseconds accurate to a millisecond." href="domhighrestimestamp"><code>high-resolution timestamps</code></a> for network events such as redirect start and end times, DNS lookup start and end times, request start, response start and end times, etc. The interface also includes other properties that provide data about the size of the fetched resource as well as the <em>type</em> of resource that initiated the fetch.</p> <p>This document provides an overview of the <code>Resource Timing</code> interfaces. For more details about the interfaces including examples, see the each interface's reference page, <a href="https://developer.mozilla.org/Web/API/Resource_Timing/Using_Resource_Timing">Using Resource Timing</a> and the references in the <a href="#See_also">See also</a> section. For a graphical representation of the resource timing processing model, see the <a href="https://w3c.github.io/resource-timing/#process">resource timing phases</a> figure.</p> <p class="note">Note: the <code>PerformanceResourceTiming</code> interface extends the <a title="The PerformanceEntry object encapsulates a single performance metric that is part of the performance timeline. A performance entry can be directly created by making a performance mark or measure (for example by calling the mark() method) at an explicit point in an application. Performance entries are also created in indirect ways such as loading a resource (such as an image)." href="performanceentry"><code>PerformanceEntry</code></a> for <a title="The PerformanceEntry object encapsulates a single performance metric that is part of the performance timeline. A performance entry can be directly created by making a performance mark or measure (for example by calling the mark() method) at an explicit point in an application. Performance entries are also created in indirect ways such as loading a resource (such as an image)." href="performanceentry"><code>performance entries</code></a> which have an <a title="The entryType property returns the performance entry's type. The valid entryType values are:" href="performanceentry/entrytype"><code>entryType</code></a> of "<code>resource</code>".</p> <h2 id="High-resolution_time_stamps">High-resolution time stamps</h2> <p>Several of the <code>Resource Timing</code> properties return <em>high-resolution timestamps</em>. These timestamps have a <code><a title="The DOMHighResTimeStamp type is a double and is used to store a time value. The value could be a discrete point in time or the difference in time between two discrete points in time. The unit is milliseconds and should be accurate to 5 µs (microseconds). However, if the browser is unable to provide a time value accurate to 5 microseconds (due, for example, to hardware or software constraints), the browser can represent the value as a time in milliseconds accurate to a millisecond." href="domhighrestimestamp"><code>DOMHighResTimeStamp</code></a></code> type, and as its name implies, they represent a high-resolution point in time. This type is a <code>double</code>, and its value is a discrete point in time or the difference in time between two discrete points in time.</p> <p>The unit of <code>DOMHighResTimeStamp</code> is milliseconds and should be accurate to 5 µs (microseconds). However, If the browser is unable to provide a time value accurate to 5 microseconds (because, for example, due to hardware or software constraints), the browser can represent a the value as a time in milliseconds accurate to a millisecond.</p> <h2 id="Resoure_loading_timestamps">Resoure loading timestamps</h2> <p>An application can get timestamps for the various stages used to load a resource. The first property in the processing model is <a title="The startTime property returns the first recorded timestamp of the performance entry." href="performanceentry/starttime"><code>startTime</code></a> which returns the timestamp immediately before the resource loading process begins. The <a title="The fetchStart property represents a timestamp immediately before the browser starts to fetch the resource." href="performanceresourcetiming/fetchstart"><code>fetchStart</code></a> timestamps follows and redirect processing (if applicable) and preceeds DNS lookup. The next stages are <a title="The connectStart property returns the timestamp immediately before the user agent starts establishing the connection to the server to retrieve the resource." href="performanceresourcetiming/connectstart"><code>connectStart</code></a> and <a title="Editorial review completed." href="performanceresourcetiming/connectend"><code>connectEnd</code></a> which are the timestamps immediately before and after connecting to the server, respectively. The last three timestamps are, in order: <a title="The requestStart property returns a timestamp of the time immediately before the browser starts requesting the resource from the server, cache, or local resource. If the transport connection fails and the browser retires the request, the value returned will be the start of the retry request." href="performanceresourcetiming/requeststart"><code>requestStart</code></a> - the timestamp before the browser starts requesting the resource from the server; <a title="The responseStart property returns a timestamp immediately after the browser receives the first byte of the response from the server, cache, or local resource." href="performanceresourcetiming/responsestart"><code>responseStart</code></a> - the timestamp after the browser receives the first byte of the response from the server; and <a title="The responseEnd property returns a timestamp immediately after the browser receives the last byte of the resource or immediately before the transport connection is closed, whichever comes first." href="performanceresourcetiming/responseend"><code>responseEnd</code></a> - the timestamp after the browser receives the last byte of the resource. If the resource is loaded via a secure connection a <a title="The secureConnectionStart property returns a timestamp immediately before the browser starts the handshake process to secure the current connection. If a secure connection is not used, the property returns zero." href="performanceresourcetiming/secureconnectionstart"><code>secureConnectionStart</code></a> timestamp will be available between the connection start and end events.</p> <p>The <code><a title="The PerformanceResourceTiming interface enables retrieving and analyzing detailed network timing data regarding the loading of an application's resources. An application can use the timing metrics to determine, for example, the length of time it takes to fetch a specific resource, such as an XMLHttpRequest, &lt;SVG&gt;, image, or script." href="performanceresourcetiming"><code>PerformanceResourceTiming</code></a></code> interface also includes several network timing properties. The <a title="The redirectStart property returns a timestamp representing the start time of the fetch which that initiates the redirect." href="performanceresourcetiming/redirectstart"><code>redirectStart</code></a> and <a title="The redirectEnd property returns a timestamp immediately after receiving the last byte of the response of the last redirect." href="performanceresourcetiming/redirectend"><code>redirectEnd</code></a> properties return <a title="The DOMHighResTimeStamp type is a double and is used to store a time value. The value could be a discrete point in time or the difference in time between two discrete points in time. The unit is milliseconds and should be accurate to 5 µs (microseconds). However, if the browser is unable to provide a time value accurate to 5 microseconds (due, for example, to hardware or software constraints), the browser can represent the value as a time in milliseconds accurate to a millisecond." href="domhighrestimestamp"><code>timestamps</code></a> for redirect start and end times, respectively. Likewise, the The <a title="The domainLookupStart property returns the timestamp immediately before the browser starts the domain name lookup for the resource." href="performanceresourcetiming/domainlookupstart"><code>domainLookupStart</code></a> and <a title="The domainLookupEnd property returns the timestamp immediately after the browser finishes the domain name lookup for the resource." href="performanceresourcetiming/domainlookupend"><code>domainLookupEnd</code></a> properties return <a title="The DOMHighResTimeStamp type is a double and is used to store a time value. The value could be a discrete point in time or the difference in time between two discrete points in time. The unit is milliseconds and should be accurate to 5 µs (microseconds). However, if the browser is unable to provide a time value accurate to 5 microseconds (due, for example, to hardware or software constraints), the browser can represent the value as a time in milliseconds accurate to a millisecond." href="domhighrestimestamp"><code>timestamps</code></a> for DNS lookup start and end times, respectively.</p> <h2 id="Resource_size">Resource size</h2> <p>The <a title="The PerformanceResourceTiming interface enables retrieving and analyzing detailed network timing data regarding the loading of an application's resources. An application can use the timing metrics to determine, for example, the length of time it takes to fetch a specific resource, such as an XMLHttpRequest, &lt;SVG&gt;, image, or script." href="performanceresourcetiming"><code>PerformanceResourceTiming</code></a> interface has three properties that can be used to obtain size data about a resource. The <a title="The transferSize read-only property represents the size (in octets) of the fetched resource. The size includes the response header fields plus the response payload body (as defined by RFC7230." href="performanceresourcetiming/transfersize"><code>transferSize</code></a> property returns the size (in octets) of the fetched resource including the response header fields plus the response payload body.</p> <p>The <a title="The encodedBodySize read-only property represents the size (in octets) received from the fetch (HTTP or cache), of the payload body, before removing any applied content-codings." href="performanceresourcetiming/encodedbodysize"><code>encodedBodySize</code></a> property returns the size (in octets) received from the fetch (HTTP or cache), of the <em>payload body</em>, <strong>before</strong> removing any applied content-codings. <a title="The decodedBodySize read-only property returns the size (in octets) received from the fetch (HTTP or cache) of the message body, after removing any applied content-codings. If the resource is retrieved from an application cache or local resources, it returns the size of the payload after removing any applied content-codings." href="performanceresourcetiming/decodedbodysize"><code>decodedBodySize</code></a> returns the size (in octets) received from the fetch (HTTP or cache) of the <em>message body</em>, <strong>after</strong> removing any applied content-codings.</p> <h2 id="Other_properties">Other properties</h2> <p>The <a title="The nextHopProtocol property is a string representing the network protocol used to fetch the resource, as identified by the ALPN Protocol ID (RFC7301)." href="performanceresourcetiming/nexthopprotocol"><code>nextHopProtocol</code></a> property returns the <em>network protocol</em> used to fetch the resource.</p> <p>The <a title="The initiatorType property is a string that represents the type of resource that initiated the performance event. The value of this string is as follows:" href="performanceresourcetiming/initiatortype"><code>initiatorType</code></a> property returns the <em>type</em> of resource that initiated the performance entry such as "<code>css</code>" for a CSS resource, "<code>xmlhttprequest</code>" for an XMLHttpRequest and "<code>img</code>" for an image (such as a JPEG).</p> <p>If the current context is a <a title="The Worker interface of the Web Workers API represents a background task that can be easily created and can send messages back to its creator. Creating a worker is as simple as calling the Worker() constructor and specifying a script to be run in the worker thread." href="worker"><code>worker</code></a>, the <a title="If the current context is a worker, the workerStart property returns a timestamp immediately before the worker that fetches the resource is started. If the context is not a worker (i.e. a browser context), this property returns zero." href="performanceresourcetiming/workerstart"><code>workerStart</code></a> property can be used to obtain a <a title="The DOMHighResTimeStamp type is a double and is used to store a time value. The value could be a discrete point in time or the difference in time between two discrete points in time. The unit is milliseconds and should be accurate to 5 µs (microseconds). However, if the browser is unable to provide a time value accurate to 5 microseconds (due, for example, to hardware or software constraints), the browser can represent the value as a time in milliseconds accurate to a millisecond." href="domhighrestimestamp"><code>DOMHighResTimeStamp</code></a> when the worker was started.</p> <h2 id="Methods">Methods</h2> <p><code>Resource Timing</code> includes two methods that extend the <a title="The Performance interface represents timing-related performance information for the given page." href="performance"><code>Performance</code></a> interface. The <a title="The clearResourceTimings() method removes all performance entries with an entryType of &quot;resource&quot; from the browser's performance data buffer and sets the size of the performance data buffer to zero. To set the size of the browser's performance data buffer, use the Performance.setResourceTimingBufferSize() method." href="performance/clearresourcetimings"><code>clearResourceTimings()</code></a> method removes all "<code>resource</code>" type performance entries from the browser's <em>resource</em> performance entry buffer. The <a title="The setResourceTimingBufferSize() method sets the browser's resource timing buffer size to the specified number of &quot;resource&quot; performance entry type objects." href="performance/setresourcetimingbuffersize"><code>setResourceTimingBufferSize()</code></a> method sets the resource performance entry buffer size to the specified number of resource <a title="The PerformanceEntry object encapsulates a single performance metric that is part of the performance timeline. A performance entry can be directly created by making a performance mark or measure (for example by calling the mark() method) at an explicit point in an application. Performance entries are also created in indirect ways such as loading a resource (such as an image)." href="performanceentry"><code>performance entries</code></a>.</p> <p>The <a title="The PerformanceResourceTiming interface enables retrieving and analyzing detailed network timing data regarding the loading of an application's resources. An application can use the timing metrics to determine, for example, the length of time it takes to fetch a specific resource, such as an XMLHttpRequest, &lt;SVG&gt;, image, or script." href="performanceresourcetiming"><code>PerformanceResourceTiming</code></a> interface's <a title="The toJSON() method is a serializer that returns a JSON representation of the PerformanceResourceTiming object." href="performanceresourcetiming/tojson"><code>toJSON()</code></a> method returns a JSON serialization of a "<code>resource</code>" type <a title="The PerformanceEntry object encapsulates a single performance metric that is part of the performance timeline. A performance entry can be directly created by making a performance mark or measure (for example by calling the mark() method) at an explicit point in an application. Performance entries are also created in indirect ways such as loading a resource (such as an image)." href="performanceentry"><code>performance entry</code></a>.</p> <h2 id="Implementation_status">Implementation status</h2> <p>As shown in the <a title="The PerformanceResourceTiming interface enables retrieving and analyzing detailed network timing data regarding the loading of an application's resources. An application can use the timing metrics to determine, for example, the length of time it takes to fetch a specific resource, such as an XMLHttpRequest, &lt;SVG&gt;, image, or script." href="performanceresourcetiming"><code>PerformanceResourceTiming</code></a> interface's <a href="https://developer.mozilla.org/Web/API/PerformanceResourceTiming#Browser_compatibility">Browser Compatibility</a> table, most of these interfaces are broadly implemented by desktop browsers. However, note that some properties have little to no implementation so see each property's Browser Compatibility section for more specific interoperability data.</p> <p>To test your browser's support for these interfaces, run the <code><a href="http://mdn.github.io/web-performance/perf-api-support.html">perf-api-support</a></code> application.</p> <h2 id="See_Also">See Also</h2> <ul> <li>
<a href="https://w3c.github.io/resource-timing/">Resource Timing Standard</a>; W3C Editor's Draft</li> <li><a href="http://caniuse.com/#search=resource-timing">CanIUse data</a></li> <li>
<a href="http://www.stevesouders.com/blog/2014/08/21/resource-timing-practical-tips/">Resource Timing practical tips</a>; Steve Souders; 2014 August 21</li> <li>
<a href="http://googledevelopers.blogspot.ca/2013/12/measuring-network-performance-with.html">Measuring network performance with Resource Timing API</a>; Ilya Grigorik; 2013 December 11</li> <li>
<a href="http://siusin.github.io/perf-timing-primer/">A Primer for Web Performance Timing APIs</a>; Xiaoqian Wu; W3C Editor's Draft</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Resource_Timing_API$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Resource_Timing_API" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/Resource_Timing_API</a>
  </p>
</div>

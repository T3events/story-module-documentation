<h1>beforeunload</h1> <p>The <strong><code>beforeunload</code></strong> event is fired when the window, the document and its resources are about to be unloaded.</p> <p>When a string is assigned to the <code>returnValue</code> Event property, a dialog box appears, asking the users for confirmation to leave the page (see example below). When no value is provided, the event is processed silently.</p> <table class="properties"> <tbody> <tr> <td>Bubbles</td> <td>No</td> </tr> <tr> <td>Cancelable</td> <td>Yes</td> </tr> <tr> <td>Target objects</td> <td>defaultView</td> </tr> <tr> <td>Interface</td> <td><a title="The Event interface represents any event which takes place in the DOM; some are user-generated (such as mouse or keyboard events), while others are generated by APIs (such as events that indicate an animation has finished running, a video has been paused, and so forth). There are many types of event, some of which use are other interfaces based on the main Event interface. Event itself contains the properties and methods which are common to all events." href="https://developer.mozilla.org/en-US/docs/Web/API/Event"><code>Event</code></a></td> </tr> </tbody> </table> <h2 id="Properties">Properties</h2> <table class="standard-table"> <thead> <tr> <th scope="col">Property</th> <th scope="col">Type</th> <th scope="col">Description</th> </tr> </thead> <tbody> <tr> <td>
<code>target</code> <span title="This value may not be changed." class="inlineIndicator readOnly readOnlyInline">Read only </span>
</td> <td><a title="EventTarget is an interface implemented by objects that can receive events and may have listeners for them." href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget"><code>EventTarget</code></a></td> <td>The event target (the topmost target in the DOM tree).</td> </tr> <tr> <td>
<code>type</code> <span title="This value may not be changed." class="inlineIndicator readOnly readOnlyInline">Read only </span>
</td> <td><a title="DOMString is a UTF-16 String. As JavaScript already uses such strings, DOMString is mapped directly to a String." href="https://developer.mozilla.org/en-US/docs/Web/API/DOMString"><code>DOMString</code></a></td> <td>The type of event.</td> </tr> <tr> <td>
<code>bubbles</code> <span title="This value may not be changed." class="inlineIndicator readOnly readOnlyInline">Read only </span>
</td> <td><a title="The Boolean object is an object wrapper for a boolean value." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean"><code>Boolean</code></a></td> <td>Does the event normally bubble?</td> </tr> <tr> <td>
<code>cancelable</code> <span title="This value may not be changed." class="inlineIndicator readOnly readOnlyInline">Read only </span>
</td> <td><a title="The Boolean object is an object wrapper for a boolean value." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean"><code>Boolean</code></a></td> <td>Is it possible to cancel the event?</td> </tr> <tr> <td><code>returnValue</code></td> <td><a title="DOMString is a UTF-16 String. As JavaScript already uses such strings, DOMString is mapped directly to a String." href="https://developer.mozilla.org/en-US/docs/Web/API/DOMString"><code>DOMString</code></a></td> <td>The current return value of the event (the message to show the user).</td> </tr> </tbody> </table> <h2 id="Examples">Examples</h2> <pre data-language="js">window.addEventListener("beforeunload", function (event) {
  event.returnValue = "\o/";
});

// is equivalent to
window.addEventListener("beforeunload", function (event) {
  event.preventDefault();
});</pre> <p>WebKit-based browsers don't follow the spec for the dialog box. An almost cross-browser working example would be close to the following:</p> <pre data-language="js">window.addEventListener("beforeunload", function (e) {
  var confirmationMessage = "\o/";

  e.returnValue = confirmationMessage;     // Gecko, Trident, Chrome 34+
  return confirmationMessage;              // Gecko, WebKit, Chrome &lt;34
});</pre> <h2 id="Notes">Notes</h2> <p>When this event returns a non-void value, the user is prompted to confirm the page unload. In most browsers, the return value of the event is displayed in this dialog. In Firefox 4 and later the returned string is not displayed to the user. Instead, Firefox displays the string "This page is asking you to confirm that you want to leave - data you have entered may not be saved." See <a title="FIXED: Remove site-supplied text for beforeunload and onunload dialogs, and improve button text" href="https://bugzilla.mozilla.org/show_bug.cgi?id=588292">bug 588292</a>.</p> <p>Since 25 May 2011, the HTML5 specification states that calls to <a title="The Window.alert() method displays an alert dialog with the optional specified content and an OK button." href="https://developer.mozilla.org/en-US/docs/Web/API/Window/alert"><code>window.alert()</code></a>, <a title="The Window.confirm() method displays a modal dialog with an optional message and two buttons, OK and Cancel." href="https://developer.mozilla.org/en-US/docs/Web/API/Window/confirm"><code>window.confirm()</code></a>, and <a title="The Window.prompt() displays a dialog with an optional message prompting the user to input some text." href="https://developer.mozilla.org/en-US/docs/Web/API/Window/prompt"><code>window.prompt()</code></a> methods may be ignored during this event. See the <a href="http://www.w3.org/TR/html5/webappapis.html#user-prompts">HTML5 specification</a> for more details.</p> <p>Note also that various mobile browsers ignore the result of the event (that is, they do not ask the user for confirmation). Firefox has a hidden preference in about:config to do the same. In essence this means the user always confirms that the document may be unloaded.</p> <p>Note that using this event handler in your page prevents Firefox from caching the page in the in-memory bfcache. See <a href="en/using_firefox_1.5_caching">Using Firefox 1.5 caching</a> for details.</p> <h2 id="Specifications">Specifications</h2> <table class="standard-table"> <thead> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> </thead> <tbody> <tr> <td><a hreflang="en" class="external" lang="en" href="https://html.spec.whatwg.org/multipage/indices.html#event-beforeunload">WHATWG HTML Living Standard<br><small lang="en-US">The definition of 'beforeunload' in that specification.</small></a></td> <td><span class="spec-Living">Living Standard</span></td> <td> </td> </tr> <tr> <td><a hreflang="en" class="external" lang="en" href="http://www.w3.org/TR/html5/browsers.html#unloading-documents">HTML5<br><small lang="en-US">The definition of 'beforeunload' in that specification.</small></a></td> <td><span class="spec-REC">Recommendation</span></td> <td>Initial definition</td> </tr> </tbody> </table> <h2 id="See_also">See also</h2> <ul> <li><code><a title="/en-US/docs/Web/Events/DOMContentLoaded" href="domcontentloaded">DOMContentLoaded</a></code></li> <li><code><a title="/en-US/docs/Web/Events/readystatechange" href="readystatechange">readystatechange</a></code></li> <li><code><a title="/en-US/docs/Web/Events/load" href="load">load</a></code></li> <li><code><a title="/en-US/docs/Web/Events/unload" href="unload">unload</a></code></li> <li><a title="http://www.whatwg.org/specs/web-apps/current-work/#prompt-to-unload-a-document" href="http://www.whatwg.org/specs/web-apps/current-work/#prompt-to-unload-a-document">Unloading Documents â€” Prompt to unload a document</a></li> <li>
<a href="https://developers.google.com/web/updates/2016/04/chrome-51-deprecations?hl=en#remove_custom_messages_in_onbeforeload_dialogs">Remove Custom Messages in onbeforeload Dialogs after Chrome 51</a> </li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/Events/beforeunload$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/Events/beforeunload" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/Events/beforeunload</a>
  </p>
</div>

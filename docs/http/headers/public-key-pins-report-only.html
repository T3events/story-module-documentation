<h1>Public-Key-Pins-Report-Only</h1> <p>The HTTP <code><strong>Public-Key-Pins-Report-Only</strong></code> response header sends reports of pinning violation to the <code>report-uri</code> specified in the header but, unlike <a title="The HTTP Public-Key-Pins response header associates a specific cryptographic public key with a certain web server to decrease the risk of MITM attacks with forged certificates. If one or several keys are pinned and none of them are used by the server, the browser will not accept the response as legitimate, and will not display it." href="public-key-pins"><code>Public-Key-Pins</code></a> still allows browsers to connect to the server if the pinning is violated.</p> <p>For more information, see the <a title="The HTTP Public-Key-Pins response header associates a specific cryptographic public key with a certain web server to decrease the risk of MITM attacks with forged certificates. If one or several keys are pinned and none of them are used by the server, the browser will not accept the response as legitimate, and will not display it." href="public-key-pins"><code>Public-Key-Pins</code></a> header reference page and the <a href="../public_key_pinning">HTTP Public Key Pinning</a> article.</p> <table class="properties"> <tbody> <tr> <th scope="row">Header type</th> <td><a title="Response header: A response header is an HTTP header that can be used in an HTTP response and that doesn't relate to the content of the message. Response headers, like Age, Location or Server are used to give a more detailed context of the response." href="https://developer.mozilla.org/en-US/docs/Glossary/Response_header" class="glossaryLink">Response header</a></td> </tr> <tr> <th scope="row"><a title="Forbidden header name: A forbidden header name is an HTTP header name that cannot be modified programmatically." href="https://developer.mozilla.org/en-US/docs/Glossary/Forbidden_header_name" class="glossaryLink">Forbidden header name</a></th> <td>no</td> </tr> </tbody> </table> <h2 id="Syntax">Syntax</h2> <pre class="syntaxbox">Public-Key-Pins-Report-Only: pin-sha256="&lt;pin-value&gt;"; 
                             max-age=&lt;expire-time&gt;; 
                             includeSubDomains; 
                             report-uri="&lt;uri&gt;"</pre> <h2 id="Directives">Directives</h2> <dl> <dt><code>pin-sha256="&lt;pin-value&gt;"</code></dt> <dd>The quoted string is the Base64 encoded Subject Public Key Information (<a title="The definition of that term (SPKI) has not been written yet; please consider contributing it!" href="https://developer.mozilla.org/en-US/docs/Glossary/SPKI" class="glossaryLink">SPKI</a>) fingerprint. It is possible to specify multiple pins for different public keys. Some browsers might allow other hashing algorithms than SHA-256 in the future.</dd> <dt>max-age=&lt;expire-time&gt;</dt> <dd>This directive is meaningless for the Public-Key-Pins-Report-Only header, it will be ignored by user agents and the header will not be cached.</dd> <dt>
<code>includeSubDomains </code><span class="inlineIndicator optional optionalInline">Optional</span>
</dt> <dd>If this optional parameter is specified, this rule applies to all of the site's subdomains as well.</dd> <dt><code>report-uri="&lt;uri&gt;"</code></dt> <dd>Pin validation failures are reported to the given URL. This directive should be used with this header, otherwise this header will be a no-op.</dd> </dl> <h2 id="Example">Example</h2> <pre>Public-Key-Pins-Report-Only: 
  pin-sha256="cUPcTAZWKaASuYWhhneDttWpY3oBAkE3h2+soZS7sWs="; 
  pin-sha256="M8HztCzM3elUxkcjR2S5P4hhyBNf6lHkmjAHKhpGPWE="; 
  max-age=5184000; includeSubDomains; 
  report-uri="https://www.example.org/hpkp-report"</pre> <p>In this example, <strong>pin-sha256="cUPcTAZWKaASuYWhhneDttWpY3oBAkE3h2+soZS7sWs="</strong> pins the server's public key used in production. The second pin declaration <strong>pin-sha256="M8HztCzM3elUxkcjR2S5P4hhyBNf6lHkmjAHKhpGPWE="</strong> also pins the backup key. <strong>max-age=5184000</strong> tells the client to store this information for two months, which is a reasonable time limit according to the IETF RFC. This key pinning is also valid for all subdomains, which is told by the <strong>includeSubDomains</strong> declaration. Finally, <strong>report-uri="https://www.example.org/hpkp-report"</strong> explains where to report pin validation failures.</p> <h2 id="Specifications">Specifications</h2> <table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Title</th> </tr> <tr> <td><a href="http://tools.ietf.org/html/7469#section-2.1">RFC 7469, section 2.1: Public-Key-Pins-Report-Only</a></td> <td>Public Key Pinning Extension for HTTP</td> </tr> </tbody> </table> <h2 id="Browser_compatibility">Browser compatibility</h2>  <div id="compat-desktop"><table class="compat-table"> <thead> <tr> <th>Feature</th> <th>Chrome</th> <th>Edge</th> <th>Firefox</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari</th> <th>Servo</th> </tr> </thead>
<tbody><tr>
<td>Public-Key-Pins-Report-Only</td>
<td>46</td>
<td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td>
<td>
<span style="color: #f00;">No support</span><a href="#note-1"><strong><sup>1</sup></strong></a>
</td>
<td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td>
<td>33</td>
<td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td>
<td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td>
</tr></tbody>
</table></div><div id="compat-mobile"><table class="compat-table"> <thead> <tr> <th>Feature</th> <th>Android</th> <th>Chrome for Android</th> <th>Edge Mobile</th> <th>Firefox for Android</th> <th>IE Mobile</th> <th>Opera Mobile</th> <th>Safari Mobile</th> </tr> </thead>
<tbody><tr>
<td>Public-Key-Pins-Report-Only</td>
<td><span style="color: #888;">(Yes)</span></td>
<td><span style="color: #888;">(Yes)</span></td>
<td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td>
<td><span style="color: #f00;">No support</span></td>
<td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td>
<td>33</td>
<td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td>
</tr></tbody>
</table></div><p id="note-1">1. See <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1091177">Bugzilla bug 1091177</a>.</p> <h2 id="See_also">See also</h2> <ul> <li><a title="The HTTP Public-Key-Pins response header associates a specific cryptographic public key with a certain web server to decrease the risk of MITM attacks with forged certificates. If one or several keys are pinned and none of them are used by the server, the browser will not accept the response as legitimate, and will not display it." href="public-key-pins"><code>Public-Key-Pins</code></a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Public-Key-Pins-Report-Only$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Public-Key-Pins-Report-Only" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Public-Key-Pins-Report-Only</a>
  </p>
</div>

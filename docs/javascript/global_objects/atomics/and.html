<h1>Atomics.and</h1><div> <div class="notice experimental"> <p> <strong>This is an experimental technology</strong><br>Because this technology's specification has not stabilized, check the <a href="#Browser_compatibility">compatibility table</a> for usage in various browsers. Also note that the syntax and behavior of an experimental technology is subject to change in future versions of browsers as the specification changes.</p> </div>
</div> <p>The static <code><strong>Atomics</strong></code><strong><code>.and()</code></strong> method computes a bitwise AND with a given value at a given position in the array, and returns the old value at that position. This atomic operation guarantees that no other write happens until the modified value is written back.</p> <h2 id="Syntax">Syntax</h2> <pre class="syntaxbox">Atomics.and(typedArray, index, value)
</pre> <h3 id="Parameters">Parameters</h3> <dl> <dt><code>typedArray</code></dt> <dd>A shared integer typed array. One of <a title="The Int8Array typed array represents an array of twos-complement 8-bit signed integers. The contents are initialized to 0. Once established, you can reference elements in the array using the object's methods, or using standard array index syntax (that is, using bracket notation)." href="../int8array"><code>Int8Array</code></a>, <a title="The Uint8Array typed array represents an array of 8-bit unsigned integers. The contents are initialized to 0. Once established, you can reference elements in the array using the object's methods, or using standard array index syntax (that is, using bracket notation)." href="../uint8array"><code>Uint8Array</code></a>, <a title="The Int16Array typed array represents an array of twos-complement 16-bit signed integers in the platform byte order. If control over byte order is needed, use DataView instead. The contents are initialized to 0. Once established, you can reference elements in the array using the object's methods, or using standard array index syntax (that is, using bracket notation)." href="../int16array"><code>Int16Array</code></a>, <a title="The Uint16Array typed array represents an array of 16-bit unsigned integers in the platform byte order. If control over byte order is needed, use DataView instead. The contents are initialized to 0. Once established, you can reference elements in the array using the object's methods, or using standard array index syntax (that is, using bracket notation)." href="../uint16array"><code>Uint16Array</code></a>, <a title="The Int32Array typed array represents an array of twos-complement 32-bit signed integers in the platform byte order. If control over byte order is needed, use DataView instead. The contents are initialized to 0. Once established, you can reference elements in the array using the object's methods, or using standard array index syntax (that is, using bracket notation)." href="../int32array"><code>Int32Array</code></a>, or <a title="The Uint32Array typed array represents an array of 32-bit unsigned integers in the platform byte order. If control over byte order is needed, use DataView instead. The contents are initialized to 0. Once established, you can reference elements in the array using the object's methods, or using standard array index syntax (that is, using bracket notation)." href="../uint32array"><code>Uint32Array</code></a>.</dd> <dt><code>index</code></dt> <dd>The position in the <code>typedArray</code> to compute the bitwise AND.</dd> <dt><code>value</code></dt> <dd>The number to compute the bitwise AND with.</dd> </dl> <h3 id="Return_value">Return value</h3> <p>The old value at the given position (<code>typedArray[index]</code>).</p> <h3 id="Exceptions">Exceptions</h3> <ul> <li>Throws a <a title="The TypeError object represents an error when a value is not of the expected type." href="../typeerror"><code>TypeError</code></a>, if <code>typedArray</code> is not one of the allowed integer types.</li> <li>Throws a <a title="The TypeError object represents an error when a value is not of the expected type." href="../typeerror"><code>TypeError</code></a>, if <code>typedArray</code> is not a shared typed array type.</li> <li>Throws a <a title="The RangeError object indicates an error when a value is not in the set or range of allowed values." href="../rangeerror"><code>RangeError</code></a>, if <code>index</code> is out of bounds in the <code>typedArray</code>.</li> </ul> <h2 id="Description">Description</h2> <p>The bitwise AND operation only yields 1, if both <code>a</code> and <code>b</code> are 1. The truth table for the AND operation is:</p> <table class="standard-table"> <thead> <tr> <th><code>a</code></th> <th><code>b</code></th> <th><code>a &amp; b</code></th> </tr> </thead> <tbody> <tr> <td>0</td> <td>0</td> <td>0</td> </tr> <tr> <td>0</td> <td>1</td> <td>0</td> </tr> <tr> <td>1</td> <td>0</td> <td>0</td> </tr> <tr> <td>1</td> <td>1</td> <td>1</td> </tr> </tbody> </table> <p>For example, a bitwise AND of <code>5 &amp; 1</code> results in <code>0001</code> which is 1 in decimal.</p> <pre>5  0101
1  0001
   ----
1  0001</pre> <h2 id="Examples">Examples</h2> <pre data-language="js">var sab = new SharedArrayBuffer(1024);
var ta = new Uint8Array(sab);
ta[0] = 5;

Atomics.and(ta, 0, 1); // returns 0, the old value
Atomics.load(ta, 0);  // 1
</pre> <h2 id="Specifications">Specifications</h2> <table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a hreflang="en" class="external" lang="en" href="http://tc39.github.io/ecmascript_sharedmem/shmem.html#Atomics.and">ECMAScript Shared Memory and Atomics<br><small lang="en-US">The definition of 'Atomics.and' in that specification.</small></a></td> <td><span class="spec-Draft">Draft</span></td> <td>Initial definition.</td> </tr> </tbody> </table> <h2 id="Browser_compatibility">Browser compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Edge</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari</th> </tr> <tr> <td>Basic support</td> <td>
<span style="color: #f00;">No support</span> [2]</td> <td><span style="color: #f00;">No support</span></td> <td>
<a title="Released on 2017-03-07." href="https://developer.mozilla.org/en-US/Firefox/Releases/52">52</a> (52) [1]</td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> </tr> </tbody> </table> </div> <div id="compat-mobile"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android</th> <th>Chrome for Android</th> <th>Firefox Mobile (Gecko)</th> <th>IE Mobile</th> <th>Opera Mobile</th> <th>Safari Mobile</th> </tr> <tr> <td>Basic support</td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td>52.0 (52) [1]</td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> </tr> </tbody> </table> </div> <p>[1] In Firefox version 46 until version 51, this feature was disabled by a preference setting. In about:config, set <code>javascript.options.shared_memory</code> to <code>true</code>. </p> <p>[2] The implementation is under development and needs these runtime flags: <code>--js-flags=--harmony-sharedarraybuffer --enable-blink-feature=SharedArrayBuffer</code></p> <h2 id="See_also">See also</h2> <ul> <li><a title="The Atomics object provides atomic operations as static methods. They are used with SharedArrayBuffer objects." href="../atomics"><code>Atomics</code></a></li> <li><a title="The static Atomics.or() method computes a bitwise OR with a given value at a given position in the array, and returns the old value at that position. This atomic operation guarantees that no other write happens until the modified value is written back." href="or"><code>Atomics.or()</code></a></li> <li><a title="The static Atomics.xor() method computes a bitwise XOR with a given value at a given position in the array, and returns the old value at that position. This atomic operation guarantees that no other write happens until the modified value is written back." href="xor"><code>Atomics.xor()</code></a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Atomics/and$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Atomics/and" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Atomics/and</a>
  </p>
</div>
